[ 2019-03-25T20:54:28+08:00 ] 172.31.69.247 1.203.117.221 GET /common/user/notice_count?OS=iOS&version=1.0.4
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.4 [运行时间：0.031191s][吞吐率：32.06req/s] [内存消耗：3,983.09kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000834s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:30+08:00 ] 172.31.69.247 1.203.117.221 GET /common/user/my_info?OS=iOS&version=1.0.4
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.4 [运行时间：0.121940s][吞吐率：8.20req/s] [内存消耗：5,160.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000404s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002937s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:30+08:00 ] 172.31.69.247 1.203.117.221 GET /common/user/notice_count?OS=iOS&version=1.0.4
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.4 [运行时间：0.136060s][吞吐率：7.35req/s] [内存消耗：3,983.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000798s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000539s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:31+08:00 ] 172.31.69.247 1.203.117.221 GET /common/user/class_data?OS=iOS&page=1&version=1.0.4
[ log ] api.kzwchina.com/common/user/class_data?OS=iOS&page=1&version=1.0.4 [运行时间：0.034638s][吞吐率：28.87req/s] [内存消耗：4,093.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->classData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000573s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 169 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT `a`.*,`b`.`name`,`b`.`photo`,`b`.`start`,`b`.`end`,`b`.`price`,t.name as teacher_name,(select count(*) from tpn_class_user where `class_id`=a.class_id and `status`=1) apply_num FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 169 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.001253s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:33+08:00 ] 172.31.69.247 1.203.117.221 GET /common/study/class_course_list?OS=iOS&id=79&version=1.0.4
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=79&version=1.0.4 [运行时间：0.063684s][吞吐率：15.70req/s] [内存消耗：4,469.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '79',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001078s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000584s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 79  AND `uid` = 169 LIMIT 1 [ RunTime:0.000459s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 79  AND `uid` = 169  AND `date` = '2019-03-25' LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 79  AND `date` = '2019-03-25' LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '79' ORDER BY `c`.`start` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 155  AND `uid` = 169 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 156  AND `uid` = 169 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 157  AND `uid` = 169 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 158  AND `uid` = 169 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 159  AND `uid` = 169 LIMIT 1 [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 160  AND `uid` = 169 LIMIT 1 [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 161  AND `uid` = 169 LIMIT 1 [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 162  AND `uid` = 169 LIMIT 1 [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 163  AND `uid` = 169 LIMIT 1 [ RunTime:0.000234s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 79  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '79' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000192s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:33+08:00 ] 172.31.69.247 1.203.117.221 GET /common/study/getclasstime?OS=iOS&id=79&version=1.0.4
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=79&version=1.0.4 [运行时间：0.072247s][吞吐率：13.84req/s] [内存消耗：4,001.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '79',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000365s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000475s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000301s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:33+08:00 ] 172.31.69.247 1.203.117.221 GET /common/study/class_course_list?OS=iOS&id=79&version=1.0.4
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=79&version=1.0.4 [运行时间：0.110845s][吞吐率：9.02req/s] [内存消耗：4,469.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '79',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 79  AND `uid` = 169 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 79  AND `uid` = 169  AND `date` = '2019-03-25' LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 79  AND `date` = '2019-03-25' LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '79' ORDER BY `c`.`start` [ RunTime:0.000405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 155  AND `uid` = 169 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 156  AND `uid` = 169 LIMIT 1 [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 157  AND `uid` = 169 LIMIT 1 [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 158  AND `uid` = 169 LIMIT 1 [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 159  AND `uid` = 169 LIMIT 1 [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 160  AND `uid` = 169 LIMIT 1 [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 161  AND `uid` = 169 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 162  AND `uid` = 169 LIMIT 1 [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 163  AND `uid` = 169 LIMIT 1 [ RunTime:0.000233s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 79  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '79' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000192s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:34+08:00 ] 172.31.69.247 1.203.117.221 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016880s][吞吐率：59.24req/s] [内存消耗：1,984.85kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-03-25T20:54:35+08:00 ] 172.31.69.247 1.203.117.221 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016962s][吞吐率：58.96req/s] [内存消耗：1,984.85kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-03-25T20:54:39+08:00 ] 172.31.69.247 1.203.117.221 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037716s][吞吐率：26.51req/s] [内存消耗：4,118.63kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.4',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '161',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000485s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000606s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 161 [ RunTime:0.002487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 161 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 169  AND `type` = 3  AND `type_id` = 161 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:40+08:00 ] 172.31.69.247 1.203.117.221 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040014s][吞吐率：24.99req/s] [内存消耗：3,939.38kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.4',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '161',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000535s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '161' ORDER BY id desc LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '161' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000409s ]

---------------------------------------------------------------
[ 2019-03-25T20:54:40+08:00 ] 172.31.69.247 1.203.117.221 GET /common/user/aftertime?OS=iOS&cid=161&type=1&uid=169&version=1.0.4
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=161&type=1&uid=169&version=1.0.4 [运行时间：0.053916s][吞吐率：18.55req/s] [内存消耗：3,986.37kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=heaeqve38gthsbr5lfr9uj1rq0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '27bceab132ba15dc0acf73505c3897ff',
  'user-agent' => 'kouzhiwen/1.0.4 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.4',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '161',
  'type' => '1',
  'uid' => '169',
  'version' => '1.0.4',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '27bceab132ba15dc0acf73505c3897ff' LIMIT 1 [ RunTime:0.000471s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 169  AND `classcourse_id` = 161  AND `type` = 1 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-03-25T23:44:27+08:00 ] 172.31.69.247 47.92.102.179 GET /
[ log ] api.kzwchina.com/ [运行时间：0.015632s][吞吐率：63.97req/s] [内存消耗：1,984.67kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'user-agent' => 'Mozilla/5.0 (Linux; Android 4.1.1; Nexus 7 Build/JRO03D))',
  'host' => 'api.kzwchina.com',
  'accept' => 'text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2',
  'connection' => 'keep-alive',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
