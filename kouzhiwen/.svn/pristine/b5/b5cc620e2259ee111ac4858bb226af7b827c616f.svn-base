[ 2019-03-31T00:27:18+08:00 ] 172.31.69.247 223.104.63.174 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.116329s][吞吐率：8.60req/s] [内存消耗：5,159.45kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003081s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:19+08:00 ] 172.31.69.247 223.104.63.174 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043879s][吞吐率：22.79req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000778s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 251  AND `reading` = 0 LIMIT 1 [ RunTime:0.000318s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:19+08:00 ] 172.31.69.247 223.104.63.174 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.054878s][吞吐率：18.22req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000485s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001074s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000722s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 251  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000715s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000800s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000324s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:26+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035839s][吞吐率：27.90req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000835s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963246 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963246 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963246 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=251) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963246 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001215s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T00:27:39+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.043527s][吞吐率：22.97req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001001s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000378s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:39+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065143s][吞吐率：15.35req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001001s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000964s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 254 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000215s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:51+08:00 ] 172.31.69.247 223.104.63.174 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043806s][吞吐率：22.83req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000341s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000584s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 251  AND `reading` = 0 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:51+08:00 ] 172.31.69.247 223.104.63.174 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.046438s][吞吐率：21.53req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001036s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 251 ORDER BY u.weight ASC [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000370s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:51+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030763s][吞吐率：32.51req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000795s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:51+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032792s][吞吐率：30.50req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000653s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:53+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.040336s][吞吐率：24.79req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001045s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000358s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:53+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.041782s][吞吐率：23.93req/s] [内存消耗：3,881.80kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000533s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000246s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:57+08:00 ] 172.31.69.247 223.104.63.174 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043734s][吞吐率：22.87req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000598s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 251  AND `reading` = 0 LIMIT 1 [ RunTime:0.000338s ]

---------------------------------------------------------------
[ 2019-03-31T00:27:57+08:00 ] 172.31.69.247 223.104.63.174 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.129392s][吞吐率：7.73req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001055s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000696s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.004861s ]

---------------------------------------------------------------
[ 2019-03-31T00:28:04+08:00 ] 172.31.69.247 223.104.63.174 GET /discover/course/course_type?enterprise_id=13&type=1
[ log ] api.kzwchina.com/discover/course/course_type?enterprise_id=13&type=1 [运行时间：0.030907s][吞吐率：32.36req/s] [内存消耗：3,908.94kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 13  AND `type` = 1 [ RunTime:0.000257s ]

---------------------------------------------------------------
[ 2019-03-31T00:28:04+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.032813s][吞吐率：30.48req/s] [内存消耗：3,997.85kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '40',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'type_id' => '0',
  'page' => '1',
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000644s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000668s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-03-31T00:28:10+08:00 ] 172.31.69.247 223.104.63.174 GET /discover/course/course_type?enterprise_id=13&type=2
[ log ] api.kzwchina.com/discover/course/course_type?enterprise_id=13&type=2 [运行时间：0.031096s][吞吐率：32.16req/s] [内存消耗：3,908.94kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'type' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000823s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 13  AND `type` = 2 [ RunTime:0.000267s ]

---------------------------------------------------------------
[ 2019-03-31T00:28:11+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.031674s][吞吐率：31.57req/s] [内存消耗：3,996.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '40',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '0',
  'page' => '1',
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '2' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '2' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000414s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-03-31T00:28:13+08:00 ] 172.31.69.247 223.104.63.174 GET /common/user/communication?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/user/communication?enterprise_id=13&page=1 [运行时间：0.032278s][吞吐率：30.98req/s] [内存消耗：4,019.67kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000868s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 13  AND `uid` <> 251 LIMIT 1 [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 13  AND `uid` <> 251 ORDER BY level desc LIMIT 0,10 [ RunTime:0.000501s ]

---------------------------------------------------------------
[ 2019-03-31T00:28:22+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036759s][吞吐率：27.20req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963302 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963302 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963302 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=251) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963302 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001024s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T00:28:29+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/study_details?id=43
[ log ] api.kzwchina.com/common/study/study_details?id=43 [运行时间：0.035754s][吞吐率：27.97req/s] [内存消耗：4,148.60kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '43',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 251 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:02+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044757s][吞吐率：22.34req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:02+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065809s][吞吐率：15.20req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000483s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001052s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000667s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000491s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000947s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000229s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:27+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044790s][吞吐率：22.33req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001025s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000657s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000388s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:27+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065201s][吞吐率：15.34req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001026s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000656s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000480s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000420s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000427s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000913s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000205s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:30+08:00 ] 172.31.69.247 223.104.63.174 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.040956s][吞吐率：24.42req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '251',
  'cid' => '311',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000641s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001074s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000706s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 251  AND `classcourse_id` = 311  AND `type` = 1 LIMIT 1 [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:30+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.050364s][吞吐率：19.86req/s] [内存消耗：4,107.64kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000578s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 311 [ RunTime:0.002896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 311 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 251  AND `type` = 3  AND `type_id` = 311 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (251 , 3 , 311 , 1553963370) [ RunTime:0.002012s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000259s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:31+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031417s][吞吐率：31.83req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '311',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000812s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='251') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000466s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:45+08:00 ] 172.31.69.247 223.104.63.174 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.043991s][吞吐率：22.73req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '251',
  'cid' => '307',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000388s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001020s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 251  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:45+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.052253s][吞吐率：19.14req/s] [内存消耗：4,106.06kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001140s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001020s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000592s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.003510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 251  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000250s ]

---------------------------------------------------------------
[ 2019-03-31T00:29:45+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032116s][吞吐率：31.14req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000905s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='251') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000399s ]

---------------------------------------------------------------
[ 2019-03-31T00:30:42+08:00 ] 172.31.69.247 223.104.63.174 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.043462s][吞吐率：23.01req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '251',
  'cid' => '304',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000600s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 251  AND `classcourse_id` = 304  AND `type` = 1 LIMIT 1 [ RunTime:0.000368s ]

---------------------------------------------------------------
[ 2019-03-31T00:30:42+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.050099s][吞吐率：19.96req/s] [内存消耗：4,105.73kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '304',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000506s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001059s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000672s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000594s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 304 [ RunTime:0.002911s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 304 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 251  AND `type` = 3  AND `type_id` = 304 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000240s ]

---------------------------------------------------------------
[ 2019-03-31T00:30:43+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031393s][吞吐率：31.85req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '304',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '304' ORDER BY id desc LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='251') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '304' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000425s ]

---------------------------------------------------------------
[ 2019-03-31T00:30:56+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044794s][吞吐率：22.32req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001056s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000670s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000343s ]

---------------------------------------------------------------
[ 2019-03-31T00:30:56+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064653s][吞吐率：15.47req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000586s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000499s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000811s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:13+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_hot?id=130&page=1
[ log ] api.kzwchina.com/common/study/class_hot?id=130&page=1 [运行时间：0.032098s][吞吐率：31.15req/s] [内存消耗：4,050.77kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassHot[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000872s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_teacher_article` WHERE  `class_id` = 130 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_teacher_article` WHERE  `class_id` = 130 ORDER BY add_time desc LIMIT 0,10 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:21+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/study_details?id=43
[ log ] api.kzwchina.com/common/study/study_details?id=43 [运行时间：0.036443s][吞吐率：27.44req/s] [内存消耗：4,148.60kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '43',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 251 LIMIT 1 [ RunTime:0.000449s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000335s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:38+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044644s][吞吐率：22.40req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000300s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000786s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:38+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065427s][吞吐率：15.28req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000519s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001025s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000482s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000390s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000939s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:40+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044886s][吞吐率：22.28req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001032s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000656s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000694s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000352s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:40+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065936s][吞吐率：15.17req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001032s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000656s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000513s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000427s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000418s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000839s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:42+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.049830s][吞吐率：20.07req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000608s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000799s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000300s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:42+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.069509s][吞吐率：14.39req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000550s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001162s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000733s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000539s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000751s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.001436s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000233s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:43+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_list?id=130
[ log ] api.kzwchina.com/common/study/notice_list?id=130 [运行时间：0.031657s][吞吐率：31.59req/s] [内存消耗：4,058.61kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000816s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000320s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:49+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_details?id=57
[ log ] api.kzwchina.com/common/study/notice_details?id=57 [运行时间：0.033088s][吞吐率：30.22req/s] [内存消耗：4,066.38kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '57',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000394s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000811s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000417s ]

---------------------------------------------------------------
[ 2019-03-31T00:31:49+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_details?id=57
[ log ] api.kzwchina.com/common/study/notice_details?id=57 [运行时间：0.031547s][吞吐率：31.70req/s] [内存消耗：3,963.20kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 7.1.1; vivo Xplay6 Build/NMF26F; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/6.2 TBS/044328 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.8',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => '57',
)
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000522s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000713s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000806s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000387s ]

---------------------------------------------------------------
[ 2019-03-31T00:34:12+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.033912s][吞吐率：29.49req/s] [内存消耗：4,064.93kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000510s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000370s ]

---------------------------------------------------------------
[ 2019-03-31T00:34:13+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.031346s][吞吐率：31.90req/s] [内存消耗：3,961.73kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 7.1.1; vivo Xplay6 Build/NMF26F; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/6.2 TBS/044328 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.8',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000746s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000370s ]

---------------------------------------------------------------
[ 2019-03-31T00:34:26+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/study_details?id=46
[ log ] api.kzwchina.com/common/study/study_details?id=46 [运行时间：0.036280s][吞吐率：27.56req/s] [内存消耗：4,149.44kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '46',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 46 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 251 LIMIT 1 [ RunTime:0.000453s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000325s ]

---------------------------------------------------------------
[ 2019-03-31T00:34:40+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/study_details?id=47
[ log ] api.kzwchina.com/common/study/study_details?id=47 [运行时间：0.036181s][吞吐率：27.64req/s] [内存消耗：4,149.98kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '47',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 47 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 251 LIMIT 1 [ RunTime:0.000449s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000353s ]

---------------------------------------------------------------
[ 2019-03-31T00:35:12+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/study_details?id=46
[ log ] api.kzwchina.com/common/study/study_details?id=46 [运行时间：0.036384s][吞吐率：27.48req/s] [内存消耗：4,149.44kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '46',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000840s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 46 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 251 LIMIT 1 [ RunTime:0.000453s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000329s ]

---------------------------------------------------------------
[ 2019-03-31T00:35:36+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/study_details?id=43
[ log ] api.kzwchina.com/common/study/study_details?id=43 [运行时间：0.036902s][吞吐率：27.10req/s] [内存消耗：4,148.60kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '43',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000508s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000902s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000729s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 251 LIMIT 1 [ RunTime:0.000486s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000375s ]

---------------------------------------------------------------
[ 2019-03-31T00:35:44+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044632s][吞吐率：22.41req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000325s ]

---------------------------------------------------------------
[ 2019-03-31T00:35:44+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065460s][吞吐率：15.28req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001078s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000650s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000422s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000821s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000213s ]

---------------------------------------------------------------
[ 2019-03-31T00:36:02+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035892s][吞吐率：27.86req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000919s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963762 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000833s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963762 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963762 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=251) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553963762 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001173s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T00:36:04+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.043750s][吞吐率：22.86req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001074s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-03-31T00:36:04+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064418s][吞吐率：15.52req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000309s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000834s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000482s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000424s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000409s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000444s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000886s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-03-31T00:36:07+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_list?id=130
[ log ] api.kzwchina.com/common/study/notice_list?id=130 [运行时间：0.031797s][吞吐率：31.45req/s] [内存消耗：4,058.61kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000308s ]

---------------------------------------------------------------
[ 2019-03-31T00:36:09+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.032866s][吞吐率：30.43req/s] [内存消耗：4,064.93kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000350s ]

---------------------------------------------------------------
[ 2019-03-31T00:36:09+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.031004s][吞吐率：32.25req/s] [内存消耗：3,961.73kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 7.1.1; vivo Xplay6 Build/NMF26F; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/6.2 TBS/044328 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.8',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000514s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000396s ]

---------------------------------------------------------------
[ 2019-03-31T00:39:14+08:00 ] 172.31.69.247 223.104.63.174 GET /common/study/classdiscuss?id=130
[ log ] api.kzwchina.com/common/study/classdiscuss?id=130 [运行时间：0.030994s][吞吐率：32.26req/s] [内存消耗：4,037.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000823s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '130'  AND `u`.`user_id` = 251  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000391s ]

---------------------------------------------------------------
[ 2019-03-31T00:39:28+08:00 ] 172.31.69.247 223.104.63.174 POST /discover/introduce/details
[ log ] api.kzwchina.com/discover/introduce/details [运行时间：0.030412s][吞吐率：32.88req/s] [内存消耗：3,829.66kb] [文件加载：59]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '35',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000790s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000276s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 35 LIMIT 1 [ RunTime:0.000305s ]

---------------------------------------------------------------
[ 2019-03-31T00:39:28+08:00 ] 172.31.69.247 223.104.63.174 GET /discover/introduce/details?id=35
[ log ] api.kzwchina.com/discover/introduce/details?id=35 [运行时间：0.025397s][吞吐率：39.38req/s] [内存消耗：3,308.73kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 7.1.1; vivo Xplay6 Build/NMF26F; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/55.0.2883.91 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.8',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => '35',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000395s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000694s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 35 LIMIT 1 [ RunTime:0.000370s ]

---------------------------------------------------------------
[ 2019-03-31T00:40:09+08:00 ] 172.31.69.247 223.104.63.174 POST /common/user/class_data
[ log ] api.kzwchina.com/common/user/class_data [运行时间：0.032997s][吞吐率：30.31req/s] [内存消耗：4,086.24kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->classData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 251 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT `a`.*,`b`.`name`,`b`.`photo`,`b`.`start`,`b`.`end`,`b`.`price`,t.name as teacher_name,(select count(*) from tpn_class_user where `class_id`=a.class_id and `status`=1) apply_num FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 251 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.000935s ]

---------------------------------------------------------------
[ 2019-03-31T06:47:59+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.112897s][吞吐率：8.86req/s] [内存消耗：5,160.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002942s ]

---------------------------------------------------------------
[ 2019-03-31T06:47:59+08:00 ] 172.31.69.247 117.136.79.147 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050051s][吞吐率：19.98req/s] [内存消耗：4,389.88kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001038s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 263  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000441s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000772s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-03-31T06:47:59+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.054180s][吞吐率：18.46req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 263  AND `reading` = 0 LIMIT 1 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-03-31T06:48:08+08:00 ] 172.31.69.247 117.136.79.147 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036041s][吞吐率：27.75req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986088 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000721s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986088 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986088 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=263) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986088 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001179s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T06:48:12+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.074503s][吞吐率：13.42req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001052s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000527s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000916s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000205s ]

---------------------------------------------------------------
[ 2019-03-31T06:48:12+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.089466s][吞吐率：11.18req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000371s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000456s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000376s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000897s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-03-31T06:48:12+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.103416s][吞吐率：9.67req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000362s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T06:48:17+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.031917s][吞吐率：31.33req/s] [内存消耗：4,060.08kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000661s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000321s ]

---------------------------------------------------------------
[ 2019-03-31T06:48:21+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/notice_details?OS=iOS&id=58&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_details?OS=iOS&id=58&version=1.0.5 [运行时间：0.032861s][吞吐率：30.43req/s] [内存消耗：4,066.74kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '58',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000840s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000343s ]

---------------------------------------------------------------
[ 2019-03-31T06:49:16+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/notice_details?OS=iOS&id=57&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_details?OS=iOS&id=57&version=1.0.5 [运行时间：0.031851s][吞吐率：31.40req/s] [内存消耗：4,068.22kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '57',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000335s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:05+08:00 ] 172.31.69.247 117.136.79.147 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036360s][吞吐率：27.50req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000856s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986205 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986205 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986205 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=263) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986205 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001012s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T06:50:11+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066619s][吞吐率：15.01req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001059s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000715s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000884s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:11+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.070939s][吞吐率：14.10req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:11+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.117094s][吞吐率：8.54req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000564s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000789s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:24+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.073182s][吞吐率：13.66req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000969s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000414s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001009s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:24+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.077348s][吞吐率：12.93req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000357s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:24+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.105717s][吞吐率：9.46req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000450s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000446s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000238s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000888s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:27+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038686s][吞吐率：25.85req/s] [内存消耗：4,106.75kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000609s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.003934s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 263  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000244s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:28+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039716s][吞吐率：25.18req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000889s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000676s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='263') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000403s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:28+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/aftertime?OS=iOS&cid=303&type=1&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=303&type=1&uid=263&version=1.0.5 [运行时间：0.054323s][吞吐率：18.41req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '303',
  'type' => '1',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000542s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 263  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000314s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:35+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.031717s][吞吐率：31.53req/s] [内存消耗：4,060.08kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000317s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:37+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/notice_details?OS=iOS&id=58&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_details?OS=iOS&id=58&version=1.0.5 [运行时间：0.033365s][吞吐率：29.97req/s] [内存消耗：4,066.74kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '58',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:47+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037424s][吞吐率：26.72req/s] [内存消耗：4,106.95kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000863s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000605s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.002559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 263  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000242s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:47+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.038728s][吞吐率：25.82req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000811s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000658s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='263') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000419s ]

---------------------------------------------------------------
[ 2019-03-31T06:50:47+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5 [运行时间：0.054049s][吞吐率：18.50req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'type' => '1',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000340s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 263  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000312s ]

---------------------------------------------------------------
[ 2019-03-31T06:51:05+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/getnote?OS=iOS&cid=307&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/getnote?OS=iOS&cid=307&uid=263&version=1.0.5 [运行时间：0.029908s][吞吐率：33.44req/s] [内存消耗：3,980.01kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->getnote[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000812s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_note` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_note` WHERE  `uid` = 263  AND `cid` = 307 LIMIT 1 [ RunTime:0.000257s ]

---------------------------------------------------------------
[ 2019-03-31T06:52:14+08:00 ] 172.31.69.247 117.136.79.147 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036333s][吞吐率：27.52req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986334 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000752s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986334 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986334 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000755s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=263) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986334 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001313s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T06:52:17+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/study_details?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=43&version=1.0.5 [运行时间：0.036368s][吞吐率：27.50req/s] [内存消耗：4,150.45kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000662s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 263 LIMIT 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000335s ]

---------------------------------------------------------------
[ 2019-03-31T06:52:33+08:00 ] 172.31.69.247 117.136.79.147 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.034940s][吞吐率：28.62req/s] [内存消耗：4,125.57kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986353 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986353 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986353 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=263) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553986353 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000433s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T06:52:38+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065304s][吞吐率：15.31req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001063s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000711s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000892s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000205s ]

---------------------------------------------------------------
[ 2019-03-31T06:52:38+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.078774s][吞吐率：12.69req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-03-31T06:52:38+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.100574s][吞吐率：9.94req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000307s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000522s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000435s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000429s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000233s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000379s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000858s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000199s ]

---------------------------------------------------------------
[ 2019-03-31T06:52:45+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037467s][吞吐率：26.69req/s] [内存消耗：4,106.95kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000797s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000600s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000612s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.002350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 263  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000243s ]

---------------------------------------------------------------
[ 2019-03-31T06:52:45+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5 [运行时间：0.037050s][吞吐率：26.99req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'type' => '1',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 263  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000299s ]

---------------------------------------------------------------
[ 2019-03-31T06:52:45+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.051685s][吞吐率：19.35req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000294s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='263') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000413s ]

---------------------------------------------------------------
[ 2019-03-31T06:53:55+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/addstues?OS=iOS&cid=307&ctype=2&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=307&ctype=2&uid=263&version=1.0.5 [运行时间：0.039950s][吞吐率：25.03req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'ctype' => '2',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000862s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000659s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 263  AND `cid` = 307 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (263 , 307 , 2) [ RunTime:0.004806s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 263  AND `cid` = 307 [ RunTime:0.004069s ]

---------------------------------------------------------------
[ 2019-03-31T06:55:12+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/getnote?OS=iOS&cid=307&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/getnote?OS=iOS&cid=307&uid=263&version=1.0.5 [运行时间：0.030608s][吞吐率：32.67req/s] [内存消耗：3,980.01kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->getnote[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_note` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_note` WHERE  `uid` = 263  AND `cid` = 307 LIMIT 1 [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-03-31T07:03:42+08:00 ] 172.31.69.247 106.57.116.208 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.044974s][吞吐率：22.24req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=oe5ed97523lq8qkb77dd3k3p91',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000494s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001053s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000708s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000356s ]

---------------------------------------------------------------
[ 2019-03-31T07:03:42+08:00 ] 172.31.69.247 106.57.116.208 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.083388s][吞吐率：11.99req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=oe5ed97523lq8qkb77dd3k3p91',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000365s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000576s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 255 LIMIT 1 [ RunTime:0.000475s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 255  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 255 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 255 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 255 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 255 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 255 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 255 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000926s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-03-31T07:03:42+08:00 ] 172.31.69.247 106.57.116.208 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.111569s][吞吐率：8.96req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=oe5ed97523lq8qkb77dd3k3p91',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 255 LIMIT 1 [ RunTime:0.000468s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 255  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000373s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 255 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 255 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 255 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 255 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 255 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 255 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000843s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-03-31T07:03:45+08:00 ] 172.31.69.247 106.57.116.208 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.031479s][吞吐率：31.77req/s] [内存消耗：4,060.41kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=oe5ed97523lq8qkb77dd3k3p91',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000326s ]

---------------------------------------------------------------
[ 2019-03-31T07:03:47+08:00 ] 172.31.69.247 106.57.116.208 GET /common/study/notice_details?OS=iOS&id=58&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_details?OS=iOS&id=58&version=1.0.5 [运行时间：0.033058s][吞吐率：30.25req/s] [内存消耗：4,066.73kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=oe5ed97523lq8qkb77dd3k3p91',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '58',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000804s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000339s ]

---------------------------------------------------------------
[ 2019-03-31T07:03:49+08:00 ] 172.31.69.247 106.57.116.208 GET /common/study/notice_details?OS=iOS&id=57&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_details?OS=iOS&id=57&version=1.0.5 [运行时间：0.033325s][吞吐率：30.01req/s] [内存消耗：4,068.18kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=oe5ed97523lq8qkb77dd3k3p91',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '57',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000352s ]

---------------------------------------------------------------
[ 2019-03-31T07:07:35+08:00 ] 172.31.69.247 117.136.40.176 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.112986s][吞吐率：8.85req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002966s ]

---------------------------------------------------------------
[ 2019-03-31T07:07:36+08:00 ] 172.31.69.247 117.136.40.176 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044056s][吞吐率：22.70req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000343s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000825s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 264  AND `reading` = 0 LIMIT 1 [ RunTime:0.000339s ]

---------------------------------------------------------------
[ 2019-03-31T07:07:36+08:00 ] 172.31.69.247 117.136.40.176 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.056358s][吞吐率：17.74req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000480s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001060s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 264  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000450s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000762s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000439s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000278s ]

---------------------------------------------------------------
[ 2019-03-31T07:07:38+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035805s][吞吐率：27.93req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553987258 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553987258 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553987258 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=264) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553987258 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001354s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T07:07:41+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044497s][吞吐率：22.47req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001018s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000369s ]

---------------------------------------------------------------
[ 2019-03-31T07:07:41+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065785s][吞吐率：15.20req/s] [内存消耗：4,464.57kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001018s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000664s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 264 LIMIT 1 [ RunTime:0.000869s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 264  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000380s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 264 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 264 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 264 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 264 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 264 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 264 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000871s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000195s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000194s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T07:08:04+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/study_details?id=46
[ log ] api.kzwchina.com/common/study/study_details?id=46 [运行时间：0.035254s][吞吐率：28.37req/s] [内存消耗：4,149.44kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '46',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000883s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000679s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 46 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 264 LIMIT 1 [ RunTime:0.000459s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-03-31T07:09:38+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/study_details?id=47
[ log ] api.kzwchina.com/common/study/study_details?id=47 [运行时间：0.035896s][吞吐率：27.86req/s] [内存消耗：4,149.98kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '47',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000397s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 47 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 264 LIMIT 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000344s ]

---------------------------------------------------------------
[ 2019-03-31T07:11:31+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044407s][吞吐率：22.52req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000479s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001057s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000672s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000357s ]

---------------------------------------------------------------
[ 2019-03-31T07:11:31+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065732s][吞吐率：15.21req/s] [内存消耗：4,464.57kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000807s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 264 LIMIT 1 [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 264  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000398s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 264 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 264 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 264 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 264 LIMIT 1 [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 264 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 264 LIMIT 1 [ RunTime:0.000238s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000801s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T07:11:39+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/notice_list?id=130
[ log ] api.kzwchina.com/common/study/notice_list?id=130 [运行时间：0.031525s][吞吐率：31.72req/s] [内存消耗：4,058.61kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000799s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-03-31T07:11:43+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.032752s][吞吐率：30.53req/s] [内存消耗：4,064.93kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000355s ]

---------------------------------------------------------------
[ 2019-03-31T07:11:44+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.030778s][吞吐率：32.49req/s] [内存消耗：3,961.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 9; BLA-AL00 Build/HUAWEIBLA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.110 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.9',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000369s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:35+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044546s][吞吐率：22.45req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000385s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001022s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000696s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.000317s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:35+08:00 ] 172.31.69.247 210.21.235.90 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.047146s][吞吐率：21.21req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001118s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001022s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000695s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 277 ORDER BY u.weight ASC [ RunTime:0.000476s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000354s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:35+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030593s][吞吐率：32.69req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000835s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000712s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000193s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:35+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032890s][吞吐率：30.40req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000428s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:38+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.037403s][吞吐率：26.74req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001092s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000741s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000385s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:38+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.038302s][吞吐率：26.11req/s] [内存消耗：3,881.80kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000272s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:43+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044334s][吞吐率：22.56req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000489s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001016s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000719s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.000296s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:43+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.126078s][吞吐率：7.93req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000495s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001016s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000719s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.004243s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:47+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/class_data
[ log ] api.kzwchina.com/common/user/class_data [运行时间：0.033340s][吞吐率：29.99req/s] [内存消耗：4,086.24kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->classData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 277 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `a`.*,`b`.`name`,`b`.`photo`,`b`.`start`,`b`.`end`,`b`.`price`,t.name as teacher_name,(select count(*) from tpn_class_user where `class_id`=a.class_id and `status`=1) apply_num FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 277 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.000867s ]

---------------------------------------------------------------
[ 2019-03-31T07:54:56+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/paper_data
[ log ] api.kzwchina.com/common/user/paper_data [运行时间：0.032555s][吞吐率：30.72req/s] [内存消耗：4,089.61kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->paperData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper_user` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM ( SELECT `a`.`id`,`a`.`paper_id`,`a`.`uid`,`a`.`score`,`a`.`created_at`,`b`.`type`,`b`.`title`,`b`.`photo`,(select count(*) from `tpn_paper_user` where `paper_id`=a.paper_id and `uid`=277) exam_num,(select count(*) from `tpn_paper_user` where `paper_id`=a.paper_id and `uid`=277 and `status`=3) exa,(select if(count(*)>0,1,2) from `tpn_paper_user` where `paper_id`=a.paper_id and `status`=1 and `uid`=277) is_pass,count(*) FROM `tpn_paper_user` `a` INNER JOIN `tpn_paper` `b` ON `a`.`paper_id`=`b`.`id` WHERE  `a`.`uid` = 277  AND `a`.`status` <> 3 GROUP BY a.paper_id HAVING is_pass=1 ORDER BY a.id desc ) `_group_count_` LIMIT 1 [ RunTime:0.000791s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`paper_id`,`a`.`uid`,`a`.`score`,`a`.`created_at`,`b`.`type`,`b`.`title`,`b`.`photo`,(select count(*) from `tpn_paper_user` where `paper_id`=a.paper_id and `uid`=277) exam_num,(select count(*) from `tpn_paper_user` where `paper_id`=a.paper_id and `uid`=277 and `status`=3) exa,(select if(count(*)>0,1,2) from `tpn_paper_user` where `paper_id`=a.paper_id and `status`=1 and `uid`=277) is_pass FROM `tpn_paper_user` `a` INNER JOIN `tpn_paper` `b` ON `a`.`paper_id`=`b`.`id` WHERE  `a`.`uid` = 277  AND `a`.`status` <> 3 GROUP BY a.paper_id HAVING is_pass=1 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.000518s ]

---------------------------------------------------------------
[ 2019-03-31T07:55:09+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/anynote
[ log ] api.kzwchina.com/common/user/anynote [运行时间：0.031272s][吞吐率：31.98req/s] [内存消耗：3,999.74kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '7',
)
[ info ] [ PARAM ] array (
  'uid' => '277',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->anynote[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000833s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_note` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_note` `n` INNER JOIN `tpn_class_course` `c` ON `n`.`cid`=`c`.`id` WHERE  `uid` = 277 [ RunTime:0.000360s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:24+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.112997s][吞吐率：8.85req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000494s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002987s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:25+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043801s][吞吐率：22.83req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.000337s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:25+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.056009s][吞吐率：17.85req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001023s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 277  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000479s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000767s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000432s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:41+08:00 ] 172.31.69.247 117.136.40.226 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.111164s][吞吐率：9.00req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002960s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:42+08:00 ] 172.31.69.247 117.136.40.226 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.038118s][吞吐率：26.23req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001076s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000704s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 261  AND `reading` = 0 LIMIT 1 [ RunTime:0.000353s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:42+08:00 ] 172.31.69.247 117.136.40.226 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.049993s][吞吐率：20.00req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 261  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000442s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000786s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000257s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:52+08:00 ] 172.31.69.247 210.21.235.90 GET /discover/course/course_type?enterprise_id=13&type=1
[ log ] api.kzwchina.com/discover/course/course_type?enterprise_id=13&type=1 [运行时间：0.030834s][吞吐率：32.43req/s] [内存消耗：3,908.94kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000677s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 13  AND `type` = 1 [ RunTime:0.000239s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:52+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.031601s][吞吐率：31.64req/s] [内存消耗：3,997.85kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '40',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'type_id' => '0',
  'page' => '1',
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000365s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000785s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000642s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-03-31T08:12:56+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036469s][吞吐率：27.42req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000828s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991176 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000819s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991176 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991176 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000736s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=261) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991176 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001505s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:12:57+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.039745s][吞吐率：25.16req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001068s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000748s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000383s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:57+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.041205s][吞吐率：24.27req/s] [内存消耗：3,881.80kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000289s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000372s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:59+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.037999s][吞吐率：26.32req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001064s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000729s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000348s ]

---------------------------------------------------------------
[ 2019-03-31T08:12:59+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.059765s][吞吐率：16.73req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 261 LIMIT 1 [ RunTime:0.000456s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000392s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 261 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 261 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 261 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 261 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 261 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 261 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000856s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000213s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:07+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043826s][吞吐率：22.82req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000783s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.000324s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:07+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.131538s][吞吐率：7.60req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000481s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001046s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000714s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.004728s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:10+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043064s][吞吐率：23.22req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000307s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.000303s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:10+08:00 ] 172.31.69.247 210.21.235.90 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.045740s][吞吐率：21.86req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000479s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001048s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000683s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 277 ORDER BY u.weight ASC [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000367s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:10+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030612s][吞吐率：32.67req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000806s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:11+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.033089s][吞吐率：30.22req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000509s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000713s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000420s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:13+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.044952s][吞吐率：22.25req/s] [内存消耗：4,105.85kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '305',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001061s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000725s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000684s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 305 [ RunTime:0.003113s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 305 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 261  AND `type` = 3  AND `type_id` = 305 LIMIT 1 [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000316s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:13+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.039940s][吞吐率：25.04req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '305',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 305  AND `type` = 1 LIMIT 1 [ RunTime:0.000320s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:13+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031967s][吞吐率：31.28req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '305',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000819s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '305' ORDER BY id desc LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='261') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '305' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000418s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:15+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.035301s][吞吐率：28.33req/s] [内存消耗：3,977.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '305',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 261  AND `cid` = 305 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 261  AND `cid` = 305 [ RunTime:0.004846s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:21+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B&enterprise_id=0 [运行时间：0.039556s][吞吐率：25.28req/s] [内存消耗：4,271.06kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000852s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000258s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:22+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B2&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B2&enterprise_id=0 [运行时间：0.040338s][吞吐率：24.79req/s] [内存消耗：4,271.09kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B2',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B2%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000497s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000233s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B2%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:22+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=Bac&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=Bac&enterprise_id=0 [运行时间：0.039461s][吞吐率：25.34req/s] [内存消耗：4,271.12kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'Bac',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000400s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000931s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000695s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%Bac%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%Bac%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%Bac%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000237s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%Bac%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%Bac%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%Bac%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:22+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.043577s][吞吐率：22.95req/s] [内存消耗：3,985.26kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '307',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000317s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000710s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000329s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:22+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.050332s][吞吐率：19.87req/s] [内存消耗：4,106.06kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001044s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000719s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000676s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.003284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 261  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000310s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:23+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030865s][吞吐率：32.40req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000825s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='261') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000435s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:26+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=BZ&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=BZ&enterprise_id=0 [运行时间：0.039829s][吞吐率：25.11req/s] [内存消耗：4,271.09kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'BZ',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%BZ%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%BZ%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000472s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%BZ%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000228s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%BZ%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000707s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%BZ%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%BZ%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000252s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:27+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B21&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B21&enterprise_id=0 [运行时间：0.040157s][吞吐率：24.90req/s] [内存消耗：4,271.12kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B21',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000827s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B21%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B21%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000492s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B21%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B21%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000708s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B21%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B21%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000255s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:27+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=BzB&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=BzB&enterprise_id=0 [运行时间：0.039396s][吞吐率：25.38req/s] [内存消耗：4,271.12kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'BzB',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%BzB%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%BzB%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000495s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%BzB%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000231s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%BzB%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000715s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%BzB%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%BzB%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000263s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:30+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B&enterprise_id=0 [运行时间：0.040375s][吞吐率：24.77req/s] [内存消耗：4,271.06kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000564s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000232s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000713s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000446s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000267s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:31+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B&enterprise_id=0 [运行时间：0.054228s][吞吐率：18.44req/s] [内存消耗：4,271.06kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001005s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000692s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000728s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:31+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=1&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=1&enterprise_id=0 [运行时间：0.054561s][吞吐率：18.33req/s] [内存消耗：4,272.09kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => '1',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000495s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001005s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000693s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%1%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%1%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%1%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000728s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%1%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%1%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%1%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:31+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.035873s][吞吐率：27.88req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '306',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001042s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000721s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 306  AND `type` = 1 LIMIT 1 [ RunTime:0.000396s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:31+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.045378s][吞吐率：22.04req/s] [内存消耗：4,105.66kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '306',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000333s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000581s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 306 [ RunTime:0.005373s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 306 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 261  AND `type` = 3  AND `type_id` = 306 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000254s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:32+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031793s][吞吐率：31.45req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '306',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000677s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '306' ORDER BY id desc LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='261') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '306' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:36+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039259s][吞吐率：25.47req/s] [内存消耗：4,106.06kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000614s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.004337s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 261  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000244s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:36+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.029823s][吞吐率：33.53req/s] [内存消耗：3,985.26kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '307',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000715s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000310s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:36+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B2&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B2&enterprise_id=0 [运行时间：0.052368s][吞吐率：19.10req/s] [内存消耗：4,271.09kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B2',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000894s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000658s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B2%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000756s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000712s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B2%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000308s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:36+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B2&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B2&enterprise_id=0 [运行时间：0.054095s][吞吐率：18.49req/s] [内存消耗：4,271.09kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B2',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000307s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000805s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000658s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B2%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000495s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000723s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B2%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B2%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000318s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:37+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030422s][吞吐率：32.87req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000793s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='261') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000411s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:38+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B2B&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B2B&enterprise_id=0 [运行时间：0.040240s][吞吐率：24.85req/s] [内存消耗：4,271.12kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B2B',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B2B%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000489s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000225s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000716s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000231s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B2B%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000545s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:39+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/keyword?type=find&keyword=B2B&enterprise_id=0
[ log ] api.kzwchina.com/common/home/keyword?type=find&keyword=B2B&enterprise_id=0 [运行时间：0.039816s][吞吐率：25.12req/s] [内存消耗：4,271.12kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B2B',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->keyword[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000840s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B2B%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000496s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `title` FROM `tpn_course` WHERE  `title` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_teacher` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000445s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_information` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `a`.`name` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`class_id` = 0  AND `a`.`name` LIKE '%B2B%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000256s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:40+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.040843s][吞吐率：24.48req/s] [内存消耗：3,977.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '307',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000805s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000650s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 261  AND `cid` = 307 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 261  AND `cid` = 307 [ RunTime:0.009989s ]

---------------------------------------------------------------
[ 2019-03-31T08:13:43+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/search?type=find&keyword=B2B&page=1&enterprise_id=0
[ log ] api.kzwchina.com/common/home/search?type=find&keyword=B2B&page=1&enterprise_id=0 [运行时间：0.039958s][吞吐率：25.03req/s] [内存消耗：4,273.41kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'type' => 'find',
  'keyword' => 'B2B',
  'page' => '1',
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->search[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT `name` FROM `tpn_class` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT `c`.`title` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `c`.`class_id`=`s`.`id` WHERE  `c`.`title` LIKE '%B2B%'  AND `s`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT `id`,`title`,`photo`,`look_num`,`price`,`type` FROM `tpn_course` WHERE  `title` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`brief`,`photo`,`consult_num` FROM `tpn_teacher` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0  AND `status` = 1 LIMIT 0,2 [ RunTime:0.000923s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `name` LIKE '%B2B%'  AND `enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`cover_img`,`a`.`name`,`a`.`add_time`,`a`.`comment_num` FROM `tpn_teacher_article` `a` LEFT JOIN `tpn_teacher` `t` ON `a`.`teacher_id`=`t`.`id` WHERE  `a`.`name` LIKE '%B2B%'  AND `t`.`enterprise_id` = 0 LIMIT 0,2 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:07+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.043949s][吞吐率：22.75req/s] [内存消耗：4,232.18kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '307',
  'time' => '115960',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000665s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 307  AND `type` = 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 374 [ RunTime:0.006089s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (261 , 307 , 115960 , 1 , NULL) [ RunTime:0.003542s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-03-31T08:15:19+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036151s][吞吐率：27.66req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000394s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000699s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991319 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991319 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991319 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=261) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991319 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001005s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:15:21+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.046476s][吞吐率：21.52req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000310s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.002892s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000323s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:21+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065165s][吞吐率：15.35req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001056s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000729s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 261 LIMIT 1 [ RunTime:0.000540s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000435s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 261 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 261 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 261 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 261 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 261 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 261 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000871s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:36+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.043277s][吞吐率：23.11req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001052s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000708s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000350s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:36+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064180s][吞吐率：15.58req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000314s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000807s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 261 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000392s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 261 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 261 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 261 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 261 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 261 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 261 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000848s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:38+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/classdiscuss?id=130
[ log ] api.kzwchina.com/common/study/classdiscuss?id=130 [运行时间：0.032248s][吞吐率：31.01req/s] [内存消耗：4,037.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '130'  AND `u`.`user_id` = 261  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:43+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_list?id=130
[ log ] api.kzwchina.com/common/study/notice_list?id=130 [运行时间：0.031819s][吞吐率：31.43req/s] [内存消耗：4,058.61kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000828s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000324s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:49+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.033637s][吞吐率：29.73req/s] [内存消耗：4,064.93kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000397s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000346s ]

---------------------------------------------------------------
[ 2019-03-31T08:15:50+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_details?id=58
[ log ] api.kzwchina.com/common/study/notice_details?id=58 [运行时间：0.030140s][吞吐率：33.18req/s] [内存消耗：3,961.65kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 8.0; MHA-AL00 Build/HUAWEIMHA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/53.0.2785.49 Mobile MQQBrowser/6.2 TBS/043602 Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.8',
  'x-requested-with' => '',
)
[ info ] [ PARAM ] array (
  'id' => '58',
)
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000723s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000400s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000748s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-03-31T08:16:22+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_details?id=57
[ log ] api.kzwchina.com/common/study/notice_details?id=57 [运行时间：0.033358s][吞吐率：29.98req/s] [内存消耗：4,066.38kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '57',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000660s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000355s ]

---------------------------------------------------------------
[ 2019-03-31T08:16:23+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_details?id=57
[ log ] api.kzwchina.com/common/study/notice_details?id=57 [运行时间：0.031443s][吞吐率：31.80req/s] [内存消耗：3,963.09kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 8.0; MHA-AL00 Build/HUAWEIMHA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/53.0.2785.49 Mobile MQQBrowser/6.2 TBS/043602 Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.8',
  'x-requested-with' => '',
)
[ info ] [ PARAM ] array (
  'id' => '57',
)
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000476s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000378s ]

---------------------------------------------------------------
[ 2019-03-31T08:16:25+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_details?id=57
[ log ] api.kzwchina.com/common/study/notice_details?id=57 [运行时间：0.033532s][吞吐率：29.82req/s] [内存消耗：4,066.38kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '57',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000352s ]

---------------------------------------------------------------
[ 2019-03-31T08:16:25+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_details?id=57
[ log ] api.kzwchina.com/common/study/notice_details?id=57 [运行时间：0.030608s][吞吐率：32.67req/s] [内存消耗：3,963.09kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 8.0; MHA-AL00 Build/HUAWEIMHA-AL00; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/53.0.2785.49 Mobile MQQBrowser/6.2 TBS/043602 Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.8',
  'x-requested-with' => '',
)
[ info ] [ PARAM ] array (
  'id' => '57',
)
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000387s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:25+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.114005s][吞吐率：8.77req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000900s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002972s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:26+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043092s][吞吐率：23.21req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000327s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000748s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 267  AND `reading` = 0 LIMIT 1 [ RunTime:0.000344s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:26+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.054962s][吞吐率：18.19req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001032s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 267  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000789s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000262s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:29+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035436s][吞吐率：28.22req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991509 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991509 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991509 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=267) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991509 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001018s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:18:33+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045510s][吞吐率：21.97req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001034s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:34+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065907s][吞吐率：15.17req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000476s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001034s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 267 LIMIT 1 [ RunTime:0.000491s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 267  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000410s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 267 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 267 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 267 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 267 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 267 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 267 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000834s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000212s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:41+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.043541s][吞吐率：22.97req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '311',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000909s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 267  AND `classcourse_id` = 311  AND `type` = 1 LIMIT 1 [ RunTime:0.000385s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:41+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.053471s][吞吐率：18.70req/s] [内存消耗：4,107.64kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000905s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000644s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 311 [ RunTime:0.004274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 311 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 267  AND `type` = 3  AND `type_id` = 311 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (267 , 3 , 311 , 1553991521) [ RunTime:0.001733s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:41+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030776s][吞吐率：32.49req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '311',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000825s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='267') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000427s ]

---------------------------------------------------------------
[ 2019-03-31T08:18:43+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.043595s][吞吐率：22.94req/s] [内存消耗：3,979.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '311',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 267  AND `cid` = 311 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (267 , 311 , 2) [ RunTime:0.005510s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 267  AND `cid` = 311 [ RunTime:0.006556s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:07+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.039244s][吞吐率：25.48req/s] [内存消耗：4,123.34kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '311',
  'time' => '21600',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000514s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 267  AND `classcourse_id` = 311  AND `type` = 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (267 , 311 , 21600 , 1 , NULL) [ RunTime:0.006905s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-03-31T08:19:10+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.043769s][吞吐率：22.85req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '303',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000341s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000811s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 267  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000316s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:10+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.054237s][吞吐率：18.44req/s] [内存消耗：4,107.55kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000508s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001085s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000738s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000641s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.003378s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 267  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (267 , 3 , 303 , 1553991550) [ RunTime:0.002139s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:11+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031899s][吞吐率：31.35req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='267') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000427s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:19+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.043818s][吞吐率：22.82req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '305',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 267  AND `classcourse_id` = 305  AND `type` = 1 LIMIT 1 [ RunTime:0.000394s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:19+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.062546s][吞吐率：15.99req/s] [内存消耗：4,107.66kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '305',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000504s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001066s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000710s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000611s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 305 [ RunTime:0.011106s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 305 LIMIT 1 [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 267  AND `type` = 3  AND `type_id` = 305 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (267 , 3 , 305 , 1553991559) [ RunTime:0.002178s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:19+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030563s][吞吐率：32.72req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '305',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '305' ORDER BY id desc LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='267') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '305' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000420s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:21+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.040268s][吞吐率：24.83req/s] [内存消耗：3,979.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '305',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 267  AND `cid` = 305 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (267 , 305 , 2) [ RunTime:0.004402s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 267  AND `cid` = 305 [ RunTime:0.004233s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:25+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.044346s][吞吐率：22.55req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '304',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000931s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 267  AND `classcourse_id` = 304  AND `type` = 1 LIMIT 1 [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:25+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.054944s][吞吐率：18.20req/s] [内存消耗：4,107.55kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '304',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000639s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 304 [ RunTime:0.003567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 304 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 267  AND `type` = 3  AND `type_id` = 304 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (267 , 3 , 304 , 1553991565) [ RunTime:0.002790s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000253s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:25+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030785s][吞吐率：32.48req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '304',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000833s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '304' ORDER BY id desc LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='267') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '304' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000420s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:32+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.044164s][吞吐率：22.64req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '307',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000999s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 267  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000379s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:32+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.053068s][吞吐率：18.84req/s] [内存消耗：4,107.88kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000999s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000614s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.003219s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 267  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (267 , 3 , 307 , 1553991572) [ RunTime:0.002052s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:32+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031544s][吞吐率：31.70req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000493s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000939s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000676s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='267') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:34+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.041436s][吞吐率：24.13req/s] [内存消耗：3,979.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '267',
  'cid' => '307',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 267  AND `cid` = 307 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (267 , 307 , 2) [ RunTime:0.005301s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 267  AND `cid` = 307 [ RunTime:0.005090s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:57+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.040133s][吞吐率：24.92req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000598s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001072s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000744s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-03-31T08:19:57+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.061314s][吞吐率：16.31req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000315s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000694s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 261 LIMIT 1 [ RunTime:0.000460s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000394s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 261 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 261 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 261 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 261 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 261 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 261 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000828s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:00+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.031897s][吞吐率：31.35req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001055s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000365s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:00+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.054471s][吞吐率：18.36req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000523s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000768s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 261 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000404s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 261 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 261 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 261 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 261 LIMIT 1 [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 261 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 261 LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000824s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:05+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.048283s][吞吐率：20.71req/s] [内存消耗：4,105.81kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001109s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000716s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000658s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 311 [ RunTime:0.003837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 311 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 261  AND `type` = 3  AND `type_id` = 311 LIMIT 1 [ RunTime:0.000414s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000320s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:05+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.042018s][吞吐率：23.80req/s] [内存消耗：3,985.26kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '311',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000371s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 311  AND `type` = 1 LIMIT 1 [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:06+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031972s][吞吐率：31.28req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '311',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000912s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='261') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000425s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:07+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.037144s][吞吐率：26.92req/s] [内存消耗：3,977.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '311',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 261  AND `cid` = 311 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 261  AND `cid` = 311 [ RunTime:0.005599s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:15+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.041854s][吞吐率：23.89req/s] [内存消耗：4,232.18kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '311',
  'time' => '61040',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 311  AND `type` = 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 372 [ RunTime:0.004733s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (261 , 311 , 61040 , 1 , NULL) [ RunTime:0.003537s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-03-31T08:20:20+08:00 ] 172.31.69.247 117.136.40.226 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.041049s][吞吐率：24.36req/s] [内存消耗：3,983.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '261',
  'cid' => '304',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000472s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001085s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000702s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 261  AND `classcourse_id` = 304  AND `type` = 1 LIMIT 1 [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:20+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.049623s][吞吐率：20.15req/s] [内存消耗：4,105.73kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '304',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000333s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 304 [ RunTime:0.004540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 304 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 261  AND `type` = 3  AND `type_id` = 304 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000245s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:21+08:00 ] 172.31.69.247 117.136.40.226 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031346s][吞吐率：31.90req/s] [内存消耗：3,938.65kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '304',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '304' ORDER BY id desc LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='261') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '304' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000429s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:25+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/notice_list?id=130
[ log ] api.kzwchina.com/common/study/notice_list?id=130 [运行时间：0.032428s][吞吐率：30.84req/s] [内存消耗：4,058.61kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:26+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/classdiscuss?id=130
[ log ] api.kzwchina.com/common/study/classdiscuss?id=130 [运行时间：0.032034s][吞吐率：31.22req/s] [内存消耗：4,037.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000545s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000931s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000661s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '130'  AND `u`.`user_id` = 261  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000353s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:33+08:00 ] 172.31.69.247 221.219.96.12 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.114154s][吞吐率：8.76req/s] [内存消耗：5,161.09kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002993s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:33+08:00 ] 172.31.69.247 221.219.96.12 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051335s][吞吐率：19.48req/s] [内存消耗：4,390.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000568s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 191  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000441s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000799s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:33+08:00 ] 172.31.69.247 221.219.96.12 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.063278s][吞吐率：15.80req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 191  AND `reading` = 0 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:34+08:00 ] 172.31.69.247 221.219.96.12 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036483s][吞吐率：27.41req/s] [内存消耗：4,128.98kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000835s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991634 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000779s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991634 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991634 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000739s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=191) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553991634 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001333s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:20:37+08:00 ] 172.31.69.247 221.219.96.12 POST /common/order/order
[ log ] api.kzwchina.com/common/order/order [运行时间：0.157575s][吞吐率：6.35req/s] [内存消耗：4,260.38kb] [文件加载：71]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'order',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '29',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'id' => '43',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Order->Order[ /www/wwwroot/kouzhiwen/application/api/common/controller/Order.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 191 LIMIT 1 [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] INSERT INTO `tpn_class_user` (`class_id` , `uid` , `status` , `created_at` , `updated_at`) VALUES (43 , 191 , 1 , 1553991637 , 1553991637) [ RunTime:0.007721s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:38+08:00 ] 172.31.69.247 221.219.96.12 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.044357s][吞吐率：22.54req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001077s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:38+08:00 ] 172.31.69.247 221.219.96.12 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.079391s][吞吐率：12.60req/s] [内存消耗：4,465.70kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 191 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 191  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000400s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 191 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 191 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 191 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 191 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 191 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 191 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000888s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000430s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000212s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:38+08:00 ] 172.31.69.247 221.219.96.12 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.118416s][吞吐率：8.44req/s] [内存消耗：4,465.70kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 191 LIMIT 1 [ RunTime:0.000476s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 191  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000376s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 191 LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 191 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 191 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 191 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 191 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 191 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000937s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000227s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:53+08:00 ] 172.31.69.247 221.219.96.12 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037012s][吞吐率：27.02req/s] [内存消耗：4,106.77kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000631s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 311 [ RunTime:0.002410s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 311 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 191  AND `type` = 3  AND `type_id` = 311 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000243s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:54+08:00 ] 172.31.69.247 221.219.96.12 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040589s][吞吐率：24.64req/s] [内存消耗：3,939.98kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000585s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='191') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000434s ]

---------------------------------------------------------------
[ 2019-03-31T08:20:54+08:00 ] 172.31.69.247 221.219.96.12 GET /common/user/aftertime?OS=iOS&cid=311&type=1&uid=191&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=311&type=1&uid=191&version=1.0.5 [运行时间：0.054909s][吞吐率：18.21req/s] [内存消耗：3,986.57kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '311',
  'type' => '1',
  'uid' => '191',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 191  AND `classcourse_id` = 311  AND `type` = 1 LIMIT 1 [ RunTime:0.000316s ]

---------------------------------------------------------------
[ 2019-03-31T08:21:32+08:00 ] 172.31.69.247 221.219.96.12 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.031666s][吞吐率：31.58req/s] [内存消耗：4,060.41kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000397s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000573s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000325s ]

---------------------------------------------------------------
[ 2019-03-31T08:28:34+08:00 ] 172.31.69.247 117.136.39.92 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115002s][吞吐率：8.70req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000513s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000913s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000709s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002959s ]

---------------------------------------------------------------
[ 2019-03-31T08:28:34+08:00 ] 172.31.69.247 117.136.39.92 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051432s][吞吐率：19.44req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001107s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000667s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 273  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000450s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000792s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-03-31T08:28:34+08:00 ] 172.31.69.247 117.136.39.92 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.055666s][吞吐率：17.96req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 273  AND `reading` = 0 LIMIT 1 [ RunTime:0.000278s ]

---------------------------------------------------------------
[ 2019-03-31T08:28:39+08:00 ] 172.31.69.247 117.136.39.92 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036687s][吞吐率：27.26req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000503s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992119 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000833s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992119 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992119 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=273) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992119 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001028s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:28:42+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/typelist?OS=iOS&enterprise_id=13&version=1.0.5
[ log ] api.kzwchina.com/common/study/typelist?OS=iOS&enterprise_id=13&version=1.0.5 [运行时间：0.032484s][吞吐率：30.78req/s] [内存消耗：4,047.21kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000872s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` = 0 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` > 0 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-03-31T08:28:45+08:00 ] 172.31.69.247 117.136.39.92 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031490s][吞吐率：31.76req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 273  AND `reading` = 0 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-03-31T08:28:59+08:00 ] 172.31.69.247 117.136.39.92 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030563s][吞吐率：32.72req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000927s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000693s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 273  AND `reading` = 0 LIMIT 1 [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:00+08:00 ] 172.31.69.247 117.136.39.92 GET /discover/article/classify?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/classify?OS=iOS&version=1.0.5 [运行时间：0.054648s][吞吐率：18.30req/s] [内存消耗：3,970.72kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.003103s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001066s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 273 ORDER BY u.weight ASC [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000390s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:00+08:00 ] 172.31.69.247 117.136.39.92 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.048618s][吞吐率：20.57req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 273  AND `reading` = 0 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:00+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/paper_list?id=1&type=1&exam=2&OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/study/paper_list?id=1&type=1&exam=2&OS=iOS&version=1.0.5 [运行时间：0.062819s][吞吐率：15.92req/s] [内存消耗：4,051.82kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '1',
  'type' => '1',
  'exam' => '2',
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->PaperList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000313s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000707s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT `p`.`id`,`p`.`title`,`p`.`photo`,(SELECT COUNT(*) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=273) num,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=273 AND `status`=1) is_paper FROM `tpn_paper` `p` WHERE  `p`.`type` = '1'  AND `p`.`class_id` = '1'  AND `p`.`start_time` <= '2019-03-31 08:29'  AND `p`.`end_time` >= '2019-03-31 08:29' [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:00+08:00 ] 172.31.69.247 117.136.39.92 GET /discover/article/advertisements?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/advertisements?OS=iOS&version=1.0.5 [运行时间：0.030747s][吞吐率：32.52req/s] [内存消耗：3,917.59kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000893s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000217s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:01+08:00 ] 172.31.69.247 117.136.39.92 GET /discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5 [运行时间：0.032211s][吞吐率：31.05req/s] [内存消耗：3,945.02kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000293s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000416s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:01+08:00 ] 172.31.69.247 117.136.39.92 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031428s][吞吐率：31.82req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000889s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 273  AND `reading` = 0 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:03+08:00 ] 172.31.69.247 117.136.39.92 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036301s][吞吐率：27.55req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000816s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992143 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000750s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992143 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992143 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=273) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992143 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001207s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:29:04+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/typelist?OS=iOS&enterprise_id=13&version=1.0.5
[ log ] api.kzwchina.com/common/study/typelist?OS=iOS&enterprise_id=13&version=1.0.5 [运行时间：0.032333s][吞吐率：30.93req/s] [内存消耗：4,047.21kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` = 0 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` > 0 [ RunTime:0.000252s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:11+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.064160s][吞吐率：15.59req/s] [内存消耗：4,465.70kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000506s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000900s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000692s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 273 LIMIT 1 [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 273  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000400s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 273 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 273 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 273 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 273 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 273 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 273 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000928s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000198s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:11+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.110696s][吞吐率：9.03req/s] [内存消耗：4,465.70kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000600s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 273 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 273  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000239s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 273 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 273 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 273 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 273 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 273 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 273 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000890s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:11+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.115851s][吞吐率：8.63req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:16+08:00 ] 172.31.69.247 223.104.63.45 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.058289s][吞吐率：17.16req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd33eb3ea54cd25027b25744eb2fd7f1b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001067s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd33eb3ea54cd25027b25744eb2fd7f1b' LIMIT 1 [ RunTime:0.000744s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000383s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000367s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 270  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000850s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000333s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:16+08:00 ] 172.31.69.247 223.104.63.45 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.075694s][吞吐率：13.21req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd33eb3ea54cd25027b25744eb2fd7f1b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd33eb3ea54cd25027b25744eb2fd7f1b' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 270  AND `reading` = 0 LIMIT 1 [ RunTime:0.000299s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:16+08:00 ] 172.31.69.247 223.104.63.45 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.153611s][吞吐率：6.51req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd33eb3ea54cd25027b25744eb2fd7f1b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000290s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000835s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd33eb3ea54cd25027b25744eb2fd7f1b' LIMIT 1 [ RunTime:0.000650s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003048s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:22+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.033068s][吞吐率：30.24req/s] [内存消耗：3,971.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000699s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 273  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 273 , '2019-03-31' , 1553992162) [ RunTime:0.002359s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:22+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.060567s][吞吐率：16.51req/s] [内存消耗：4,466.75kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000693s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 273 LIMIT 1 [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 273  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 273 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 273 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 273 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 273 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 273 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 273 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000826s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:22+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.075533s][吞吐率：13.24req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000373s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:23+08:00 ] 172.31.69.247 117.136.39.92 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.052290s][吞吐率：19.12req/s] [内存消耗：4,466.75kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=gse805gifbh8s7ttn7pq2ur8v2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '9e4f3bec2d037c06ad10d1abacb0fab4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000539s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '9e4f3bec2d037c06ad10d1abacb0fab4' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 273 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000444s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 273  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000381s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 273 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 273 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 273 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 273 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 273 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 273 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000914s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000198s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:25+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113305s][吞吐率：8.83req/s] [内存消耗：5,160.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002971s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:25+08:00 ] 172.31.69.247 117.136.41.127 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050190s][吞吐率：19.92req/s] [内存消耗：4,389.88kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 266  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000787s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:25+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.064346s][吞吐率：15.54req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000357s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:26+08:00 ] 172.31.69.247 223.104.63.45 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036344s][吞吐率：27.51req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd33eb3ea54cd25027b25744eb2fd7f1b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd33eb3ea54cd25027b25744eb2fd7f1b' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992166 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992166 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992166 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000741s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=270) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992166 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001324s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:29:28+08:00 ] 172.31.69.247 223.104.63.45 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045367s][吞吐率：22.04req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd33eb3ea54cd25027b25744eb2fd7f1b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000494s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001016s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd33eb3ea54cd25027b25744eb2fd7f1b' LIMIT 1 [ RunTime:0.000699s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000363s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:28+08:00 ] 172.31.69.247 223.104.63.45 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.067277s][吞吐率：14.86req/s] [内存消耗：4,464.57kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd33eb3ea54cd25027b25744eb2fd7f1b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000491s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001016s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd33eb3ea54cd25027b25744eb2fd7f1b' LIMIT 1 [ RunTime:0.000699s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 270 LIMIT 1 [ RunTime:0.000442s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.002666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 270  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000406s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 270 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 270 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 270 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 270 LIMIT 1 [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 270 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 270 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000807s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000427s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 254 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:30+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/study_details?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=43&version=1.0.5 [运行时间：0.036592s][吞吐率：27.33req/s] [内存消耗：4,150.45kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000482s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 266 LIMIT 1 [ RunTime:0.000468s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000341s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:38+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031202s][吞吐率：32.05req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000865s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:41+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.121819s][吞吐率：8.21req/s] [内存消耗：5,160.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002958s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:41+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.132540s][吞吐率：7.54req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000792s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:44+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030717s][吞吐率：32.56req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000301s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:45+08:00 ] 172.31.69.247 117.136.41.127 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036860s][吞吐率：27.13req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000521s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000690s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992185 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000801s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992185 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992185 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000767s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=266) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992185 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001302s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:29:48+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.052194s][吞吐率：19.16req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 266 LIMIT 1 [ RunTime:0.000463s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 266  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 266 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 266 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 266 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 266 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 266 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 266 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000818s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:48+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.059229s][吞吐率：16.88req/s] [内存消耗：4,465.33kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000768s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 266 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 266  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 266 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 266 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 266 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 266 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 266 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 266 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000819s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000212s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:48+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.075117s][吞吐率：13.31req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:48+08:00 ] 172.31.69.247 223.104.63.45 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.039590s][吞吐率：25.26req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd33eb3ea54cd25027b25744eb2fd7f1b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000791s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd33eb3ea54cd25027b25744eb2fd7f1b' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 270  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 270 , '2019-03-31' , 1553992188) [ RunTime:0.009073s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:53+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.034111s][吞吐率：29.32req/s] [内存消耗：3,971.67kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 266  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 266 , '2019-03-31' , 1553992193) [ RunTime:0.002985s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:53+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.067199s][吞吐率：14.88req/s] [内存消耗：4,466.39kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001084s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000717s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 266 LIMIT 1 [ RunTime:0.000542s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 266  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 266 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 266 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 266 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 266 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 266 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 266 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000844s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000434s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:53+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.101119s][吞吐率：9.89req/s] [内存消耗：4,466.39kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000702s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 266 LIMIT 1 [ RunTime:0.000449s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 266  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000382s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 266 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 266 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 266 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 266 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 266 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 266 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000866s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000198s ]

---------------------------------------------------------------
[ 2019-03-31T08:29:53+08:00 ] 172.31.69.247 117.136.41.127 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.099308s][吞吐率：10.07req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000357s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000728s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:09+08:00 ] 172.31.69.247 117.136.41.127 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037024s][吞吐率：27.01req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000481s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992209 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000769s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992209 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992209 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000743s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=266) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992209 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001262s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:30:11+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031183s][吞吐率：32.07req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000659s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:54+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.032811s][吞吐率：30.48req/s] [内存消耗：3,971.67kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 263 , '2019-03-31' , 1553992254) [ RunTime:0.002270s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:54+08:00 ] 172.31.69.247 117.136.41.127 POST /discover/article/details
[ log ] api.kzwchina.com/discover/article/details [运行时间：0.045795s][吞吐率：21.84req/s] [内存消耗：4,116.64kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '22',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 22  AND `status` = 1 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 266  AND `type_id` = 22 LIMIT 1 [ RunTime:0.000230s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 22 [ RunTime:0.004237s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:54+08:00 ] 172.31.69.247 117.136.41.127 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.096000s][吞吐率：10.42req/s] [内存消耗：3,939.88kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '22',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.006781s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001072s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.017192s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '22' ORDER BY id desc LIMIT 1 [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='266') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '22' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000511s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:54+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.080408s][吞吐率：12.44req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000389s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000470s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000443s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000400s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000839s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000215s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:54+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.098040s][吞吐率：10.20req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000398s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000719s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:54+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.119114s][吞吐率：8.40req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000381s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000852s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000476s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000402s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000871s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000433s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000215s ]

---------------------------------------------------------------
[ 2019-03-31T08:30:56+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/article/details?id=22
[ log ] api.kzwchina.com/discover/article/details?id=22 [运行时间：0.035013s][吞吐率：28.56req/s] [内存消耗：4,012.61kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Mobile/14C92',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '22',
)
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000740s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 22  AND `status` = 1 LIMIT 1 [ RunTime:0.000418s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 0  AND `type_id` = 22 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 22 [ RunTime:0.003991s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:03+08:00 ] 172.31.69.247 117.136.79.147 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036616s][吞吐率：27.31req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000660s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992263 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992263 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992263 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000779s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=263) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992263 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001272s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:31:21+08:00 ] 172.31.69.247 117.136.79.147 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035166s][吞吐率：28.44req/s] [内存消耗：4,125.57kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000542s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992281 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000761s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992281 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992281 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=263) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992281 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000444s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:31:21+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.029998s][吞吐率：33.34req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000821s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:23+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065825s][吞吐率：15.19req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001106s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000726s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000542s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000805s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:23+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.101507s][吞吐率：9.85req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000583s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 263 LIMIT 1 [ RunTime:0.000455s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000446s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 263  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000377s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 263 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 263 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 263 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 263 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 263 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 263 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000825s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000426s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:23+08:00 ] 172.31.69.247 117.136.79.147 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.106829s][吞吐率：9.36req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000733s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000582s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000275s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:25+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040071s][吞吐率：24.96req/s] [内存消耗：4,108.62kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '305',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000612s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 305 [ RunTime:0.002639s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 305 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 263  AND `type` = 3  AND `type_id` = 305 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (263 , 3 , 305 , 1553992285) [ RunTime:0.002403s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000249s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:26+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039846s][吞吐率：25.10req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '305',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '305' ORDER BY id desc LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='263') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '305' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000428s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:26+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/aftertime?OS=iOS&cid=305&type=1&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=305&type=1&uid=263&version=1.0.5 [运行时间：0.054259s][吞吐率：18.43req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '305',
  'type' => '1',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000565s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 263  AND `classcourse_id` = 305  AND `type` = 1 LIMIT 1 [ RunTime:0.000310s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:26+08:00 ] 172.31.69.247 117.136.39.98 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.113862s][吞吐率：8.78req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '478c3991f9299c7b33950ea5176c3f88',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '478c3991f9299c7b33950ea5176c3f88' LIMIT 1 [ RunTime:0.000565s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002927s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:27+08:00 ] 172.31.69.247 117.136.39.98 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044066s][吞吐率：22.69req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '478c3991f9299c7b33950ea5176c3f88',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '478c3991f9299c7b33950ea5176c3f88' LIMIT 1 [ RunTime:0.000520s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 202  AND `reading` = 0 LIMIT 1 [ RunTime:0.000259s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:27+08:00 ] 172.31.69.247 117.136.39.98 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.056264s][吞吐率：17.77req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '478c3991f9299c7b33950ea5176c3f88',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001052s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '478c3991f9299c7b33950ea5176c3f88' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000438s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 202  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000774s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:31+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038054s][吞吐率：26.28req/s] [内存消耗：4,106.95kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000629s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.003065s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 263  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000258s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:31+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5 [运行时间：0.038147s][吞吐率：26.21req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'type' => '1',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000769s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 263  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000320s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:31+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052957s][吞吐率：18.88req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000314s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='263') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000417s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:33+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/course_type?OS=iOS&enterprise_id=13&type=3&version=1.0.5
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=13&type=3&version=1.0.5 [运行时间：0.030420s][吞吐率：32.87req/s] [内存消耗：3,910.31kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'type' => '3',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000862s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 13  AND `type` = 3 [ RunTime:0.000259s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:34+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/datalist?OS=iOS&enterprise_id=13&page=1&type=3&type_id=34&version=1.0.5
[ log ] api.kzwchina.com/discover/course/datalist?OS=iOS&enterprise_id=13&page=1&type=3&type_id=34&version=1.0.5 [运行时间：0.036493s][吞吐率：27.40req/s] [内存消耗：3,999.65kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'page' => '1',
  'type' => '3',
  'type_id' => '34',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001058s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000724s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000751s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` LEFT JOIN `tpn_teacher` `t` ON `t`.`id`=`a`.`teacher_id` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '3'  AND `a`.`type_id` = '34'  AND `a`.`scene` = 1 ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000427s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy,`t`.`name` FROM `tpn_course` `a` LEFT JOIN `tpn_teacher` `t` ON `t`.`id`=`a`.`teacher_id` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '3'  AND `a`.`type_id` = '34'  AND `a`.`scene` = 1 ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000497s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-03-31T08:31:34+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/datalist?OS=iOS&enterprise_id=13&page=1&type=3&type_id=0&version=1.0.5
[ log ] api.kzwchina.com/discover/course/datalist?OS=iOS&enterprise_id=13&page=1&type=3&type_id=0&version=1.0.5 [运行时间：0.038312s][吞吐率：26.10req/s] [内存消耗：3,999.80kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'page' => '1',
  'type' => '3',
  'type_id' => '0',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000710s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` LEFT JOIN `tpn_teacher` `t` ON `t`.`id`=`a`.`teacher_id` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '3'  AND `a`.`scene` = 1 ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy,`t`.`name` FROM `tpn_course` `a` LEFT JOIN `tpn_teacher` `t` ON `t`.`id`=`a`.`teacher_id` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '3'  AND `a`.`scene` = 1 ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000408s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-03-31T08:31:40+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/course_type?OS=iOS&enterprise_id=13&type=3&version=1.0.5
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=13&type=3&version=1.0.5 [运行时间：0.030971s][吞吐率：32.29req/s] [内存消耗：3,910.31kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'type' => '3',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000476s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000893s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 13  AND `type` = 3 [ RunTime:0.000275s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:41+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/look_class_course?OS=iOS&course_type=0&enterprise_id=13&page=1&version=1.0.5
[ log ] api.kzwchina.com/discover/course/look_class_course?OS=iOS&course_type=0&enterprise_id=13&page=1&version=1.0.5 [运行时间：0.040960s][吞吐率：24.41req/s] [内存消耗：3,996.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'course_type' => '0',
  'enterprise_id' => '13',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->lookClassCourse[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_record` `a` LEFT JOIN `tpn_course` `c` ON `c`.`id`=`a`.`type_id` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `a`.`uid` = 266  AND `a`.`type` = 6  AND `c`.`type` = 2  AND `c`.`enterprise_id` = '13' ORDER BY a.created_at desc LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`look_num`,`c`.`reading`,`t`.`name` FROM `tpn_user_record` `a` LEFT JOIN `tpn_course` `c` ON `c`.`id`=`a`.`type_id` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `a`.`uid` = 266  AND `a`.`type` = 6  AND `c`.`type` = 2  AND `c`.`enterprise_id` = '13' ORDER BY a.created_at desc LIMIT 0,10 [ RunTime:0.000387s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/UserRecord.php:111]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/UserRecord.php:111]

---------------------------------------------------------------
[ 2019-03-31T08:31:41+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/look_class_course?OS=iOS&course_type=34&enterprise_id=13&page=1&version=1.0.5
[ log ] api.kzwchina.com/discover/course/look_class_course?OS=iOS&course_type=34&enterprise_id=13&page=1&version=1.0.5 [运行时间：0.053212s][吞吐率：18.79req/s] [内存消耗：3,996.25kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'course_type' => '34',
  'enterprise_id' => '13',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->lookClassCourse[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_record` `a` LEFT JOIN `tpn_course` `c` ON `c`.`id`=`a`.`type_id` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `a`.`uid` = 266  AND `a`.`type` = 6  AND `c`.`type` = 2  AND `c`.`type_id` = '34'  AND `c`.`enterprise_id` = '13' ORDER BY a.created_at desc LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`look_num`,`c`.`reading`,`t`.`name` FROM `tpn_user_record` `a` LEFT JOIN `tpn_course` `c` ON `c`.`id`=`a`.`type_id` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `a`.`uid` = 266  AND `a`.`type` = 6  AND `c`.`type` = 2  AND `c`.`type_id` = '34'  AND `c`.`enterprise_id` = '13' ORDER BY a.created_at desc LIMIT 0,10 [ RunTime:0.000381s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/UserRecord.php:111]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/UserRecord.php:111]

---------------------------------------------------------------
[ 2019-03-31T08:31:43+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.029901s][吞吐率：33.44req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:47+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038057s][吞吐率：26.28req/s] [内存消耗：4,106.95kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000503s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000819s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000602s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.002815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 263  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000262s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:47+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039170s][吞吐率：25.53req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='263') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000428s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:47+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5 [运行时间：0.055711s][吞吐率：17.95req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'type' => '1',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000315s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 263  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000318s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:48+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/communication?OS=iOS&enterprise_id=13&page=1&version=1.0.5
[ log ] api.kzwchina.com/common/user/communication?OS=iOS&enterprise_id=13&page=1&version=1.0.5 [运行时间：0.032362s][吞吐率：30.90req/s] [内存消耗：4,021.02kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 13  AND `uid` <> 266 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 13  AND `uid` <> 266 ORDER BY level desc LIMIT 0,10 [ RunTime:0.000528s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:54+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/communication?OS=iOS&enterprise_id=13&page=2&version=1.0.5
[ log ] api.kzwchina.com/common/user/communication?OS=iOS&enterprise_id=13&page=2&version=1.0.5 [运行时间：0.032147s][吞吐率：31.11req/s] [内存消耗：4,020.95kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'page' => '2',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000825s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 13  AND `uid` <> 266 LIMIT 1 [ RunTime:0.000421s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 13  AND `uid` <> 266 ORDER BY level desc LIMIT 10,10 [ RunTime:0.000498s ]

---------------------------------------------------------------
[ 2019-03-31T08:31:59+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031651s][吞吐率：31.59req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:10+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/course_type?OS=iOS&enterprise_id=13&type=1&version=1.0.5
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=13&type=1&version=1.0.5 [运行时间：0.030586s][吞吐率：32.69req/s] [内存消耗：3,910.31kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'type' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 13  AND `type` = 1 [ RunTime:0.000263s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:10+08:00 ] 172.31.69.247 117.136.41.127 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.040001s][吞吐率：25.00req/s] [内存消耗：3,998.95kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'type' => '1',
  'type_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001090s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000572s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-03-31T08:32:10+08:00 ] 172.31.69.247 117.136.41.127 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.046651s][吞吐率：21.44req/s] [内存消耗：3,999.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'type' => '1',
  'type_id' => '31',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1'  AND `a`.`type_id` = '31' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1'  AND `a`.`type_id` = '31' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000616s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-03-31T08:32:17+08:00 ] 172.31.69.247 117.136.41.127 GET /discover/course/course_details?OS=iOS&id=178&version=1.0.5
[ log ] api.kzwchina.com/discover/course/course_details?OS=iOS&id=178&version=1.0.5 [运行时间：0.033323s][吞吐率：30.01req/s] [内存消耗：3,974.38kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '178',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseDetails[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000825s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course` WHERE  `id` = 178 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_order` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_order` WHERE  `type` = 2  AND `uid` = 266  AND `type_id` = 178  AND `pay_status` = 2 LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `uid` = 266  AND `type` = 1  AND `type_id` = 178 LIMIT 1 [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:18+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.045686s][吞吐率：21.89req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000482s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001072s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000415s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='263') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000483s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:18+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=307&type=1&uid=263&version=1.0.5 [运行时间：0.054843s][吞吐率：18.23req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'type' => '1',
  'uid' => '263',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000390s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000584s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 263  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:18+08:00 ] 172.31.69.247 117.136.79.147 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.085767s][吞吐率：11.66req/s] [内存消耗：4,106.95kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000294s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000578s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.003430s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 263  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:18+08:00 ] 172.31.69.247 117.136.41.127 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040894s][吞吐率：24.45req/s] [内存消耗：3,939.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'type_id' => '178',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001073s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '1'  AND `a`.`type_id` = '178' ORDER BY id desc LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='266') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '1'  AND `a`.`type_id` = '178' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000421s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:18+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/aftertime?OS=iOS&cid=178&type=1&uid=266&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=178&type=1&uid=266&version=1.0.5 [运行时间：0.045864s][吞吐率：21.80req/s] [内存消耗：3,986.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '178',
  'type' => '1',
  'uid' => '266',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000400s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000746s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 266  AND `classcourse_id` = 178  AND `type` = 1 LIMIT 1 [ RunTime:0.000326s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:21+08:00 ] 172.31.69.247 210.22.20.101 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113942s][吞吐率：8.78req/s] [内存消耗：5,161.66kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002944s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:21+08:00 ] 172.31.69.247 210.22.20.101 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050308s][吞吐率：19.88req/s] [内存消耗：4,390.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000514s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 76  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000781s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:21+08:00 ] 172.31.69.247 210.22.20.101 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065076s][吞吐率：15.37req/s] [内存消耗：3,983.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000442s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 76  AND `reading` = 0 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:22+08:00 ] 172.31.69.247 117.136.41.127 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031083s][吞吐率：32.17req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2ijsh37rr1o6jgvar308vhrvi0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '19b4924552dee1dcd0194f71021c5440',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 10.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000865s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '19b4924552dee1dcd0194f71021c5440' LIMIT 1 [ RunTime:0.000665s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 266  AND `reading` = 0 LIMIT 1 [ RunTime:0.000301s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:25+08:00 ] 172.31.69.247 210.22.20.101 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035772s][吞吐率：27.95req/s] [内存消耗：4,129.31kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000819s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992345 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000743s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992345 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992345 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=76) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992345 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001047s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:32:27+08:00 ] 172.31.69.247 210.22.20.101 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.072809s][吞吐率：13.73req/s] [内存消耗：4,465.89kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001137s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 76 LIMIT 1 [ RunTime:0.000439s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 76  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 76 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 76 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 76 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 76 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 76 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 76 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000950s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:27+08:00 ] 172.31.69.247 210.22.20.101 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.091931s][吞吐率：10.88req/s] [内存消耗：4,465.89kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000343s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000439s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 76 LIMIT 1 [ RunTime:0.000450s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 76  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 76 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 76 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 76 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 76 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 76 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 76 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000794s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000197s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:27+08:00 ] 172.31.69.247 210.22.20.101 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.103213s][吞吐率：9.69req/s] [内存消耗：3,989.49kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000448s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:31+08:00 ] 172.31.69.247 210.22.20.101 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039513s][吞吐率：25.31req/s] [内存消耗：4,107.47kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000522s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000620s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 307 [ RunTime:0.005549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 307 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 76  AND `type` = 3  AND `type_id` = 307 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000251s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:32+08:00 ] 172.31.69.247 210.22.20.101 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.038304s][吞吐率：26.11req/s] [内存消耗：3,940.40kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '307',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='76') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '307' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000408s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:32+08:00 ] 172.31.69.247 210.22.20.101 GET /common/user/aftertime?OS=iOS&cid=307&type=1&uid=76&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=307&type=1&uid=76&version=1.0.5 [运行时间：0.053794s][吞吐率：18.59req/s] [内存消耗：3,987.04kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'type' => '1',
  'uid' => '76',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 76  AND `classcourse_id` = 307  AND `type` = 1 LIMIT 1 [ RunTime:0.000331s ]

---------------------------------------------------------------
[ 2019-03-31T08:32:52+08:00 ] 172.31.69.247 210.22.20.101 GET /common/user/getnote?OS=iOS&cid=307&uid=76&version=1.0.5
[ log ] api.kzwchina.com/common/user/getnote?OS=iOS&cid=307&uid=76&version=1.0.5 [运行时间：0.031651s][吞吐率：31.59req/s] [内存消耗：3,980.38kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '307',
  'uid' => '76',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->getnote[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000524s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_note` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_note` WHERE  `uid` = 76  AND `cid` = 307 LIMIT 1 [ RunTime:0.000253s ]

---------------------------------------------------------------
[ 2019-03-31T08:33:08+08:00 ] 172.31.69.247 210.22.20.101 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035797s][吞吐率：27.94req/s] [内存消耗：4,129.31kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000505s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992388 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000816s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992388 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992388 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000764s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=76) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992388 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001302s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:33:09+08:00 ] 172.31.69.247 210.22.20.101 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031688s][吞吐率：31.56req/s] [内存消耗：3,983.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1ait2ctgd6tufi1rujc352qbr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c1aabd2d0c24a789f5384a2fad12341a',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000903s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c1aabd2d0c24a789f5384a2fad12341a' LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 76  AND `reading` = 0 LIMIT 1 [ RunTime:0.000313s ]

---------------------------------------------------------------
[ 2019-03-31T08:35:51+08:00 ] 172.31.69.247 117.136.79.147 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036856s][吞吐率：27.13req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992551 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000770s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992551 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992551 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=263) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992551 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001020s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:35:52+08:00 ] 172.31.69.247 117.136.79.147 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031225s][吞吐率：32.03req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=de0d4154slok12m6td0rokenr4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '838060377f65e6129fe4d1191d8711f8',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000835s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '838060377f65e6129fe4d1191d8711f8' LIMIT 1 [ RunTime:0.000649s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 263  AND `reading` = 0 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-03-31T08:36:34+08:00 ] 172.31.69.247 223.104.63.11 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.113426s][吞吐率：8.82req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002962s ]

---------------------------------------------------------------
[ 2019-03-31T08:36:35+08:00 ] 172.31.69.247 223.104.63.11 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043412s][吞吐率：23.04req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001078s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000729s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 272  AND `reading` = 0 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-03-31T08:36:35+08:00 ] 172.31.69.247 223.104.63.11 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.055186s][吞吐率：18.12req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000364s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000770s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 272  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000466s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000766s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000275s ]

---------------------------------------------------------------
[ 2019-03-31T08:36:40+08:00 ] 172.31.69.247 223.104.63.11 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036034s][吞吐率：27.75req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000488s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000865s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000662s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992600 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992600 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992600 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=272) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992600 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000949s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:36:42+08:00 ] 172.31.69.247 223.104.63.11 GET /common/study/typelist?enterprise_id=13
[ log ] api.kzwchina.com/common/study/typelist?enterprise_id=13 [运行时间：0.032481s][吞吐率：30.79req/s] [内存消耗：4,045.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` = 0 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` > 0 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-03-31T08:36:47+08:00 ] 172.31.69.247 223.104.63.11 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045163s][吞吐率：22.14req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000504s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001068s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000691s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000367s ]

---------------------------------------------------------------
[ 2019-03-31T08:36:47+08:00 ] 172.31.69.247 223.104.63.11 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064340s][吞吐率：15.54req/s] [内存消耗：4,464.57kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 272 LIMIT 1 [ RunTime:0.000513s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 272  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 272 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 272 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 272 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 272 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 272 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 272 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000838s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000205s ]

---------------------------------------------------------------
[ 2019-03-31T08:36:59+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031231s][吞吐率：32.02req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:02+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031181s][吞吐率：32.07req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000302s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:09+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031168s][吞吐率：32.08req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:17+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/article/classify?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/classify?OS=iOS&version=1.0.5 [运行时间：0.042492s][吞吐率：23.53req/s] [内存消耗：3,971.13kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001056s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 271 ORDER BY u.weight ASC [ RunTime:0.000574s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000397s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:17+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/paper_list?id=1&type=1&exam=2&OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/study/paper_list?id=1&type=1&exam=2&OS=iOS&version=1.0.5 [运行时间：0.054586s][吞吐率：18.32req/s] [内存消耗：4,051.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '1',
  'type' => '1',
  'exam' => '2',
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->PaperList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000388s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000582s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT `p`.`id`,`p`.`title`,`p`.`photo`,(SELECT COUNT(*) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=271) num,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=271 AND `status`=1) is_paper FROM `tpn_paper` `p` WHERE  `p`.`type` = '1'  AND `p`.`class_id` = '1'  AND `p`.`start_time` <= '2019-03-31 08:37'  AND `p`.`end_time` >= '2019-03-31 08:37' [ RunTime:0.000435s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:17+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.050220s][吞吐率：19.91req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:17+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/article/advertisements?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/advertisements?OS=iOS&version=1.0.5 [运行时间：0.030345s][吞吐率：32.95req/s] [内存消耗：3,917.02kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000183s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:17+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5 [运行时间：0.033146s][吞吐率：30.17req/s] [内存消耗：3,945.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000494s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000297s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000432s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:21+08:00 ] 172.31.69.247 223.104.64.159 POST /discover/article/classify_save
[ log ] api.kzwchina.com/discover/article/classify_save [运行时间：0.032910s][吞吐率：30.39req/s] [内存消耗：3,836.80kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'data' => '',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->ClassifySave[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000602s ]
[ sql ] [ SQL ] DELETE FROM `tpn_classify_user`    WHERE  `uid` = 271 [ RunTime:0.003013s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:21+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/article/classify?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/classify?OS=iOS&version=1.0.5 [运行时间：0.036128s][吞吐率：27.68req/s] [内存消耗：3,971.13kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000484s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001060s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000735s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 271 ORDER BY u.weight ASC [ RunTime:0.000583s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000412s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:21+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.035897s][吞吐率：27.86req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000484s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:22+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/article/advertisements?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/advertisements?OS=iOS&version=1.0.5 [运行时间：0.030714s][吞吐率：32.56req/s] [内存消耗：3,917.02kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000533s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000188s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:22+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5 [运行时间：0.032914s][吞吐率：30.38req/s] [内存消耗：3,945.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000880s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000296s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000420s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:25+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_list?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_list?OS=iOS&page=1&version=1.0.5 [运行时间：0.031122s][吞吐率：32.13req/s] [内存消耗：4,062.91kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000827s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` `n` WHERE  `n`.`uid` = 271 ORDER BY n.created_at desc LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `n`.`id`,`n`.`title`,`n`.`content`,`n`.`reading`,`n`.`type`,`n`.`type_id`,`n`.`created_at`,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_user_collect` WHERE TYPE =4 AND type_id=n.id) is_collect FROM `tpn_user_notice` `n` WHERE  `n`.`uid` = 271 ORDER BY n.created_at desc LIMIT 0,10 [ RunTime:0.000416s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:26+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031219s][吞吐率：32.03req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:42+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031339s][吞吐率：31.91req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000690s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:50+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_list?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_list?OS=iOS&page=1&version=1.0.5 [运行时间：0.032427s][吞吐率：30.84req/s] [内存消耗：4,062.91kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` `n` WHERE  `n`.`uid` = 271 ORDER BY n.created_at desc LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `n`.`id`,`n`.`title`,`n`.`content`,`n`.`reading`,`n`.`type`,`n`.`type_id`,`n`.`created_at`,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_user_collect` WHERE TYPE =4 AND type_id=n.id) is_collect FROM `tpn_user_notice` `n` WHERE  `n`.`uid` = 271 ORDER BY n.created_at desc LIMIT 0,10 [ RunTime:0.000407s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:52+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030481s][吞吐率：32.81req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000900s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000310s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:55+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/quiz_data?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/common/user/quiz_data?OS=iOS&page=1&version=1.0.5 [运行时间：0.032168s][吞吐率：31.09req/s] [内存消耗：4,066.90kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->quizData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000948s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000681s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_quiz` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_quiz` `a` INNER JOIN `tpn_user` `u` ON `a`.`uid`=`u`.`uid` WHERE  `a`.`uid` = 271 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT `a`.*,`u`.`nickname`,`u`.`face` FROM `tpn_user_quiz` `a` INNER JOIN `tpn_user` `u` ON `a`.`uid`=`u`.`uid` WHERE  `a`.`uid` = 271 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-03-31T08:37:56+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030909s][吞吐率：32.35req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000517s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000889s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000758s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000296s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:02+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030361s][吞吐率：32.94req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:03+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030975s][吞吐率：32.28req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000299s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:11+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030553s][吞吐率：32.73req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:14+08:00 ] 172.31.69.247 223.104.63.41 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.115864s][吞吐率：8.63req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '1ec1c8229872cf37618e00f1d137bdc2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000528s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000868s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1ec1c8229872cf37618e00f1d137bdc2' LIMIT 1 [ RunTime:0.000683s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003071s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:14+08:00 ] 172.31.69.247 223.104.63.11 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.037607s][吞吐率：26.59req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '529712a3692b7450cb9b6b33cd0aecb2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000801s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '529712a3692b7450cb9b6b33cd0aecb2' LIMIT 1 [ RunTime:0.000677s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 272  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 272 , '2019-03-31' , 1553992694) [ RunTime:0.004419s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:15+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030954s][吞吐率：32.31req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:16+08:00 ] 172.31.69.247 223.104.63.41 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044511s][吞吐率：22.47req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '1ec1c8229872cf37618e00f1d137bdc2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001010s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1ec1c8229872cf37618e00f1d137bdc2' LIMIT 1 [ RunTime:0.000683s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 268  AND `reading` = 0 LIMIT 1 [ RunTime:0.000353s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:16+08:00 ] 172.31.69.247 223.104.63.41 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.057149s][吞吐率：17.50req/s] [内存消耗：4,390.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '1ec1c8229872cf37618e00f1d137bdc2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001043s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001010s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1ec1c8229872cf37618e00f1d137bdc2' LIMIT 1 [ RunTime:0.000683s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 268  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000429s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000793s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000262s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:17+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030972s][吞吐率：32.29req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:18+08:00 ] 172.31.69.247 223.104.63.41 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036697s][吞吐率：27.25req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '1ec1c8229872cf37618e00f1d137bdc2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1ec1c8229872cf37618e00f1d137bdc2' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992698 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000739s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992698 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992698 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=268) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992698 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001174s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:38:23+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.5 [运行时间：0.031628s][吞吐率：31.62req/s] [内存消耗：3,884.50kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000649s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000382s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:24+08:00 ] 172.31.69.247 223.104.63.41 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045020s][吞吐率：22.21req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '1ec1c8229872cf37618e00f1d137bdc2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000509s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001017s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1ec1c8229872cf37618e00f1d137bdc2' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000391s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:24+08:00 ] 172.31.69.247 223.104.63.41 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065764s][吞吐率：15.21req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '1ec1c8229872cf37618e00f1d137bdc2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000505s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001016s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1ec1c8229872cf37618e00f1d137bdc2' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 268 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 268  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000395s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 268 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 268 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 268 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 268 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 268 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 268 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000937s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000212s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:25+08:00 ] 172.31.69.247 223.104.64.159 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.5 [运行时间：0.031884s][吞吐率：31.36req/s] [内存消耗：3,884.50kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000518s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000834s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000293s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000371s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:33+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031264s][吞吐率：31.99req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000297s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:35+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/class_data?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/common/user/class_data?OS=iOS&page=1&version=1.0.5 [运行时间：0.034150s][吞吐率：29.28req/s] [内存消耗：4,092.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->classData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 271 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `a`.*,`b`.`name`,`b`.`photo`,`b`.`start`,`b`.`end`,`b`.`price`,t.name as teacher_name,(select count(*) from tpn_class_user where `class_id`=a.class_id and `status`=1) apply_num FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 271 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.001186s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:38+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.077033s][吞吐率：12.98req/s] [内存消耗：4,474.01kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000555s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000878s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000710s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 271 LIMIT 1 [ RunTime:0.000492s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000443s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 271 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 271 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 271 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 271 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 271 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 271 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 271 LIMIT 1 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 271 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 271 LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 271 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000936s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000426s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000192s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000189s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000195s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000188s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 183 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000181s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:38+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.103318s][吞吐率：9.68req/s] [内存消耗：4,474.92kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000374s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 271 LIMIT 1 [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000436s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000239s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 271 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 271 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 271 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 271 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 271 LIMIT 1 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 271 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 271 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 271 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000843s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000434s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000186s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000190s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000180s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000196s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:38+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.107325s][吞吐率：9.32req/s] [内存消耗：4,004.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000368s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000719s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:41+08:00 ] 172.31.69.247 223.104.63.41 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.032827s][吞吐率：30.46req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '1ec1c8229872cf37618e00f1d137bdc2',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1ec1c8229872cf37618e00f1d137bdc2' LIMIT 1 [ RunTime:0.000677s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 268  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 268 , '2019-03-31' , 1553992721) [ RunTime:0.002551s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:50+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.067241s][吞吐率：14.87req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000483s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001103s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000761s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000861s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000217s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:50+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.099304s][吞吐率：10.07req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000706s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000461s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000402s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000813s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000438s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:50+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.091013s][吞吐率：10.99req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000377s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-03-31T08:38:57+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/class_data?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/common/user/class_data?OS=iOS&page=1&version=1.0.5 [运行时间：0.034503s][吞吐率：28.98req/s] [内存消耗：4,092.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->classData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 271 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT `a`.*,`b`.`name`,`b`.`photo`,`b`.`start`,`b`.`end`,`b`.`price`,t.name as teacher_name,(select count(*) from tpn_class_user where `class_id`=a.class_id and `status`=1) apply_num FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 271 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.001230s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:00+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/class_data?OS=iOS&page=2&version=1.0.5
[ log ] api.kzwchina.com/common/user/class_data?OS=iOS&page=2&version=1.0.5 [运行时间：0.032775s][吞吐率：30.51req/s] [内存消耗：4,086.66kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '2',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->classData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000925s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 271 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `a`.*,`b`.`name`,`b`.`photo`,`b`.`start`,`b`.`end`,`b`.`price`,t.name as teacher_name,(select count(*) from tpn_class_user where `class_id`=a.class_id and `status`=1) apply_num FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 271 ORDER BY a.id desc LIMIT 10,10 [ RunTime:0.000798s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:01+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.044497s][吞吐率：22.47req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001061s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000369s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:01+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.084844s][吞吐率：11.79req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000455s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000407s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000818s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:01+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.107423s][吞吐率：9.31req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000369s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000717s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000446s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000803s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000438s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000230s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:09+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030490s][吞吐率：32.80req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000661s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:10+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031070s][吞吐率：32.19req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000497s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000865s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:33+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030754s][吞吐率：32.52req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000502s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000868s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:43+08:00 ] 172.31.69.247 223.104.64.134 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.111807s][吞吐率：8.94req/s] [内存消耗：5,159.93kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000813s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000486s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002912s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:44+08:00 ] 172.31.69.247 223.104.64.134 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043857s][吞吐率：22.80req/s] [内存消耗：3,982.46kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000297s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000471s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 70  AND `reading` = 0 LIMIT 1 [ RunTime:0.000327s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:44+08:00 ] 172.31.69.247 223.104.64.134 GET /common/home/index?enterprise_id=23
[ log ] api.kzwchina.com/common/home/index?enterprise_id=23 [运行时间：0.053420s][吞吐率：18.72req/s] [内存消耗：4,254.10kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '23',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001059s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000520s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 23 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 23  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 30 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '23'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 23  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000760s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 23 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:50+08:00 ] 172.31.69.247 223.104.64.134 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043599s][吞吐率：22.94req/s] [内存消耗：3,982.46kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000500s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000438s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 70  AND `reading` = 0 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:50+08:00 ] 172.31.69.247 223.104.64.134 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.046302s][吞吐率：21.60req/s] [内存消耗：3,978.09kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000488s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001034s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 70 ORDER BY u.weight ASC [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN (44,29,37,33,34,35,32,38,42,36,47,45) [ RunTime:0.000411s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:50+08:00 ] 172.31.69.247 223.104.64.134 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030912s][吞吐率：32.35req/s] [内存消耗：3,915.48kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000519s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000196s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:51+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031577s][吞吐率：31.67req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000861s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000338s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:51+08:00 ] 172.31.69.247 223.104.64.134 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032607s][吞吐率：30.67req/s] [内存消耗：3,943.36kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000332s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000431s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000287s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000390s ]

---------------------------------------------------------------
[ 2019-03-31T08:39:54+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/datalist?enterprise_id=23&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=23&page=1 [运行时间：0.034354s][吞吐率：29.11req/s] [内存消耗：4,125.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '23',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000828s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992794 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000422s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992794 ORDER BY id<>0,a.start desc LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992794 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=70) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992794 ORDER BY id<>0,a.start desc LIMIT 0,10 [ RunTime:0.000389s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:39:59+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/datalist?enterprise_id=23&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=23&page=1 [运行时间：0.035358s][吞吐率：28.28req/s] [内存消耗：4,125.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '23',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992799 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992799 ORDER BY id<>0,a.start desc LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992799 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=70) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992799 ORDER BY id<>0,a.start desc LIMIT 0,10 [ RunTime:0.000427s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:40:01+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030553s][吞吐率：32.73req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000806s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:02+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031181s][吞吐率：32.07req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000496s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000710s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000299s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:03+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030494s][吞吐率：32.79req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=0jciadupv97tjog9euvg4sfik4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:08+08:00 ] 172.31.69.247 223.104.64.134 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.044482s][吞吐率：22.48req/s] [内存消耗：3,939.77kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '24',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '30',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000588s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '30' ORDER BY id desc LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='70') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '30' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000465s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:08+08:00 ] 172.31.69.247 223.104.64.134 POST /discover/article/details
[ log ] api.kzwchina.com/discover/article/details [运行时间：0.052922s][吞吐率：18.90req/s] [内存消耗：4,112.86kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '30',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000514s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000430s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 30  AND `status` = 1 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 70  AND `type_id` = 30 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 30 [ RunTime:0.006397s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:08+08:00 ] 172.31.69.247 223.104.64.134 GET /discover/article/details?id=30
[ log ] api.kzwchina.com/discover/article/details?id=30 [运行时间：0.037507s][吞吐率：26.66req/s] [内存消耗：4,009.82kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 9; CLT-AL01 Build/HUAWEICLT-AL01; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/66.0.3359.126 MQQBrowser/6.2 TBS/044506 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.9',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => '30',
)
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 30  AND `status` = 1 LIMIT 1 [ RunTime:0.000424s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000717s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 0  AND `type_id` = 30 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 30 [ RunTime:0.005910s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:11+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/datalist?enterprise_id=23&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=23&page=1 [运行时间：0.034722s][吞吐率：28.80req/s] [内存消耗：4,125.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '49263df9ed3ebffce5acbaf6fea32992',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '23',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000828s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '49263df9ed3ebffce5acbaf6fea32992' LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992811 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000446s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992811 ORDER BY id<>0,a.start desc LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992811 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=70) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '23'  AND `a`.`end` > 1553992811 ORDER BY id<>0,a.start desc LIMIT 0,10 [ RunTime:0.000410s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:40:21+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.112769s][吞吐率：8.87req/s] [内存消耗：5,160.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002973s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:21+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.039088s][吞吐率：25.58req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000394s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000827s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:21+08:00 ] 172.31.69.247 223.104.64.159 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.056827s][吞吐率：17.60req/s] [内存消耗：4,389.92kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000294s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 271  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000428s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000778s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:28+08:00 ] 172.31.69.247 223.104.64.159 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036114s][吞吐率：27.69req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992827 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992827 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992827 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000759s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=271) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992827 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000998s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:40:31+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.044893s][吞吐率：22.28req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001081s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000358s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:31+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066759s][吞吐率：14.98req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000379s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000453s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000392s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000918s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000208s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:31+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.119835s][吞吐率：8.34req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000334s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000442s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000238s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000891s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000213s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:37+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.033267s][吞吐率：30.06req/s] [内存消耗：3,971.67kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000848s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 271 , '2019-03-31' , 1553992837) [ RunTime:0.002281s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:37+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.064863s][吞吐率：15.42req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000404s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001034s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000703s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000998s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:37+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.090049s][吞吐率：11.11req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000664s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000806s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:37+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.081602s][吞吐率：12.25req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000367s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000748s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]

---------------------------------------------------------------
[ 2019-03-31T08:40:47+08:00 ] 172.31.69.247 223.104.64.159 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036554s][吞吐率：27.36req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000662s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992847 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992847 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992847 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000735s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=271) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992847 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001356s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:40:50+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030078s][吞吐率：33.25req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:17+08:00 ] 172.31.69.247 223.104.64.159 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037175s][吞吐率：26.90req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992877 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000881s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992877 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992877 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000767s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=271) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992877 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001255s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:41:21+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031152s][吞吐率：32.10req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000680s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:28+08:00 ] 172.31.69.247 223.104.64.159 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036515s][吞吐率：27.39req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992888 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992888 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992888 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=271) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992888 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001005s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:41:30+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066755s][吞吐率：14.98req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000503s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001056s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000748s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000530s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000914s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:30+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.095905s][吞吐率：10.43req/s] [内存消耗：4,467.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000368s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 271 LIMIT 1 [ RunTime:0.000448s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 271  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000373s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 271 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 271 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 271 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 271 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 271 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 271 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000842s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000433s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 254 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:30+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.117917s][吞吐率：8.48req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000327s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:38+08:00 ] 172.31.69.247 223.104.64.159 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.031716s][吞吐率：31.53req/s] [内存消耗：4,060.08kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000306s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:44+08:00 ] 172.31.69.247 223.104.64.159 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036062s][吞吐率：27.73req/s] [内存消耗：4,129.00kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992904 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992904 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992904 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=271) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992904 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001071s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:41:44+08:00 ] 172.31.69.247 223.104.64.159 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.044172s][吞吐率：22.64req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ldplthksab337akb0bh8thf633',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'df8958fd6339e88d885037fac170a20d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 9.3.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000532s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'df8958fd6339e88d885037fac170a20d' LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 271  AND `reading` = 0 LIMIT 1 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:54+08:00 ] 172.31.69.247 180.130.2.136 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113565s][吞吐率：8.81req/s] [内存消耗：5,160.78kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002949s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:55+08:00 ] 172.31.69.247 180.130.2.136 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.039363s][吞吐率：25.40req/s] [内存消耗：3,983.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=17tlmp4mvjidlolk09s2qc59g6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 276  AND `reading` = 0 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-03-31T08:41:55+08:00 ] 172.31.69.247 180.130.2.136 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.061857s][吞吐率：16.17req/s] [内存消耗：4,390.10kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=17tlmp4mvjidlolk09s2qc59g6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 276  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000453s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000789s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:06+08:00 ] 172.31.69.247 117.136.40.176 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.113017s][吞吐率：8.85req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000468s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000918s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002944s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:07+08:00 ] 172.31.69.247 117.136.40.176 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.042439s][吞吐率：23.56req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000798s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 264  AND `reading` = 0 LIMIT 1 [ RunTime:0.000321s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:07+08:00 ] 172.31.69.247 117.136.40.176 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.055169s][吞吐率：18.13req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001011s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000683s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 264  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000442s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000754s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000435s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:09+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035821s][吞吐率：27.92req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000672s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992929 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992929 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992929 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=264) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992929 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001027s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:42:12+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.043875s][吞吐率：22.79req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001051s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000728s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000347s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:12+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064094s][吞吐率：15.60req/s] [内存消耗：4,464.57kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 264 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 264  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000381s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 264 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 264 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 264 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 264 LIMIT 1 [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 264 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 264 LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000911s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000242s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:12+08:00 ] 172.31.69.247 223.104.64.133 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.114155s][吞吐率：8.76req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002978s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:13+08:00 ] 172.31.69.247 223.104.64.133 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.049415s][吞吐率：20.24req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000855s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 265  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000770s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000421s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:13+08:00 ] 172.31.69.247 223.104.64.133 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.063337s][吞吐率：15.79req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000294s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000530s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 265  AND `reading` = 0 LIMIT 1 [ RunTime:0.000254s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:16+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.047349s][吞吐率：21.12req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000514s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001017s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 264  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 264 , '2019-03-31' , 1553992936) [ RunTime:0.003021s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:16+08:00 ] 172.31.69.247 117.136.40.176 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.049450s][吞吐率：20.22req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '76c4335080d4620444d7dc7847ea3956',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000508s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001017s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '76c4335080d4620444d7dc7847ea3956' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 264  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 264 , '2019-03-31' , 1553992936) [ RunTime:0.004783s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:17+08:00 ] 172.31.69.247 223.104.63.183 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.110708s][吞吐率：9.03req/s] [内存消耗：5,161.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002969s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:17+08:00 ] 172.31.69.247 223.104.63.183 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.049778s][吞吐率：20.09req/s] [内存消耗：4,390.19kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 252  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000415s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000759s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000431s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:17+08:00 ] 172.31.69.247 223.104.63.183 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.063750s][吞吐率：15.69req/s] [内存消耗：3,982.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000564s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 252  AND `reading` = 0 LIMIT 1 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:18+08:00 ] 172.31.69.247 223.104.64.133 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036006s][吞吐率：27.77req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000813s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992938 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000799s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992938 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992938 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=265) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992938 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001318s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:42:19+08:00 ] 172.31.69.247 223.104.63.183 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036079s][吞吐率：27.72req/s] [内存消耗：4,129.04kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992939 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000732s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992939 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992939 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=252) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992939 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001013s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:42:20+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066290s][吞吐率：15.09req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001056s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 265 LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 265 LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 265 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 265 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 265 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 265 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 265 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000795s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000199s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:20+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.098167s][吞吐率：10.19req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000342s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 265 LIMIT 1 [ RunTime:0.000442s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000435s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000237s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000383s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 265 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 265 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 265 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 265 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 265 LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 265 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000828s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 254 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:20+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.116704s][吞吐率：8.57req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000341s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000702s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:22+08:00 ] 172.31.69.247 180.130.2.136 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116650s][吞吐率：8.57req/s] [内存消耗：5,160.78kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000899s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002924s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:22+08:00 ] 172.31.69.247 180.130.2.136 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.038210s][吞吐率：26.17req/s] [内存消耗：3,983.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=2tmafp8obdlpofm9mr77pg8653',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001071s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000742s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 276  AND `reading` = 0 LIMIT 1 [ RunTime:0.000330s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:22+08:00 ] 172.31.69.247 180.130.2.136 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051587s][吞吐率：19.38req/s] [内存消耗：4,390.10kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=2tmafp8obdlpofm9mr77pg8653',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 276  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000445s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000768s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000256s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:22+08:00 ] 172.31.69.247 117.136.39.80 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113105s][吞吐率：8.84req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002949s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:23+08:00 ] 172.31.69.247 117.136.39.80 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.052277s][吞吐率：19.13req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000694s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 255  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000480s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000792s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000273s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:23+08:00 ] 172.31.69.247 117.136.39.80 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.067534s][吞吐率：14.81req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000397s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 255  AND `reading` = 0 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:27+08:00 ] 172.31.69.247 117.136.39.80 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035469s][吞吐率：28.19req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992947 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992947 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992947 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=255) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992947 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001022s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:42:28+08:00 ] 172.31.69.247 223.104.63.183 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.063080s][吞吐率：15.85req/s] [内存消耗：4,464.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000872s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000585s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 252 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 252  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000407s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 252 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 252 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 252 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 252 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 252 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 252 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000800s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000432s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:28+08:00 ] 172.31.69.247 223.104.63.183 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.077413s][吞吐率：12.92req/s] [内存消耗：3,989.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000575s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:28+08:00 ] 172.31.69.247 223.104.63.183 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.123805s][吞吐率：8.08req/s] [内存消耗：4,464.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 252 LIMIT 1 [ RunTime:0.000474s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 252  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000237s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000444s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 252 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 252 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 252 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 252 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 252 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 252 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000790s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000433s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000199s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:29+08:00 ] 172.31.69.247 117.136.39.80 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.062092s][吞吐率：16.11req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 255 LIMIT 1 [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 255  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000383s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 255 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 255 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 255 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 255 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 255 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 255 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000923s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000216s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:29+08:00 ] 172.31.69.247 117.136.39.80 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.076725s][吞吐率：13.03req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:29+08:00 ] 172.31.69.247 117.136.39.80 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.123582s][吞吐率：8.09req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000314s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 255 LIMIT 1 [ RunTime:0.000463s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 255  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000373s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 255 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 255 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 255 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 255 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 255 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 255 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000920s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:32+08:00 ] 172.31.69.247 117.136.39.80 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.033142s][吞吐率：30.17req/s] [内存消耗：3,971.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 255  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 255 , '2019-03-31' , 1553992952) [ RunTime:0.002140s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:32+08:00 ] 172.31.69.247 117.136.39.80 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065940s][吞吐率：15.17req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000500s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001069s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 255 LIMIT 1 [ RunTime:0.000537s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 255  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000390s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 255 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 255 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 255 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 255 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 255 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 255 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000900s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:32+08:00 ] 172.31.69.247 117.136.39.80 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.105520s][吞吐率：9.48req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 255 LIMIT 1 [ RunTime:0.000458s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000443s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 255  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000395s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 255 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 255 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 255 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 255 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 255 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 255 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000864s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:32+08:00 ] 172.31.69.247 117.136.39.80 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.108196s][吞吐率：9.24req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000564s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:36+08:00 ] 172.31.69.247 117.136.39.80 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036044s][吞吐率：27.74req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992956 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000777s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992956 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992956 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000743s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=255) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992956 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001305s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.040472s][吞吐率：24.71req/s] [内存消耗：3,971.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001041s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 265 , '2019-03-31' , 1553992957) [ RunTime:0.002546s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.044587s][吞吐率：22.43req/s] [内存消耗：3,973.42kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000743s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 117.136.39.80 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.070080s][吞吐率：14.27req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ut0isg5fv8u5a3lv90k9br7ok3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f5a1ef4a995d39d5fd4066aadd7038db',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000387s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f5a1ef4a995d39d5fd4066aadd7038db' LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 255  AND `reading` = 0 LIMIT 1 [ RunTime:0.000306s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.126719s][吞吐率：7.89req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001080s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000712s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 265 LIMIT 1 [ RunTime:0.000535s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.007901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 265 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 265 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 265 LIMIT 1 [ RunTime:0.045893s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 265 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 265 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 265 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.006932s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000205s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.064933s][吞吐率：15.40req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000322s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.176762s][吞吐率：5.66req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000313s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000558s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 265 LIMIT 1 [ RunTime:0.000467s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000376s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 265 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 265 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 265 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 265 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 265 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 265 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000869s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 254 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.180741s][吞吐率：5.53req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000265s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.167203s][吞吐率：5.98req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000332s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 265 LIMIT 1 [ RunTime:0.000464s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 265 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 265 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 265 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 265 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 265 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 265 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000898s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000205s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:37+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.187400s][吞吐率：5.34req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 265 LIMIT 1 [ RunTime:0.000461s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 265  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000368s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 265 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 265 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 265 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 265 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 265 LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 265 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000845s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000212s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:42+08:00 ] 172.31.69.247 223.104.63.183 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.033249s][吞吐率：30.08req/s] [内存消耗：3,971.73kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 252  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 252 , '2019-03-31' , 1553992962) [ RunTime:0.002067s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:42+08:00 ] 172.31.69.247 223.104.63.183 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.063447s][吞吐率：15.76req/s] [内存消耗：4,465.95kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 252 LIMIT 1 [ RunTime:0.000471s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 252  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000394s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 252 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 252 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 252 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 252 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 252 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 252 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000819s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.012196s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:42+08:00 ] 172.31.69.247 223.104.63.183 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.039801s][吞吐率：25.12req/s] [内存消耗：3,989.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:42+08:00 ] 172.31.69.247 223.104.63.183 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.074973s][吞吐率：13.34req/s] [内存消耗：4,465.95kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000297s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000558s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 252 LIMIT 1 [ RunTime:0.000448s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 252  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000377s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 252 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 252 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 252 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 252 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 252 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 252 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000913s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:53+08:00 ] 172.31.69.247 223.104.64.133 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040360s][吞吐率：24.78req/s] [内存消耗：4,108.61kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000591s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 311 [ RunTime:0.002856s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 311 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 265  AND `type` = 3  AND `type_id` = 311 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (265 , 3 , 311 , 1553992973) [ RunTime:0.002605s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:55+08:00 ] 172.31.69.247 223.104.64.133 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039002s][吞吐率：25.64req/s] [内存消耗：3,939.98kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000807s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='265') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000409s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:55+08:00 ] 172.31.69.247 223.104.64.133 GET /common/user/aftertime?OS=iOS&cid=311&type=1&uid=265&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=311&type=1&uid=265&version=1.0.5 [运行时间：0.053459s][吞吐率：18.71req/s] [内存消耗：3,986.57kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '311',
  'type' => '1',
  'uid' => '265',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000305s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 265  AND `classcourse_id` = 311  AND `type` = 1 LIMIT 1 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-03-31T08:42:59+08:00 ] 172.31.69.247 223.104.63.183 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035921s][吞吐率：27.84req/s] [内存消耗：4,129.04kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992979 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000749s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992979 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992979 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=252) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553992979 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001013s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:43:00+08:00 ] 172.31.69.247 223.104.63.183 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030829s][吞吐率：32.44req/s] [内存消耗：3,982.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1blfcuqof13b27uajn96pvalr5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd27f7e5f23d0af54cc4dad3e099852cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000499s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd27f7e5f23d0af54cc4dad3e099852cd' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 252  AND `reading` = 0 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-03-31T08:43:19+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.031882s][吞吐率：31.37req/s] [内存消耗：4,060.41kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000488s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000912s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000696s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000343s ]

---------------------------------------------------------------
[ 2019-03-31T08:43:25+08:00 ] 172.31.69.247 223.104.64.133 GET /common/study/notice_details?OS=iOS&id=58&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_details?OS=iOS&id=58&version=1.0.5 [运行时间：0.032961s][吞吐率：30.34req/s] [内存消耗：4,066.73kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '58',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 58 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000350s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:22+08:00 ] 172.31.69.247 180.130.2.136 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113360s][吞吐率：8.82req/s] [内存消耗：5,160.78kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002973s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:23+08:00 ] 172.31.69.247 180.130.2.136 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.039605s][吞吐率：25.25req/s] [内存消耗：3,983.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000778s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 276  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:23+08:00 ] 172.31.69.247 180.130.2.136 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.057460s][吞吐率：17.40req/s] [内存消耗：4,390.10kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000337s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000702s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 276  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000455s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000787s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:24+08:00 ] 172.31.69.247 180.130.2.136 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036519s][吞吐率：27.38req/s] [内存消耗：4,128.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000691s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993064 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993064 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993064 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000743s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=276) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993064 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001102s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:44:25+08:00 ] 172.31.69.247 223.104.64.133 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035897s][吞吐率：27.86req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000827s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993065 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000777s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993065 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993065 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=265) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993065 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001109s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:44:28+08:00 ] 172.31.69.247 223.104.64.133 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030699s][吞吐率：32.57req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=enqi8roo7oa3m34jl375uhvoh7',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '6e945240358ff30a81e4ca0f5ab67ced',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '6e945240358ff30a81e4ca0f5ab67ced' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 265  AND `reading` = 0 LIMIT 1 [ RunTime:0.000302s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:47+08:00 ] 172.31.69.247 180.130.2.136 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035523s][吞吐率：28.15req/s] [内存消耗：4,128.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000644s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993087 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000751s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993087 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993087 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=276) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993087 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001163s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:44:57+08:00 ] 172.31.69.247 117.136.40.192 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.114229s][吞吐率：8.75req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000468s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002936s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:58+08:00 ] 172.31.69.247 117.136.40.192 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.048135s][吞吐率：20.77req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001044s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000717s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 260  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000417s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000733s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000829s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000348s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:58+08:00 ] 172.31.69.247 117.136.40.192 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.039686s][吞吐率：25.20req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000539s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 260  AND `reading` = 0 LIMIT 1 [ RunTime:0.000266s ]

---------------------------------------------------------------
[ 2019-03-31T08:44:59+08:00 ] 172.31.69.247 223.104.63.175 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.114193s][吞吐率：8.76req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002953s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:00+08:00 ] 172.31.69.247 223.104.63.175 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044079s][吞吐率：22.69req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000343s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 251  AND `reading` = 0 LIMIT 1 [ RunTime:0.000345s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:00+08:00 ] 172.31.69.247 223.104.63.175 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.056954s][吞吐率：17.56req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000577s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001026s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000384s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 251  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000459s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000664s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000765s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:02+08:00 ] 172.31.69.247 117.136.40.192 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036349s][吞吐率：27.51req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000803s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000630s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993102 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993102 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993102 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=260) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993102 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001181s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:45:05+08:00 ] 172.31.69.247 117.136.40.192 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044314s][吞吐率：22.57req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000507s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001068s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000701s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000374s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:05+08:00 ] 172.31.69.247 117.136.40.192 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064882s][吞吐率：15.41req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000501s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001068s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000701s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 260 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 260  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000402s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 260 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 260 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 260 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 260 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 260 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 260 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000893s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000215s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:12+08:00 ] 172.31.69.247 117.136.40.192 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.047235s][吞吐率：21.17req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000497s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001025s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 260  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 260 , '2019-03-31' , 1553993112) [ RunTime:0.002531s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:12+08:00 ] 172.31.69.247 117.136.40.192 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.049567s][吞吐率：20.17req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e4eae74cd0680c98d98817887672d794',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000491s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001026s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e4eae74cd0680c98d98817887672d794' LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 260  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 260 , '2019-03-31' , 1553993112) [ RunTime:0.004165s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:14+08:00 ] 172.31.69.247 223.104.63.175 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036429s][吞吐率：27.45req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993114 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000721s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993114 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993114 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=251) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993114 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001161s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:45:16+08:00 ] 172.31.69.247 223.104.63.175 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.055204s][吞吐率：18.11req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 251 LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 251 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 251 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 251 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 251 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 251 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 251 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001019s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000255s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:16+08:00 ] 172.31.69.247 223.104.63.175 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.039821s][吞吐率：25.11req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000370s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000729s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:21+08:00 ] 172.31.69.247 223.104.63.175 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.049010s][吞吐率：20.40req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001016s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 251 , '2019-03-31' , 1553993121) [ RunTime:0.004794s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:21+08:00 ] 172.31.69.247 223.104.63.175 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.051758s][吞吐率：19.32req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '0e5df9eae17d0e1923411103800b88b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001016s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '0e5df9eae17d0e1923411103800b88b5' LIMIT 1 [ RunTime:0.000670s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 251  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 251 , '2019-03-31' , 1553993121) [ RunTime:0.007647s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:21+08:00 ] 172.31.69.247 117.136.79.166 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.111429s][吞吐率：8.97req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000363s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000812s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002960s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:22+08:00 ] 172.31.69.247 117.136.79.166 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.039756s][吞吐率：25.15req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000929s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000657s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 259  AND `reading` = 0 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:22+08:00 ] 172.31.69.247 117.136.79.166 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.060833s][吞吐率：16.44req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 259  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000451s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000775s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000273s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:24+08:00 ] 172.31.69.247 223.104.63.31 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.114720s][吞吐率：8.72req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002995s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:24+08:00 ] 172.31.69.247 223.104.63.31 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.043704s][吞吐率：22.88req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 253  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000522s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000391s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.001154s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000338s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:24+08:00 ] 172.31.69.247 223.104.63.31 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.033602s][吞吐率：29.76req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 253  AND `reading` = 0 LIMIT 1 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:25+08:00 ] 172.31.69.247 117.136.79.166 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037477s][吞吐率：26.68req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000735s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993125 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993125 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993125 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000732s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=259) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993125 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001348s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:45:27+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/typelist?OS=iOS&enterprise_id=13&version=1.0.5
[ log ] api.kzwchina.com/common/study/typelist?OS=iOS&enterprise_id=13&version=1.0.5 [运行时间：0.031957s][吞吐率：31.29req/s] [内存消耗：4,047.21kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` = 0 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` > 0 [ RunTime:0.000251s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:29+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.115143s][吞吐率：8.68req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002966s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:30+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043663s][吞吐率：22.90req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000840s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 254  AND `reading` = 0 LIMIT 1 [ RunTime:0.000320s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:30+08:00 ] 172.31.69.247 210.21.235.90 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.055914s][吞吐率：17.88req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001070s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000676s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 254  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000429s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000770s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:33+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044954s][吞吐率：22.24req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000994s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:33+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064665s][吞吐率：15.46req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000994s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 261 LIMIT 1 [ RunTime:0.000495s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 261 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 261 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 261 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 261 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 261 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 261 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000889s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:34+08:00 ] 172.31.69.247 223.104.63.31 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.120919s][吞吐率：8.27req/s] [内存消耗：5,160.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000821s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002965s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:34+08:00 ] 172.31.69.247 223.104.63.31 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.136306s][吞吐率：7.34req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000385s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000768s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 253  AND `reading` = 0 LIMIT 1 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:34+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065850s][吞吐率：15.19req/s] [内存消耗：4,465.70kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001077s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000725s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 259 LIMIT 1 [ RunTime:0.000537s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 259  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 259 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 259 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 259 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 259 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 259 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 259 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000918s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000213s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:34+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.061347s][吞吐率：16.30req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000398s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:34+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.117584s][吞吐率：8.50req/s] [内存消耗：4,465.70kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000536s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 259 LIMIT 1 [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000436s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 259  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 259 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 259 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 259 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 259 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 259 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 259 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000815s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000443s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:36+08:00 ] 172.31.69.247 223.104.63.31 GET /common/user/class_data?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/common/user/class_data?OS=iOS&page=1&version=1.0.5 [运行时间：0.033070s][吞吐率：30.24req/s] [内存消耗：4,089.22kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->classData[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 253 ORDER BY a.id desc LIMIT 1 [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT `a`.*,`b`.`name`,`b`.`photo`,`b`.`start`,`b`.`end`,`b`.`price`,t.name as teacher_name,(select count(*) from tpn_class_user where `class_id`=a.class_id and `status`=1) apply_num FROM `tpn_class_user` `a` INNER JOIN `tpn_class` `b` ON `a`.`class_id`=`b`.`id` INNER JOIN `tpn_teacher` `t` ON `t`.`id`=`b`.`teacher_id` WHERE  `a`.`delete` = 1  AND `a`.`uid` = 253 ORDER BY a.id desc LIMIT 0,10 [ RunTime:0.000904s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:37+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036020s][吞吐率：27.76req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993137 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993137 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993137 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=254) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993137 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000996s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:45:38+08:00 ] 172.31.69.247 223.104.63.31 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065490s][吞吐率：15.27req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001053s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 253 LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 253  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000407s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 253 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 253 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 253 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 253 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 253 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 253 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000805s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000436s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:38+08:00 ] 172.31.69.247 223.104.63.31 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.104625s][吞吐率：9.56req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000340s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000535s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 253 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 253  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000381s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 253 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 253 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 253 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 253 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 253 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 253 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000820s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:38+08:00 ] 172.31.69.247 223.104.63.31 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.101224s][吞吐率：9.88req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000327s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000568s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:40+08:00 ] 172.31.69.247 117.136.39.95 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.112906s][吞吐率：8.86req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000596s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002966s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:41+08:00 ] 172.31.69.247 117.136.39.95 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.039142s][吞吐率：25.55req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001065s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000709s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 258  AND `reading` = 0 LIMIT 1 [ RunTime:0.000354s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:41+08:00 ] 172.31.69.247 117.136.39.95 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.051802s][吞吐率：19.30req/s] [内存消耗：4,390.05kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000586s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 258  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000436s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000783s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:43+08:00 ] 172.31.69.247 117.136.39.95 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036058s][吞吐率：27.73req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000833s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993143 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000729s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993143 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993143 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=258) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993143 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001015s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:45:44+08:00 ] 172.31.69.247 223.104.63.31 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.033757s][吞吐率：29.62req/s] [内存消耗：3,971.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000806s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 253  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 253 , '2019-03-31' , 1553993144) [ RunTime:0.002954s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:44+08:00 ] 172.31.69.247 223.104.63.31 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.068100s][吞吐率：14.68req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000517s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001107s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000714s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 253 LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 253  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 253 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 253 LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 253 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 253 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 253 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 253 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000812s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000439s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:44+08:00 ] 172.31.69.247 223.104.63.31 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.103224s][吞吐率：9.69req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 253 LIMIT 1 [ RunTime:0.000466s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000436s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 253  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000445s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 253 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 253 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 253 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 253 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 253 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 253 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000807s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000432s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000197s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:44+08:00 ] 172.31.69.247 223.104.63.31 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.107931s][吞吐率：9.27req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000777s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:49+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065740s][吞吐率：15.21req/s] [内存消耗：4,464.93kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001043s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 276 LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 276 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 276 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 276 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 276 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 276 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 276 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000872s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:49+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.101351s][吞吐率：9.87req/s] [内存消耗：4,464.93kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000381s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 276 LIMIT 1 [ RunTime:0.000476s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000442s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000383s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 276 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 276 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 276 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 276 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 276 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 276 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000925s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000443s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:49+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.112856s][吞吐率：8.86req/s] [内存消耗：3,989.24kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:52+08:00 ] 172.31.69.247 223.104.63.31 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.029610s][吞吐率：33.77req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q5o8vnu978k82bp9nma09c2527',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '22422c80fe37ed791680ad159c6e6127',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000799s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '22422c80fe37ed791680ad159c6e6127' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 253  AND `reading` = 0 LIMIT 1 [ RunTime:0.000299s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:53+08:00 ] 172.31.69.247 117.136.39.95 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044782s][吞吐率：22.33req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001013s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000679s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000712s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:53+08:00 ] 172.31.69.247 117.136.39.95 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065597s][吞吐率：15.24req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001013s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000679s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 258 LIMIT 1 [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 258  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000392s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 258 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 258 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 258 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 258 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 258 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 258 LIMIT 1 [ RunTime:0.000230s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000952s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:58+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.043845s][吞吐率：22.81req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000330s ]

---------------------------------------------------------------
[ 2019-03-31T08:45:58+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064965s][吞吐率：15.39req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001066s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 254 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 254  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000407s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 254 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 254 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 254 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 254 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 254 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 254 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000841s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000434s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000214s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:08+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.046455s][吞吐率：21.53req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000556s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001067s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000708s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 261 , '2019-03-31' , 1553993168) [ RunTime:0.002690s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:08+08:00 ] 172.31.69.247 117.136.40.226 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.048226s][吞吐率：20.74req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7d1d254eae0ce0ee5d1fe42d80048b1c',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7d1d254eae0ce0ee5d1fe42d80048b1c' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 261  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 261 , '2019-03-31' , 1553993168) [ RunTime:0.004378s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:10+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.032892s][吞吐率：30.40req/s] [内存消耗：3,971.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 259  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 259 , '2019-03-31' , 1553993170) [ RunTime:0.002233s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:10+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066952s][吞吐率：14.94req/s] [内存消耗：4,466.75kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000489s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001057s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000684s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 259 LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 259  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 259 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 259 LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 259 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 259 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 259 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 259 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000831s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000214s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:10+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.070962s][吞吐率：14.09req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000383s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000319s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:10+08:00 ] 172.31.69.247 117.136.79.166 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.117594s][吞吐率：8.50req/s] [内存消耗：4,466.75kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000391s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 259 LIMIT 1 [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 259  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000383s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 259 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 259 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 259 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 259 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 259 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 259 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000875s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:16+08:00 ] 172.31.69.247 117.136.39.95 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.046516s][吞吐率：21.50req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000489s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001002s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 258  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 258 , '2019-03-31' , 1553993176) [ RunTime:0.003019s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:16+08:00 ] 172.31.69.247 117.136.39.95 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.048627s][吞吐率：20.56req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '54e4bf9368ba858cece5e53c4a198834',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000495s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001002s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '54e4bf9368ba858cece5e53c4a198834' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 258  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 258 , '2019-03-31' , 1553993176) [ RunTime:0.004876s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:16+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.041182s][吞吐率：24.28req/s] [内存消耗：3,971.68kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000880s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000692s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 276 , '2019-03-31' , 1553993176) [ RunTime:0.002386s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:16+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.055177s][吞吐率：18.12req/s] [内存消耗：3,973.20kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:17+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.110886s][吞吐率：9.02req/s] [内存消耗：4,465.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001054s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.029124s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 276 LIMIT 1 [ RunTime:0.000479s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 276 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 276 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 276 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 276 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 276 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 276 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000799s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:17+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.093470s][吞吐率：10.70req/s] [内存消耗：3,989.24kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000263s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:17+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.074723s][吞吐率：13.38req/s] [内存消耗：3,989.24kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000313s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000263s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:17+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.161117s][吞吐率：6.21req/s] [内存消耗：4,465.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000337s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 276 LIMIT 1 [ RunTime:0.000463s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 276 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 276 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 276 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 276 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 276 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 276 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000912s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000206s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:17+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.169937s][吞吐率：5.88req/s] [内存消耗：4,465.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000322s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 276 LIMIT 1 [ RunTime:0.000457s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000380s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 276 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 276 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 276 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 276 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 276 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 276 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000847s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000214s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:17+08:00 ] 172.31.69.247 180.130.2.136 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.185531s][吞吐率：5.39req/s] [内存消耗：4,465.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000320s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 276 LIMIT 1 [ RunTime:0.000465s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 276  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000373s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 276 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 276 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 276 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 276 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 276 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 276 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000858s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:21+08:00 ] 172.31.69.247 183.42.11.226 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.112115s][吞吐率：8.92req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002952s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:22+08:00 ] 172.31.69.247 183.42.11.226 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.042474s][吞吐率：23.54req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000310s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000747s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000583s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 278  AND `reading` = 0 LIMIT 1 [ RunTime:0.000332s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:22+08:00 ] 172.31.69.247 183.42.11.226 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.054849s][吞吐率：18.23req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000468s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001007s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000373s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 278  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000442s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000755s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000428s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:24+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036946s][吞吐率：27.07req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000808s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993184 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993184 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993184 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=254) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993184 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001299s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:46:25+08:00 ] 172.31.69.247 183.42.11.226 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036842s][吞吐率：27.14req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993185 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000763s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993185 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993185 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=278) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993185 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001316s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:46:26+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044339s][吞吐率：22.55req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000986s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000662s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:26+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065290s][吞吐率：15.32req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000986s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 254 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 254  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 254 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 254 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 254 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 254 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 254 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 254 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000871s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 254 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000205s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:28+08:00 ] 172.31.69.247 180.130.2.136 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035876s][吞吐率：27.87req/s] [内存消耗：4,128.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000802s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993188 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993188 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993188 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=276) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993188 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001318s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:46:28+08:00 ] 172.31.69.247 210.21.235.90 GET /common/study/notice_list?id=130
[ log ] api.kzwchina.com/common/study/notice_list?id=130 [运行时间：0.031220s][吞吐率：32.03req/s] [内存消耗：4,058.61kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:29+08:00 ] 172.31.69.247 180.130.2.136 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030039s][吞吐率：33.29req/s] [内存消耗：3,983.16kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=q7pk5ps0tc5cvubc6f27t372b4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c82061ba8b32129a3d6b600a97ee25b4',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-HK;q=1, zh-Hant-HK;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c82061ba8b32129a3d6b600a97ee25b4' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 276  AND `reading` = 0 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:29+08:00 ] 172.31.69.247 183.42.11.226 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044046s][吞吐率：22.70req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001048s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000763s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000790s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:29+08:00 ] 172.31.69.247 183.42.11.226 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064589s][吞吐率：15.48req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000834s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 278 LIMIT 1 [ RunTime:0.000439s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 278  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 278 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 278 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 278 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 278 LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 278 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 278 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000814s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:41+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043879s][吞吐率：22.79req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000285s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000584s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 254  AND `reading` = 0 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:41+08:00 ] 172.31.69.247 210.21.235.90 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.045823s][吞吐率：21.82req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000493s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001049s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000648s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 254 ORDER BY u.weight ASC [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000379s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:41+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030383s][吞吐率：32.91req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000807s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000206s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:41+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032694s][吞吐率：30.59req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000276s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000404s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:42+08:00 ] 172.31.69.247 183.42.11.226 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.047793s][吞吐率：20.92req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001005s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000699s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 278  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 278 , '2019-03-31' , 1553993202) [ RunTime:0.003722s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:42+08:00 ] 172.31.69.247 183.42.11.226 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.054734s][吞吐率：18.27req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '8b9e84cad07c6d63a76caeadb4d964c3',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001005s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '8b9e84cad07c6d63a76caeadb4d964c3' LIMIT 1 [ RunTime:0.000699s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 278  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 278 , '2019-03-31' , 1553993202) [ RunTime:0.010668s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:42+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.037506s][吞吐率：26.66req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000373s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000965s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000691s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000346s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:42+08:00 ] 172.31.69.247 210.21.235.90 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.037063s][吞吐率：26.98req/s] [内存消耗：3,881.80kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000356s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000710s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000307s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000365s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:42+08:00 ] 172.31.69.247 117.136.40.229 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113440s][吞吐率：8.82req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000910s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002942s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:43+08:00 ] 172.31.69.247 117.136.40.229 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050795s][吞吐率：19.69req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000827s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000600s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 256  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000770s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000267s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:43+08:00 ] 172.31.69.247 117.136.40.229 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065748s][吞吐率：15.21req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000584s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 256  AND `reading` = 0 LIMIT 1 [ RunTime:0.000265s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:44+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044004s][吞吐率：22.73req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000982s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000659s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 254  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:44+08:00 ] 172.31.69.247 210.21.235.90 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.126688s][吞吐率：7.89req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000472s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000982s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000660s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.004376s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:45+08:00 ] 172.31.69.247 210.21.235.90 POST /common/user/user_record
[ log ] api.kzwchina.com/common/user/user_record [运行时间：0.036834s][吞吐率：27.15req/s] [内存消耗：4,252.62kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '9',
)
[ info ] [ PARAM ] array (
  'year' => '2019',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->userRecord[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper_user` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`paper_id`,`a`.`uid`,`a`.`score`,`a`.`status`,`a`.`created_at`,`b`.`type`,`b`.`title`,`b`.`photo` FROM `tpn_paper_user` `a` INNER JOIN `tpn_paper` `b` ON `a`.`paper_id`=`b`.`id` WHERE  `a`.`uid` = 254  AND ( `a`.`created_at` > 1546272000 and `a`.`created_at` < 1577808000 ) ORDER BY a.id desc LIMIT 0,3 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `phone` = '13529667056' LIMIT 0,3 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher_article` WHERE  `class_id` > 0  AND `phone` = '13529667056' LIMIT 0,3 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_share` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_share` WHERE  `uid` = 254  AND `type` IN (1,2,3,4)  AND ( `created_at` > 1546272000 and `created_at` < 1577808000 ) ORDER BY id desc LIMIT 0,3 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`b`.`class_id`,`c`.`name`,FORMAT(avg(`score`),2) AS `avg_score` FROM `tpn_paper_user` `a` INNER JOIN `tpn_paper` `b` ON `a`.`paper_id`=`b`.`id` INNER JOIN `tpn_class` `c` ON `b`.`class_id`=`c`.`id` WHERE  `a`.`uid` = 254  AND ( `a`.`created_at` > 1546272000 and `a`.`created_at` < 1577808000 ) GROUP BY b.class_id LIMIT 0,3 [ RunTime:0.000382s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:47+08:00 ] 172.31.69.247 117.136.40.229 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.5 [运行时间：0.038017s][吞吐率：26.30req/s] [内存消耗：3,884.65kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000444s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000788s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000274s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:47+08:00 ] 172.31.69.247 117.136.40.229 GET /discover/introduce/banner?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/banner?OS=iOS&version=1.0.5 [运行时间：0.053026s][吞吐率：18.86req/s] [内存消耗：3,895.31kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000267s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000536s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:54+08:00 ] 172.31.69.247 117.136.40.229 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.043534s][吞吐率：22.97req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001062s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000712s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 256  AND `reading` = 0 LIMIT 1 [ RunTime:0.000337s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:54+08:00 ] 172.31.69.247 117.136.40.229 GET /discover/article/classify?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/classify?OS=iOS&version=1.0.5 [运行时间：0.062074s][吞吐率：16.11req/s] [内存消耗：3,970.72kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000576s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 256 ORDER BY u.weight ASC [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000331s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:54+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/paper_list?id=1&type=1&exam=2&OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/study/paper_list?id=1&type=1&exam=2&OS=iOS&version=1.0.5 [运行时间：0.064771s][吞吐率：15.44req/s] [内存消耗：4,051.82kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '1',
  'type' => '1',
  'exam' => '2',
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->PaperList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000707s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `p`.`id`,`p`.`title`,`p`.`photo`,(SELECT COUNT(*) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=256) num,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=256 AND `status`=1) is_paper FROM `tpn_paper` `p` WHERE  `p`.`type` = '1'  AND `p`.`class_id` = '1'  AND `p`.`start_time` <= '2019-03-31 08:46'  AND `p`.`end_time` >= '2019-03-31 08:46' [ RunTime:0.000354s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:54+08:00 ] 172.31.69.247 117.136.40.229 GET /discover/article/advertisements?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/article/advertisements?OS=iOS&version=1.0.5 [运行时间：0.030477s][吞吐率：32.81req/s] [内存消耗：3,917.59kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000801s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:55+08:00 ] 172.31.69.247 117.136.40.229 GET /discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=1&version=1.0.5 [运行时间：0.032433s][吞吐率：30.83req/s] [内存消耗：3,945.02kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000293s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000388s ]

---------------------------------------------------------------
[ 2019-03-31T08:46:56+08:00 ] 172.31.69.247 117.136.40.229 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030636s][吞吐率：32.64req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 256  AND `reading` = 0 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:01+08:00 ] 172.31.69.247 117.136.79.166 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036166s][吞吐率：27.65req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000808s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993221 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993221 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993221 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=259) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993221 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001387s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:47:03+08:00 ] 172.31.69.247 117.136.79.166 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030478s][吞吐率：32.81req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=fjb8jcbur0ln5ddpsjc59vveq4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f849cf85f8d897fcf2dba8e354bc7aca',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000801s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f849cf85f8d897fcf2dba8e354bc7aca' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 259  AND `reading` = 0 LIMIT 1 [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:23+08:00 ] 172.31.69.247 117.136.40.229 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035770s][吞吐率：27.96req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993243 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000735s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993243 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993243 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=256) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993243 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001011s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:47:39+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/study_details?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=43&version=1.0.5 [运行时间：0.035353s][吞吐率：28.29req/s] [内存消耗：4,150.40kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5tumk57ms76jvli6rhju2cbf31',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 256 LIMIT 1 [ RunTime:0.000460s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000340s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:45+08:00 ] 172.31.69.247 117.136.40.229 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113794s][吞吐率：8.79req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000802s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002971s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:45+08:00 ] 172.31.69.247 117.136.40.229 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050973s][吞吐率：19.62req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000868s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 256  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000450s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000780s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:45+08:00 ] 172.31.69.247 117.136.40.229 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.064604s][吞吐率：15.48req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000333s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 256  AND `reading` = 0 LIMIT 1 [ RunTime:0.000259s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:46+08:00 ] 172.31.69.247 117.136.40.229 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036274s][吞吐率：27.57req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000856s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993266 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000770s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993266 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993266 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=256) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993266 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000974s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:47:47+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.069102s][吞吐率：14.47req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.003616s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001038s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 256 LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 256  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000421s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 256 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 256 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 256 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 256 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 256 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 256 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000861s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:47+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.103607s][吞吐率：9.65req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000558s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 256 LIMIT 1 [ RunTime:0.000456s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 256  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000377s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 256 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 256 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 256 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 256 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 256 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 256 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000900s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000206s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:47+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.102391s][吞吐率：9.77req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000392s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000523s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-03-31T08:47:54+08:00 ] 172.31.69.247 117.136.40.229 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035799s][吞吐率：27.93req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993274 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000777s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993274 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993274 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=256) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993274 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001363s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:47:56+08:00 ] 172.31.69.247 117.136.40.229 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035335s][吞吐率：28.30req/s] [内存消耗：4,125.59kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993276 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993276 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993276 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=256) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993276 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000456s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:48:35+08:00 ] 172.31.69.247 223.104.64.134 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.113243s][吞吐率：8.83req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000596s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002965s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:36+08:00 ] 172.31.69.247 223.104.64.134 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043825s][吞吐率：22.82req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000294s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000833s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 262  AND `reading` = 0 LIMIT 1 [ RunTime:0.000347s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:36+08:00 ] 172.31.69.247 223.104.64.134 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.056162s][吞吐率：17.81req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001021s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000665s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 262  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000453s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000766s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:39+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036063s][吞吐率：27.73req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993319 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993319 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993319 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=262) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993319 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001281s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:48:47+08:00 ] 172.31.69.247 223.104.64.134 POST /common/order/order
[ log ] api.kzwchina.com/common/order/order [运行时间：0.142598s][吞吐率：7.01req/s] [内存消耗：4,323.52kb] [文件加载：74]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'order',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '29',
)
[ info ] [ PARAM ] array (
  'id' => '43',
  'type' => '1',
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Order->Order[ /www/wwwroot/kouzhiwen/application/api/common/controller/Order.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000472s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000858s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 262 LIMIT 1 [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] INSERT INTO `tpn_class_user` (`class_id` , `uid` , `status` , `created_at` , `updated_at`) VALUES (43 , 262 , 1 , 1553993327 , 1553993327) [ RunTime:0.005767s ]
[ error ] [8]未定义数组索引: HTTP_OS[/www/wwwroot/kouzhiwen/application/api/common/controller/Order.php:43]
[ error ] [8]未定义数组索引: HTTP_VERSION[/www/wwwroot/kouzhiwen/application/api/common/controller/Order.php:44]

---------------------------------------------------------------
[ 2019-03-31T08:48:48+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/getclasstime?id=43
[ log ] api.kzwchina.com/common/study/getclasstime?id=43 [运行时间：0.045340s][吞吐率：22.06req/s] [内存消耗：4,002.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '43',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000977s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000679s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000390s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:48+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/class_course_list?id=43
[ log ] api.kzwchina.com/common/study/class_course_list?id=43 [运行时间：0.067092s][吞吐率：14.90req/s] [内存消耗：4,472.19kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '43',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000977s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000679s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 262 LIMIT 1 [ RunTime:0.000503s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 262  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 262 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 262 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 262 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 262 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 262 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 262 LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 262 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 262 LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 262 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 262 LIMIT 1 [ RunTime:0.000240s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000998s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000188s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000190s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000191s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:52+08:00 ] 172.31.69.247 117.136.79.163 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045357s][吞吐率：22.05req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000534s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001023s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000345s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:52+08:00 ] 172.31.69.247 117.136.79.163 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.066016s][吞吐率：15.15req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000526s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001020s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 267 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 267  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000394s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 267 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 267 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 267 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 267 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 267 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 267 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000837s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:53+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/sign?id=43
[ log ] api.kzwchina.com/common/study/sign?id=43 [运行时间：0.034411s][吞吐率：29.06req/s] [内存消耗：3,970.60kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '43',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000492s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 262  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (43 , 262 , '2019-03-31' , 1553993333) [ RunTime:0.003773s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:57+08:00 ] 172.31.69.247 117.136.79.163 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045750s][吞吐率：21.86req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000500s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001045s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000695s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000710s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000370s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:57+08:00 ] 172.31.69.247 117.136.79.163 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.066366s][吞吐率：15.07req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000495s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001045s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000695s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 267 LIMIT 1 [ RunTime:0.000512s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 267  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 267 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 267 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 267 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 267 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 267 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 267 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000820s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T08:48:59+08:00 ] 172.31.69.247 117.136.39.98 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.113576s][吞吐率：8.80req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '478c3991f9299c7b33950ea5176c3f88',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '478c3991f9299c7b33950ea5176c3f88' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002941s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:00+08:00 ] 172.31.69.247 117.136.39.98 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044559s][吞吐率：22.44req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '478c3991f9299c7b33950ea5176c3f88',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '478c3991f9299c7b33950ea5176c3f88' LIMIT 1 [ RunTime:0.000542s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 202  AND `reading` = 0 LIMIT 1 [ RunTime:0.000341s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:00+08:00 ] 172.31.69.247 117.136.39.98 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.057034s][吞吐率：17.53req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '478c3991f9299c7b33950ea5176c3f88',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000481s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001091s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '478c3991f9299c7b33950ea5176c3f88' LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000377s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 202  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000795s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:06+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.067203s][吞吐率：14.88req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000495s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001082s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000716s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 256 LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 256  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 256 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 256 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 256 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 256 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 256 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 256 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000889s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:06+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.081695s][吞吐率：12.24req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:06+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.112232s][吞吐率：8.91req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000723s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 256 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000446s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 256  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 256 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 256 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 256 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 256 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 256 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 256 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000920s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000209s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:16+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/datalist?enterprise_id=0&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=0&page=1 [运行时间：0.036356s][吞吐率：27.51req/s] [内存消耗：4,129.38kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '0',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000829s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993356 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993356 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993356 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=257) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993356 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001268s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:49:18+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036356s][吞吐率：27.51req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000816s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993358 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993358 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993358 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=262) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993358 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001349s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:49:22+08:00 ] 172.31.69.247 117.136.79.163 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.046982s][吞吐率：21.28req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000501s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000992s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000667s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 267  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 267 , '2019-03-31' , 1553993362) [ RunTime:0.002653s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:22+08:00 ] 172.31.69.247 117.136.79.163 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.050181s][吞吐率：19.93req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '3aedff9ec3f73ae336f31a30006eceff',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000494s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000992s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '3aedff9ec3f73ae336f31a30006eceff' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 267  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 267 , '2019-03-31' , 1553993362) [ RunTime:0.005916s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:22+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/typelist?enterprise_id=0
[ log ] api.kzwchina.com/common/study/typelist?enterprise_id=0 [运行时间：0.032174s][吞吐率：31.08req/s] [内存消耗：4,043.84kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 0  AND `up` = 0 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 0  AND `up` > 0 [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:26+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045067s][吞吐率：22.19req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000480s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001007s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000371s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:26+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064965s][吞吐率：15.39req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000485s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001007s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 262 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 262  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000407s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 262 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 262 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 262 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 262 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 262 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 262 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000815s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:39+08:00 ] 172.31.69.247 117.136.31.238 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043520s][吞吐率：22.98req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001036s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 257  AND `reading` = 0 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:39+08:00 ] 172.31.69.247 117.136.31.238 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.127439s][吞吐率：7.85req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001036s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.004345s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:43+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/datalist?enterprise_id=0&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=0&page=1 [运行时间：0.036246s][吞吐率：27.59req/s] [内存消耗：4,129.38kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '0',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000497s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993383 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993383 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993383 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=257) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993383 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000989s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:49:46+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/typelist?enterprise_id=0
[ log ] api.kzwchina.com/common/study/typelist?enterprise_id=0 [运行时间：0.031815s][吞吐率：31.43req/s] [内存消耗：4,043.84kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000805s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000661s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 0  AND `up` = 0 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 0  AND `up` > 0 [ RunTime:0.000257s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:54+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.046949s][吞吐率：21.30req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000480s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001024s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 262  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 262 , '2019-03-31' , 1553993394) [ RunTime:0.003123s ]

---------------------------------------------------------------
[ 2019-03-31T08:49:54+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.049069s][吞吐率：20.38req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000472s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001024s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000698s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 262  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 262 , '2019-03-31' , 1553993394) [ RunTime:0.004927s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:09+08:00 ] 172.31.69.247 221.219.96.12 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.031228s][吞吐率：32.02req/s] [内存消耗：4,060.41kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000324s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:10+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/datalist?enterprise_id=0&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=0&page=1 [运行时间：0.036254s][吞吐率：27.58req/s] [内存消耗：4,129.38kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '0',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993410 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000775s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993410 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993410 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000729s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=257) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = 13  AND `a`.`end` > 1553993410 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001342s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:50:10+08:00 ] 172.31.69.247 221.219.96.12 GET /common/study/classdiscuss?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/classdiscuss?OS=iOS&id=130&version=1.0.5 [运行时间：0.031385s][吞吐率：31.86req/s] [内存消耗：4,038.87kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000797s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '130'  AND `u`.`user_id` = 191  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:10+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/typelist?enterprise_id=13
[ log ] api.kzwchina.com/common/study/typelist?enterprise_id=13 [运行时间：0.032480s][吞吐率：30.79req/s] [内存消耗：4,045.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` = 0 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 13  AND `up` > 0 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:11+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/typelist?enterprise_id=0
[ log ] api.kzwchina.com/common/study/typelist?enterprise_id=0 [运行时间：0.032261s][吞吐率：31.00req/s] [内存消耗：4,043.84kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000501s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 0  AND `up` = 0 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 0  AND `up` > 0 [ RunTime:0.000237s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:11+08:00 ] 172.31.69.247 221.219.96.12 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036115s][吞吐率：27.69req/s] [内存消耗：4,128.98kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000904s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993411 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993411 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993411 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=191) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993411 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001354s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:50:13+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.045068s][吞吐率：22.19req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001042s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000659s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000345s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:13+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.064513s][吞吐率：15.50req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000299s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 257 LIMIT 1 [ RunTime:0.000491s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 257  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 257 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 257 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 257 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 257 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 257 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 257 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000889s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:19+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035903s][吞吐率：27.85req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000807s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993419 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000792s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993419 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993419 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000736s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=262) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993419 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001347s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:50:24+08:00 ] 172.31.69.247 223.104.63.36 POST /common/login/login
[ log ] api.kzwchina.com/common/login/login [运行时间：0.144067s][吞吐率：6.94req/s] [内存消耗：4,296.16kb] [文件加载：76]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'login',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'version' => '1.0.5',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '50',
)
[ info ] [ PARAM ] array (
  'login_type' => 'phone',
  'password' => '123456',
  'phone' => '13888320598',
)
[ info ] [ RUN ] app\api\common\controller\Login->login[ /www/wwwroot/kouzhiwen/application/api/common/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000861s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  (  username='13888320598' OR phone='13888320598' ) LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] UPDATE `tpn_user`  SET `logintoken`='37b9c60f281c687672a2bd552449918d',`deviceToken`=NULL  WHERE  `uid` = 282 [ RunTime:0.005632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000389s ]
[ error ] [8]未定义数组索引: deviceToken[/www/wwwroot/kouzhiwen/application/common/model/User.php:116]

---------------------------------------------------------------
[ 2019-03-31T08:50:24+08:00 ] 172.31.69.247 223.104.63.36 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113619s][吞吐率：8.80req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000807s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002945s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:24+08:00 ] 172.31.69.247 223.104.63.36 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050939s][吞吐率：19.63req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 282  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000769s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000432s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000263s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:24+08:00 ] 172.31.69.247 223.104.63.36 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.060206s][吞吐率：16.61req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000361s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 282  AND `reading` = 0 LIMIT 1 [ RunTime:0.000251s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:25+08:00 ] 172.31.69.247 117.136.39.222 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.113095s][吞吐率：8.84req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002957s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:26+08:00 ] 172.31.69.247 117.136.39.222 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043038s][吞吐率：23.24req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000801s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 284  AND `reading` = 0 LIMIT 1 [ RunTime:0.000331s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:26+08:00 ] 172.31.69.247 117.136.39.222 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.054644s][吞吐率：18.30req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001032s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000713s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000410s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 284  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000800s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:28+08:00 ] 172.31.69.247 223.104.63.36 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035762s][吞吐率：27.96req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993428 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000747s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993428 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993428 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=282) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993428 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001183s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:50:29+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044939s][吞吐率：22.25req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000996s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000682s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000363s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:29+08:00 ] 172.31.69.247 223.104.64.134 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.066391s][吞吐率：15.06req/s] [内存消耗：4,464.90kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'c9dc0f2d05bb0c04c57d9dab7742da84',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000996s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9dc0f2d05bb0c04c57d9dab7742da84' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 262 LIMIT 1 [ RunTime:0.000438s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.002278s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 262  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000404s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 262 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 262 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 262 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 262 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 262 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 262 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000801s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:31+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/study_details?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=130&version=1.0.5 [运行时间：0.035889s][吞吐率：27.86req/s] [内存消耗：4,142.80kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000395s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000819s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 130 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 282 LIMIT 1 [ RunTime:0.000468s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000368s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:32+08:00 ] 172.31.69.247 117.136.39.222 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044002s][吞吐率：22.73req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000993s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 284  AND `reading` = 0 LIMIT 1 [ RunTime:0.000342s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:33+08:00 ] 172.31.69.247 117.136.39.222 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.125635s][吞吐率：7.96req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000993s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.004396s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:36+08:00 ] 172.31.69.247 223.104.63.36 POST /common/order/order
[ log ] api.kzwchina.com/common/order/order [运行时间：1.155972s][吞吐率：0.87req/s] [内存消耗：4,253.16kb] [文件加载：71]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'order',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '30',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'id' => '130',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Order->Order[ /www/wwwroot/kouzhiwen/application/api/common/controller/Order.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000711s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 282 LIMIT 1 [ RunTime:0.000431s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 130 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] INSERT INTO `tpn_class_user` (`class_id` , `uid` , `status` , `created_at` , `updated_at`) VALUES (130 , 282 , 1 , 1553993435 , 1553993435) [ RunTime:0.005572s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:37+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066802s][吞吐率：14.97req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000489s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001073s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000778s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 282 LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 282  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 282 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 282 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 282 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 282 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 282 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 282 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000882s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000213s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:37+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.080958s][吞吐率：12.35req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000653s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:37+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.111587s][吞吐率：8.96req/s] [内存消耗：4,465.11kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000341s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 282 LIMIT 1 [ RunTime:0.000463s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000423s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 282  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 282 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 282 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 282 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 282 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 282 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 282 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000805s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:43+08:00 ] 172.31.69.247 221.219.96.12 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.034877s][吞吐率：28.67req/s] [内存消耗：4,125.58kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000568s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993443 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993443 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993443 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=191) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993443 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000386s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:50:47+08:00 ] 172.31.69.247 221.219.96.12 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030879s][吞吐率：32.38req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000863s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 191  AND `reading` = 0 LIMIT 1 [ RunTime:0.000266s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:49+08:00 ] 172.31.69.247 221.219.96.12 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030373s][吞吐率：32.92req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=sr7m2qenba38800iqccj8ie6c2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '1e714f4098ad017111935277c57755cd',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '1e714f4098ad017111935277c57755cd' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 191  AND `reading` = 0 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:53+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.033046s][吞吐率：30.26req/s] [内存消耗：3,971.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 282  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 282 , '2019-03-31' , 1553993453) [ RunTime:0.002441s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:53+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065863s][吞吐率：15.18req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001065s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 282 LIMIT 1 [ RunTime:0.000584s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 282  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 282 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 282 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 282 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 282 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 282 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 282 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000810s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:53+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.060446s][吞吐率：16.54req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:53+08:00 ] 172.31.69.247 223.104.63.36 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.116120s][吞吐率：8.61req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 282 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 282  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000376s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 282 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 282 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 282 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 282 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 282 LIMIT 1 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 282 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000868s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000213s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:56+08:00 ] 172.31.69.247 117.136.31.238 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.034940s][吞吐率：28.62req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'bf50367efef55e7ef624ef31a87e624f',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000482s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'bf50367efef55e7ef624ef31a87e624f' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 257  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 257 , '2019-03-31' , 1553993456) [ RunTime:0.003868s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:57+08:00 ] 172.31.69.247 117.136.39.222 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043131s][吞吐率：23.19req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000283s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000804s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000650s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 284  AND `reading` = 0 LIMIT 1 [ RunTime:0.000347s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:57+08:00 ] 172.31.69.247 117.136.39.222 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.046071s][吞吐率：21.71req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001023s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000728s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 284 ORDER BY u.weight ASC [ RunTime:0.000527s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000358s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:57+08:00 ] 172.31.69.247 117.136.39.222 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030546s][吞吐率：32.74req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000479s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000827s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000691s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000187s ]

---------------------------------------------------------------
[ 2019-03-31T08:50:57+08:00 ] 172.31.69.247 117.136.39.222 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031944s][吞吐率：31.30req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000385s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000798s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000630s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000291s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000403s ]

---------------------------------------------------------------
[ 2019-03-31T08:51:16+08:00 ] 172.31.69.247 117.136.39.222 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036068s][吞吐率：27.73req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000387s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993476 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993476 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993476 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=284) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993476 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001006s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:51:18+08:00 ] 172.31.69.247 117.136.39.222 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.043629s][吞吐率：22.92req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000992s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000367s ]

---------------------------------------------------------------
[ 2019-03-31T08:51:18+08:00 ] 172.31.69.247 117.136.39.222 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065497s][吞吐率：15.27req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000992s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 284 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 284  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 284 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 284 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 284 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 284 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 284 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 284 LIMIT 1 [ RunTime:0.000239s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000884s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:51:26+08:00 ] 172.31.69.247 117.136.39.222 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.047531s][吞吐率：21.04req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000996s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000713s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 284  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 284 , '2019-03-31' , 1553993486) [ RunTime:0.003606s ]

---------------------------------------------------------------
[ 2019-03-31T08:51:26+08:00 ] 172.31.69.247 117.136.39.222 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.049379s][吞吐率：20.25req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '89fea8b288a77726b4ed57ed81db406d',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000996s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '89fea8b288a77726b4ed57ed81db406d' LIMIT 1 [ RunTime:0.000712s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 284  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 284 , '2019-03-31' , 1553993486) [ RunTime:0.005192s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:00+08:00 ] 172.31.69.247 223.104.63.36 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035612s][吞吐率：28.08req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993520 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000733s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993520 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993520 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=282) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993520 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001195s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:52:21+08:00 ] 172.31.69.247 223.104.63.36 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030714s][吞吐率：32.56req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000840s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 282  AND `reading` = 0 LIMIT 1 [ RunTime:0.000297s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:31+08:00 ] 172.31.69.247 223.104.63.36 POST /discover/article/details
[ log ] api.kzwchina.com/discover/article/details [运行时间：0.039880s][吞吐率：25.08req/s] [内存消耗：4,116.26kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '23',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 23  AND `status` = 1 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 282  AND `type_id` = 23 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 23 [ RunTime:0.004980s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:31+08:00 ] 172.31.69.247 223.104.63.36 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.033499s][吞吐率：29.85req/s] [内存消耗：3,941.63kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '23',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000342s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '23' ORDER BY id desc LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='282') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '23' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000445s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:32+08:00 ] 172.31.69.247 223.104.63.36 GET /discover/article/details?id=23
[ log ] api.kzwchina.com/discover/article/details?id=23 [运行时间：0.038385s][吞吐率：26.05req/s] [内存消耗：4,012.48kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16C101',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '23',
)
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000741s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 23  AND `status` = 1 LIMIT 1 [ RunTime:0.000432s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 0  AND `type_id` = 23 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 23 [ RunTime:0.007037s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:38+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.034276s][吞吐率：29.17req/s] [内存消耗：3,971.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 256  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 256 , '2019-03-31' , 1553993558) [ RunTime:0.002528s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:38+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.073221s][吞吐率：13.66req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001068s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000658s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 256 LIMIT 1 [ RunTime:0.000497s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 256  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000406s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 256 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 256 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 256 LIMIT 1 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 256 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 256 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 256 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000825s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:38+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.066148s][吞吐率：15.12req/s] [内存消耗：3,989.34kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:38+08:00 ] 172.31.69.247 117.136.40.229 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.114812s][吞吐率：8.71req/s] [内存消耗：4,466.15kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000574s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 256 LIMIT 1 [ RunTime:0.000492s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000444s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 256  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000395s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 256 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 256 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 256 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 256 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 256 LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 256 LIMIT 1 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000807s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T08:52:42+08:00 ] 172.31.69.247 117.136.40.229 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035914s][吞吐率：27.84req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'c9e42025a8cf8ca118d5affad5c655ae',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=rcet1dj2h55jh3i3t7t5o5a2i4',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000803s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'c9e42025a8cf8ca118d5affad5c655ae' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993562 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993562 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993562 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=256) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993562 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001047s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.105546s][吞吐率：9.47req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 277 ORDER BY u.weight ASC [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000350s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.164519s][吞吐率：6.08req/s] [内存消耗：3,881.80kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.007428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001046s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.001654s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.001880s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.001936s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000440s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.146855s][吞吐率：6.81req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.042570s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.002143s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.021925s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.001012s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.140098s][吞吐率：7.14req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.003523s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.002268s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.006165s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.003560s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.003399s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.190063s][吞吐率：5.26req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.009260s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001834s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.004323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.007409s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.001611s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.161197s][吞吐率：6.20req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.013044s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.005242s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.004431s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.003110s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 277  AND `reading` = 0 LIMIT 1 [ RunTime:0.003254s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 GET /common/home/index?enterprise_id=13
[ log ] api.kzwchina.com/common/home/index?enterprise_id=13 [运行时间：0.200774s][吞吐率：4.98req/s] [内存消耗：4,389.99kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.027973s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.003136s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.004785s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.010492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.008287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.003677s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 277  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000509s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000733s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000811s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000325s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:01+08:00 ] 172.31.69.247 117.136.79.135 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.232112s][吞吐率：4.31req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.042852s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.004495s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:02+08:00 ] 172.31.69.247 117.136.79.135 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.029807s][吞吐率：33.55req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000868s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000207s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:02+08:00 ] 172.31.69.247 117.136.79.135 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031556s][吞吐率：31.69req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000964s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000292s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000412s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:07+08:00 ] 172.31.69.247 117.136.79.135 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035597s][吞吐率：28.09req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993587 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993587 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993587 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=277) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993587 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001181s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:53:13+08:00 ] 172.31.69.247 223.104.63.36 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031583s][吞吐率：31.66req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000712s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 282  AND `reading` = 0 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:17+08:00 ] 172.31.69.247 223.104.63.36 POST /discover/article/details
[ log ] api.kzwchina.com/discover/article/details [运行时间：0.047433s][吞吐率：21.08req/s] [内存消耗：4,116.55kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '22',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 22  AND `status` = 1 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 282  AND `type_id` = 22 LIMIT 1 [ RunTime:0.000243s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 22 [ RunTime:0.004538s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:17+08:00 ] 172.31.69.247 223.104.63.36 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.058375s][吞吐率：17.13req/s] [内存消耗：3,939.95kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-MO;q=1',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '22',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000357s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000739s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '22' ORDER BY id desc LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='282') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '22' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000411s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:17+08:00 ] 172.31.69.247 223.104.63.36 GET /discover/article/details?id=22
[ log ] api.kzwchina.com/discover/article/details?id=22 [运行时间：0.035408s][吞吐率：28.24req/s] [内存消耗：4,012.82kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16C101',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '22',
)
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 22  AND `status` = 1 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 0  AND `type_id` = 22 LIMIT 1 [ RunTime:0.000239s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 22 [ RunTime:0.006056s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:29+08:00 ] 172.31.69.247 117.136.79.119 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.035701s][吞吐率：28.01req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993609 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993609 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993609 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000739s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=254) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993609 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001002s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:53:31+08:00 ] 172.31.69.247 117.136.79.119 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.044892s][吞吐率：22.28req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000527s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001008s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000373s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:31+08:00 ] 172.31.69.247 117.136.79.119 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.065411s][吞吐率：15.29req/s] [内存消耗：4,464.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000521s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001008s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 254 LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 254  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000406s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 254 LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 254 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 254 LIMIT 1 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 254 LIMIT 1 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 254 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 254 LIMIT 1 [ RunTime:0.000231s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000820s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:40+08:00 ] 172.31.69.247 223.104.63.36 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030594s][吞吐率：32.69req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=benhc9f13mhogvo8u3h1o23h54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '37b9c60f281c687672a2bd552449918d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-MO;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000808s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '37b9c60f281c687672a2bd552449918d' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 282  AND `reading` = 0 LIMIT 1 [ RunTime:0.000302s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:41+08:00 ] 172.31.69.247 117.136.79.119 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.038551s][吞吐率：25.94req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 254  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.003469s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 254 , '2019-03-31' , 1553993621) [ RunTime:0.003485s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:41+08:00 ] 172.31.69.247 117.136.79.119 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.032185s][吞吐率：31.07req/s] [内存消耗：3,972.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'd59cc82da6cdb724cea105e8b8e85124',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000444s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000819s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd59cc82da6cdb724cea105e8b8e85124' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 254  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000315s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:54+08:00 ] 172.31.69.247 117.136.79.165 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.112012s][吞吐率：8.93req/s] [内存消耗：5,161.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000904s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002964s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:55+08:00 ] 172.31.69.247 117.136.79.165 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050372s][吞吐率：19.85req/s] [内存消耗：4,390.14kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001036s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000715s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 280  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000456s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000779s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000267s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:55+08:00 ] 172.31.69.247 117.136.79.165 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.054570s][吞吐率：18.33req/s] [内存消耗：3,982.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000310s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 280  AND `reading` = 0 LIMIT 1 [ RunTime:0.000265s ]

---------------------------------------------------------------
[ 2019-03-31T08:53:58+08:00 ] 172.31.69.247 117.136.79.165 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036522s][吞吐率：27.38req/s] [内存消耗：4,129.04kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000811s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993638 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993638 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993638 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=280) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993638 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001333s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:54:02+08:00 ] 172.31.69.247 117.136.79.165 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.058336s][吞吐率：17.14req/s] [内存消耗：4,464.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000863s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.001052s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.001588s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 280 LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 280  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 280 LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 280 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 280 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 280 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 280 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 280 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001024s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-03-31T08:54:02+08:00 ] 172.31.69.247 117.136.79.165 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.048146s][吞吐率：20.77req/s] [内存消耗：3,989.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000377s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000638s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-03-31T08:54:02+08:00 ] 172.31.69.247 117.136.79.165 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.090203s][吞吐率：11.09req/s] [内存消耗：4,464.98kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000304s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 280 LIMIT 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 280  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 280 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 280 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 280 LIMIT 1 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 280 LIMIT 1 [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 280 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 280 LIMIT 1 [ RunTime:0.000246s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000883s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000216s ]

---------------------------------------------------------------
[ 2019-03-31T08:54:08+08:00 ] 172.31.69.247 117.136.79.165 GET /common/study/sign?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=130&version=1.0.5 [运行时间：0.033265s][吞吐率：30.06req/s] [内存消耗：3,971.73kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 280  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 280 , '2019-03-31' , 1553993648) [ RunTime:0.002295s ]

---------------------------------------------------------------
[ 2019-03-31T08:54:09+08:00 ] 172.31.69.247 117.136.79.165 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066297s][吞吐率：15.08req/s] [内存消耗：4,465.95kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001048s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000767s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 280 LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 280  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 280 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 280 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 280 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 280 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 280 LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 280 LIMIT 1 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000793s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000438s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:54:09+08:00 ] 172.31.69.247 117.136.79.165 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.079854s][吞吐率：12.52req/s] [内存消耗：3,989.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000376s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-03-31T08:54:09+08:00 ] 172.31.69.247 117.136.79.165 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.102676s][吞吐率：9.74req/s] [内存消耗：4,465.95kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ronvoe6k0nm3oqs9febbr8kdu5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '4ca639d2e6cb663a4ee7e6e5247e406d',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.0.3; Scale/2.00)',
  'accept-language' => 'zh-Hans-GB;q=1, en-GB;q=0.9',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '4ca639d2e6cb663a4ee7e6e5247e406d' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 280 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 280  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000376s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 280 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 280 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 280 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 280 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 280 LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 280 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000855s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000445s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000199s ]

---------------------------------------------------------------
[ 2019-03-31T08:54:34+08:00 ] 172.31.69.247 117.136.79.128 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.036424s][吞吐率：27.45req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000690s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993674 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000804s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993674 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993674 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=277) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993674 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001017s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:55:07+08:00 ] 172.31.69.247 117.136.79.128 GET /common/study/datalist?enterprise_id=13&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=13&page=1 [运行时间：0.037007s][吞吐率：27.02req/s] [内存消耗：4,129.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000823s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993707 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993707 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993707 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000739s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=277) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993707 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001341s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:55:09+08:00 ] 172.31.69.247 117.136.79.128 GET /common/study/getclasstime?id=130
[ log ] api.kzwchina.com/common/study/getclasstime?id=130 [运行时间：0.031871s][吞吐率：31.38req/s] [内存消耗：3,987.53kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000381s ]

---------------------------------------------------------------
[ 2019-03-31T08:55:10+08:00 ] 172.31.69.247 117.136.79.128 GET /common/study/class_course_list?id=130
[ log ] api.kzwchina.com/common/study/class_course_list?id=130 [运行时间：0.052307s][吞吐率：19.12req/s] [内存消耗：4,463.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000657s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 277 LIMIT 1 [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 277  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 277 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 277 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 277 LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 277 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 277 LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 277 LIMIT 1 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000854s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-03-31T08:55:16+08:00 ] 172.31.69.247 117.136.79.128 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.034673s][吞吐率：28.84req/s] [内存消耗：3,970.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000684s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 277  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (130 , 277 , '2019-03-31' , 1553993716) [ RunTime:0.003422s ]

---------------------------------------------------------------
[ 2019-03-31T08:55:17+08:00 ] 172.31.69.247 117.136.79.128 GET /common/study/sign?id=130
[ log ] api.kzwchina.com/common/study/sign?id=130 [运行时间：0.029373s][吞吐率：34.04req/s] [内存消耗：3,972.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '130',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 277  AND `date` = '2019-03-31' LIMIT 1 [ RunTime:0.000342s ]

---------------------------------------------------------------
[ 2019-03-31T08:56:46+08:00 ] 172.31.69.247 112.65.48.187 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113619s][吞吐率：8.80req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002958s ]

---------------------------------------------------------------
[ 2019-03-31T08:56:46+08:00 ] 172.31.69.247 112.65.48.187 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050382s][吞吐率：19.85req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=m79dumr7fi9s9jtccse144m3a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001050s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000766s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000712s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 279  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000472s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000791s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-03-31T08:56:46+08:00 ] 172.31.69.247 112.65.48.187 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.048905s][吞吐率：20.45req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=m79dumr7fi9s9jtccse144m3a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000337s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 279  AND `reading` = 0 LIMIT 1 [ RunTime:0.000266s ]

---------------------------------------------------------------
[ 2019-03-31T08:56:49+08:00 ] 172.31.69.247 112.65.48.187 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036163s][吞吐率：27.65req/s] [内存消耗：4,128.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=m79dumr7fi9s9jtccse144m3a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000858s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993809 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993809 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993809 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=279) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1553993809 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001019s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-03-31T08:56:53+08:00 ] 172.31.69.247 112.65.48.187 GET /common/study/study_details?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=46&version=1.0.5 [运行时间：0.035465s][吞吐率：28.20req/s] [内存消耗：4,151.24kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=m79dumr7fi9s9jtccse144m3a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 46 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 279 LIMIT 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000334s ]

---------------------------------------------------------------
[ 2019-03-31T08:56:57+08:00 ] 172.31.69.247 112.65.48.187 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031500s][吞吐率：31.75req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=m79dumr7fi9s9jtccse144m3a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 279  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-03-31T08:56:59+08:00 ] 172.31.69.247 117.136.79.128 GET /common/study/study_details?id=43
[ log ] api.kzwchina.com/common/study/study_details?id=43 [运行时间：0.034560s][吞吐率：28.94req/s] [内存消耗：4,148.60kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'a72131f7562bf8b393aa4b6a2c6b0047',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '43',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'a72131f7562bf8b393aa4b6a2c6b0047' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 43 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 277 LIMIT 1 [ RunTime:0.000467s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 350 LIMIT 1 [ RunTime:0.000346s ]

---------------------------------------------------------------
[ 2019-03-31T08:57:00+08:00 ] 172.31.69.247 112.65.48.187 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.122986s][吞吐率：8.13req/s] [内存消耗：5,160.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=m79dumr7fi9s9jtccse144m3a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000536s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001106s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003875s ]

---------------------------------------------------------------
[ 2019-03-31T08:57:00+08:00 ] 172.31.69.247 112.65.48.187 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.126054s][吞吐率：7.93req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=m79dumr7fi9s9jtccse144m3a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'd48203fc7d30bb4f6401d569d377a21e',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'd48203fc7d30bb4f6401d569d377a21e' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 279  AND `reading` = 0 LIMIT 1 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-03-31T08:57:21+08:00 ] 172.31.69.247 112.64.68.21 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.113107s][吞吐率：8.84req/s] [内存消耗：5,161.10kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f98b3d95d14509d2e35670d93a519766',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000788s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f98b3d95d14509d2e35670d93a519766' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002978s ]

---------------------------------------------------------------
[ 2019-03-31T08:57:21+08:00 ] 172.31.69.247 112.64.68.21 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050244s][吞吐率：19.90req/s] [内存消耗：4,390.16kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'f98b3d95d14509d2e35670d93a519766',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ksvsooroa8ih686abovuhu61d0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001048s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f98b3d95d14509d2e35670d93a519766' LIMIT 1 [ RunTime:0.000751s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 285  AND `class_id` = 43 LIMIT 1 [ RunTime:0.000449s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000760s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000429s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-03-31T08:57:21+08:00 ] 172.31.69.247 112.64.68.21 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.051102s][吞吐率：19.57req/s] [内存消耗：3,983.33kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ksvsooroa8ih686abovuhu61d0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'f98b3d95d14509d2e35670d93a519766',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'f98b3d95d14509d2e35670d93a519766' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 285  AND `reading` = 0 LIMIT 1 [ RunTime:0.000265s ]

---------------------------------------------------------------
