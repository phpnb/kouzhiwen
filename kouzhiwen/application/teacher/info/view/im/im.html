
<!--
SDK 文档：http://www.rongcloud.cn/docs/web.html#sdk
-->
<script src="//cdn.ronghub.com/RongIMLib-2.3.0.js"></script>
<!-- <script src="./libs/RongEmoji.js"></script> -->
<script src="//cdn.ronghub.com/RongEmoji-2.2.6.min.js"></script>

<script src="/static/im/libs/utils.js"></script>
<script src="/static/im/libs/qiniu-upload.js"></script>

<script src="/static/im/template.js"></script>
<script src="/static/im/emoji.js"></script>
<script src="/static/im/im.js"></script>

<div id="right_content">
    <div class="top-info">
        <i class="glyphicon glyphicon-home"></i>
        IM聊天
    </div>


    <div class="table-box">
        <div id="rcs-app"></div>
    </div>

</div>
<!-- 实例化 -->
<script>
    /*
具体使用时：
1：切换到自己的 key 和 token
2：移除 im.js 里的 sendTextMessage(instance); 这行代码
3：自行二次开发
4：参考
    - 用户数据处理 http://support.rongcloud.cn/kb/NjQ5
    - 消息状态 http://support.rongcloud.cn/kb/NjMz
    - 集成指南 https://rongcloud.github.io/websdk-demo/integrate/guide.html
    - 其他 demo https://github.com/rongcloud/websdk-demo
*/
    (function () {

        var appKey = "pwe86ga5pv616";
        var token ="{$data.rongcloud}";
        RCS.init({
            appKey: appKey,
            token: token,
            target: document.getElementById('rcs-app'),
            showConversitionList: true,
            templates: {
                button: ['<div class="rongcloud-consult rongcloud-im-consult">',
                    '   <button onclick="RCS.showCommon()"><span class="rongcloud-im-icon">进入 IM</span></button>',
                    '</div>',
                    '<div class="customer-service" style="display: none;"></div>'
                ].join('')
                //"templates/button.html",
                // chat: "templates/chat.html",
                // closebefore: 'templates/closebefore.html',
                // conversation: 'templates/conversation.html',
                // endconversation: 'templates/endconversation.html',
                // evaluate: 'templates/evaluate.html',
                // imageView: 'templates/imageView.html',
                // leaveword: 'templates/leaveword.html',
                // main: 'templates/main.html',
                // message: 'templates/message.html',
                // messageTemplate: 'templates/messageTemplate.html',
                // userInfo: 'templates/userInfo.html',
            },
            extraInfo: {
                // 当前登陆用户信息
                userInfo: {
                    name: "游客",
                    grade: "VIP"
                },
                // 产品信息
                requestInfo: {
                    productId: "123",
                    referrer: "10001",
                    define: "" // 自定义信息
                }
            }
        });
    })()

    /**
     * 获取指定的URL参数值
     * URL:http://www.quwan.com/index?name=tyler
     * 参数：paramName URL参数
     * 调用方法:getParam("name")
     * 返回值:tyler
     */
    function getParam(paramName) {
        paramValue = "", isFound = !1;
        if (this.location.search.indexOf("?") == 0 && this.location.search.indexOf("=") > 1) {
            arrSource = unescape(this.location.search).substring(1, this.location.search.length).split("&"), i = 0;
            while (i < arrSource.length && !isFound) arrSource[i].indexOf("=") > 0 && arrSource[i].split("=")[0].toLowerCase() ==
            paramName.toLowerCase() && (paramValue = arrSource[i].split("=")[1], isFound = !0), i++
        }
        return paramValue == "" && (paramValue = null), paramValue
    }
</script>
