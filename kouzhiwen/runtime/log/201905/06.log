[ 2019-05-06T21:26:20+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.088253s][吞吐率：11.33req/s] [内存消耗：4,468.83kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000684s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 408 LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 408  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000470s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 408 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 408 LIMIT 1 [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 408 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 408 LIMIT 1 [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 408 LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000930s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000233s ]

---------------------------------------------------------------
[ 2019-05-06T21:26:20+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.108463s][吞吐率：9.22req/s] [内存消耗：4,468.90kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000310s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 408 LIMIT 1 [ RunTime:0.000575s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 408  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 408 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 408 LIMIT 1 [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 408 LIMIT 1 [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 408 LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 408 LIMIT 1 [ RunTime:0.000486s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000925s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 428 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 557 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000238s ]

---------------------------------------------------------------
[ 2019-05-06T21:26:33+08:00 ] 172.31.69.247 211.94.192.251 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038645s][吞吐率：25.88req/s] [内存消耗：4,108.65kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000747s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000699s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 401 [ RunTime:0.002480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 401 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 408  AND `type` = 3  AND `type_id` = 401 LIMIT 1 [ RunTime:0.000457s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-05-06T21:26:35+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/aftertime?OS=iOS&cid=401&type=1&uid=408&version=1.0.8
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=401&type=1&uid=408&version=1.0.8 [运行时间：0.040905s][吞吐率：24.45req/s] [内存消耗：3,988.38kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '401',
  'type' => '1',
  'uid' => '408',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000392s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000890s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000881s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 408  AND `classcourse_id` = 401  AND `type` = 1 LIMIT 1 [ RunTime:0.000580s ]

---------------------------------------------------------------
[ 2019-05-06T21:26:35+08:00 ] 172.31.69.247 211.94.192.251 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.048000s][吞吐率：20.83req/s] [内存消耗：3,941.59kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000754s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='408') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000447s ]

---------------------------------------------------------------
[ 2019-05-06T21:30:51+08:00 ] 172.31.69.247 211.94.192.251 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.036517s][吞吐率：27.38req/s] [内存消耗：4,062.30kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '62',
)
[ info ] [ PARAM ] array (
  'cid' => '401',
  'course_time' => '7869.568000',
  'time' => '246.900000',
  'type' => '1',
  'uid' => '408',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000937s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 408  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000564s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (408 , 401 , 246.9 , 1 , 7869.568) [ RunTime:0.003857s ]

---------------------------------------------------------------
[ 2019-05-06T21:30:58+08:00 ] 172.31.69.247 211.94.192.251 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017201s][吞吐率：58.14req/s] [内存消耗：1,987.17kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-05-06T21:31:05+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/notice_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.031986s][吞吐率：31.26req/s] [内存消耗：4,057.42kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000975s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000880s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 139 ORDER BY created_at desc [ RunTime:0.000431s ]

---------------------------------------------------------------
[ 2019-05-06T21:31:07+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/notice_details?OS=iOS&id=92&version=1.0.8
[ log ] api.kzwchina.com/common/study/notice_details?OS=iOS&id=92&version=1.0.8 [运行时间：0.034104s][吞吐率：29.32req/s] [内存消耗：4,070.38kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '92',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000492s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000760s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `id` = 92 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000779s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 595 LIMIT 1 [ RunTime:0.000377s ]

---------------------------------------------------------------
[ 2019-05-06T21:31:28+08:00 ] 172.31.69.247 117.12.147.20 GET /discover/course/course_type?enterprise_id=28&type=1
[ log ] api.kzwchina.com/discover/course/course_type?enterprise_id=28&type=1 [运行时间：0.031599s][吞吐率：31.65req/s] [内存消耗：3,910.63kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e236729d13e3516bb4b2e04389923388',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e236729d13e3516bb4b2e04389923388' LIMIT 1 [ RunTime:0.001071s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 28  AND `type` = 1 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-05-06T21:31:28+08:00 ] 172.31.69.247 117.12.147.20 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.032563s][吞吐率：30.71req/s] [内存消耗：3,998.18kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e236729d13e3516bb4b2e04389923388',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '40',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'type_id' => '0',
  'page' => '1',
  'enterprise_id' => '28',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000713s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e236729d13e3516bb4b2e04389923388' LIMIT 1 [ RunTime:0.000840s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000404s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-05-06T21:32:15+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/classdiscuss?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/classdiscuss?OS=iOS&id=139&version=1.0.8 [运行时间：0.032562s][吞吐率：30.71req/s] [内存消耗：4,042.45kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000880s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '139'  AND `u`.`user_id` = 408  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000430s ]

---------------------------------------------------------------
[ 2019-05-06T21:32:20+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/discussuser?OS=iOS&id=139&type=1&version=1.0.8
[ log ] api.kzwchina.com/common/study/discussuser?OS=iOS&id=139&type=1&version=1.0.8 [运行时间：0.039736s][吞吐率：25.17req/s] [内存消耗：4,277.29kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->DiscussUser[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000902s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000744s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `class_id` = 139 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT c.uid as user_id,`u`.`name`,u.face as photo,1 as type,`c`.`call` FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' [ RunTime:0.000716s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000762s ]
[ sql ] [ SQL ] SELECT id as user_id,`name`,`photo`,2 as type,if(id=599,'班主任','讲师') as 'call' FROM `tpn_teacher` WHERE  `id` IN (0,599) [ RunTime:0.000332s ]

---------------------------------------------------------------
[ 2019-05-06T21:32:21+08:00 ] 172.31.69.247 211.94.192.251 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016656s][吞吐率：60.04req/s] [内存消耗：1,987.17kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-05-06T21:32:48+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/discussdetails?OS=iOS&id=408&type=1&version=1.0.8
[ log ] api.kzwchina.com/common/study/discussdetails?OS=iOS&id=408&type=1&version=1.0.8 [运行时间：0.033761s][吞吐率：29.62req/s] [内存消耗：4,109.16kb] [文件加载：64]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '408',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->DiscussDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000915s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000899s ]
[ sql ] [ SQL ] SELECT uid as id,face as photo,`name`,`name_hide`,`nickname`,`sex`,`company_name`,`unit_title`,`email` FROM `tpn_user` WHERE  `uid` = 408 LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` ORDER BY date desc [ RunTime:0.000230s ]

---------------------------------------------------------------
[ 2019-05-06T21:32:53+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/discussdetails?OS=iOS&id=399&type=1&version=1.0.8
[ log ] api.kzwchina.com/common/study/discussdetails?OS=iOS&id=399&type=1&version=1.0.8 [运行时间：0.034486s][吞吐率：29.00req/s] [内存消耗：4,109.16kb] [文件加载：64]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '399',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->DiscussDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000955s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT uid as id,face as photo,`name`,`name_hide`,`nickname`,`sex`,`company_name`,`unit_title`,`email` FROM `tpn_user` WHERE  `uid` = 399 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` ORDER BY date desc [ RunTime:0.000229s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:04+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/class_hot?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_hot?OS=iOS&id=139&version=1.0.8 [运行时间：0.032552s][吞吐率：30.72req/s] [内存消耗：4,055.86kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassHot[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000856s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000763s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_teacher_article` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_teacher_article` WHERE  `class_id` = 139 ORDER BY add_time desc LIMIT 0,10 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:12+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/sign?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=139&version=1.0.8 [运行时间：0.034467s][吞吐率：29.01req/s] [内存消耗：3,975.79kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000736s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 408  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (139 , 408 , '2019-05-06' , 1557149592) [ RunTime:0.002471s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:12+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.068386s][吞吐率：14.62req/s] [内存消耗：4,469.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000363s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000987s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000924s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.002797s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 408 LIMIT 1 [ RunTime:0.000660s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 408  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000394s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000539s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 408 LIMIT 1 [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 408 LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 408 LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 408 LIMIT 1 [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 408 LIMIT 1 [ RunTime:0.000534s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001151s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:12+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.044260s][吞吐率：22.59req/s] [内存消耗：3,992.45kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000773s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:12+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.106543s][吞吐率：9.39req/s] [内存消耗：4,469.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000298s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000712s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000742s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 408 LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 408  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000459s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 408 LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 408 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 408 LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 408 LIMIT 1 [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 408 LIMIT 1 [ RunTime:0.000490s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001004s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:17+08:00 ] 172.31.69.247 211.94.192.251 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017234s][吞吐率：58.03req/s] [内存消耗：1,987.17kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-05-06T21:33:18+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/paper_list?OS=iOS&exam=1&id=139&type=1&version=1.0.8
[ log ] api.kzwchina.com/common/study/paper_list?OS=iOS&exam=1&id=139&type=1&version=1.0.8 [运行时间：0.032749s][吞吐率：30.54req/s] [内存消耗：4,055.60kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'exam' => '1',
  'id' => '139',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->PaperList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001011s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000899s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT `p`.`id`,`p`.`title`,`p`.`photo`,(SELECT COUNT(*) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=408) num,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=408 AND `status`=1) is_paper FROM `tpn_paper` `p` WHERE  `p`.`type` = '1'  AND `p`.`class_id` = '139'  AND `p`.`start_time` <= '2019-05-06 21:33'  AND `p`.`end_time` >= '2019-05-06 21:33' [ RunTime:0.000516s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:20+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/paper_list?OS=iOS&exam=1&id=139&type=1&version=1.0.8
[ log ] api.kzwchina.com/common/study/paper_list?OS=iOS&exam=1&id=139&type=1&version=1.0.8 [运行时间：0.032332s][吞吐率：30.93req/s] [内存消耗：4,055.60kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'exam' => '1',
  'id' => '139',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->PaperList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT `p`.`id`,`p`.`title`,`p`.`photo`,(SELECT COUNT(*) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=408) num,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=408 AND `status`=1) is_paper FROM `tpn_paper` `p` WHERE  `p`.`type` = '1'  AND `p`.`class_id` = '139'  AND `p`.`start_time` <= '2019-05-06 21:33'  AND `p`.`end_time` >= '2019-05-06 21:33' [ RunTime:0.000554s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:21+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/paper_list?OS=iOS&exam=2&id=139&type=1&version=1.0.8
[ log ] api.kzwchina.com/common/study/paper_list?OS=iOS&exam=2&id=139&type=1&version=1.0.8 [运行时间：0.032227s][吞吐率：31.03req/s] [内存消耗：4,055.60kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'exam' => '2',
  'id' => '139',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->PaperList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000889s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000731s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper` [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT `p`.`id`,`p`.`title`,`p`.`photo`,(SELECT COUNT(*) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=408) num,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=408 AND `status`=1) is_paper FROM `tpn_paper` `p` WHERE  `p`.`type` = '1'  AND `p`.`class_id` = '139'  AND `p`.`start_time` <= '2019-05-06 21:33'  AND `p`.`end_time` >= '2019-05-06 21:33' [ RunTime:0.000528s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:24+08:00 ] 172.31.69.247 211.94.192.251 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036964s][吞吐率：27.05req/s] [内存消耗：4,130.65kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000736s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149604 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000785s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149604 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149604 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=408) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149604 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000869s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:33:27+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.069506s][吞吐率：14.39req/s] [内存消耗：4,469.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000500s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001192s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.001006s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 408 LIMIT 1 [ RunTime:0.000742s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000664s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 408  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000407s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 408 LIMIT 1 [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 408 LIMIT 1 [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 408 LIMIT 1 [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 408 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 408 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001056s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 595 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 428 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 557 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000234s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:27+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.076666s][吞吐率：13.04req/s] [内存消耗：3,992.45kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000762s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000273s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:27+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.122152s][吞吐率：8.19req/s] [内存消耗：4,469.97kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000300s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 408 LIMIT 1 [ RunTime:0.000574s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 408  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000479s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 408 LIMIT 1 [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 408 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 408 LIMIT 1 [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 408 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 408 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000980s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000224s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:31+08:00 ] 172.31.69.247 211.94.192.251 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036577s][吞吐率：27.34req/s] [内存消耗：4,130.65kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000743s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149611 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000785s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149611 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149611 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=408) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557149611 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000864s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:33:32+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031889s][吞吐率：31.36req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000796s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000314s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:34+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/course/course_type?OS=iOS&enterprise_id=28&type=1&version=1.0.8
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=28&type=1&version=1.0.8 [运行时间：0.031637s][吞吐率：31.61req/s] [内存消耗：3,912.06kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '28',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000858s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000768s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 28  AND `type` = 1 [ RunTime:0.000267s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:34+08:00 ] 172.31.69.247 211.94.192.251 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.033896s][吞吐率：29.50req/s] [内存消耗：3,999.21kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'type' => '1',
  'type_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000377s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000961s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000898s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000766s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000442s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-05-06T21:33:34+08:00 ] 172.31.69.247 211.94.192.251 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.035524s][吞吐率：28.15req/s] [内存消耗：3,999.33kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'type' => '1',
  'type_id' => '39',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000738s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '1'  AND `a`.`type_id` = '39' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '1'  AND `a`.`type_id` = '39' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000382s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-05-06T21:33:36+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031352s][吞吐率：31.90req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000509s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000904s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000728s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:37+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/course/course_type?OS=iOS&enterprise_id=28&type=2&version=1.0.8
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=28&type=2&version=1.0.8 [运行时间：0.031523s][吞吐率：31.72req/s] [内存消耗：3,910.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '28',
  'type' => '2',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000903s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000741s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 28  AND `type` = 2 [ RunTime:0.000257s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:38+08:00 ] 172.31.69.247 211.94.192.251 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.032566s][吞吐率：30.71req/s] [内存消耗：3,999.21kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'type' => '2',
  'type_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000784s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '2' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '2' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000403s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-05-06T21:33:39+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031647s][吞吐率：31.60req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000907s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000750s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000296s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:40+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/communication?OS=iOS&enterprise_id=28&page=1&version=1.0.8
[ log ] api.kzwchina.com/common/user/communication?OS=iOS&enterprise_id=28&page=1&version=1.0.8 [运行时间：0.033405s][吞吐率：29.94req/s] [内存消耗：4,022.91kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '28',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000873s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 408 LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 408 ORDER BY level desc LIMIT 0,10 [ RunTime:0.000873s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:46+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/communication?OS=iOS&enterprise_id=28&page=1&version=1.0.8
[ log ] api.kzwchina.com/common/user/communication?OS=iOS&enterprise_id=28&page=1&version=1.0.8 [运行时间：0.033133s][吞吐率：30.18req/s] [内存消耗：4,022.91kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '28',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000883s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 408 LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 408 ORDER BY level desc LIMIT 0,10 [ RunTime:0.000845s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:51+08:00 ] 172.31.69.247 211.94.192.251 GET /common/study/discussdetails?OS=iOS&id=394&type=1&version=1.0.8
[ log ] api.kzwchina.com/common/study/discussdetails?OS=iOS&id=394&type=1&version=1.0.8 [运行时间：0.033767s][吞吐率：29.61req/s] [内存消耗：4,109.16kb] [文件加载：64]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '394',
  'type' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->DiscussDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000956s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000873s ]
[ sql ] [ SQL ] SELECT uid as id,face as photo,`name`,`name_hide`,`nickname`,`sex`,`company_name`,`unit_title`,`email` FROM `tpn_user` WHERE  `uid` = 394 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` ORDER BY date desc [ RunTime:0.000233s ]

---------------------------------------------------------------
[ 2019-05-06T21:33:54+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031402s][吞吐率：31.85req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000734s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000319s ]

---------------------------------------------------------------
[ 2019-05-06T21:34:03+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031902s][吞吐率：31.35req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000931s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000917s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000317s ]

---------------------------------------------------------------
[ 2019-05-06T21:34:13+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.032655s][吞吐率：30.62req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000748s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000313s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000412s ]

---------------------------------------------------------------
[ 2019-05-06T21:34:15+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.032769s][吞吐率：30.52req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000402s ]

---------------------------------------------------------------
[ 2019-05-06T21:34:19+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&type=2&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=2&version=1.0.8 [运行时间：0.031776s][吞吐率：31.47req/s] [内存消耗：3,877.62kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '2',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000930s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000735s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000333s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000421s ]

---------------------------------------------------------------
[ 2019-05-06T21:34:26+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&type=3&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=3&version=1.0.8 [运行时间：0.032637s][吞吐率：30.64req/s] [内存消耗：3,873.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '3',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000392s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000985s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000908s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000289s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 3  AND `status` = 1 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 3  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000415s ]

---------------------------------------------------------------
[ 2019-05-06T21:34:28+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=55
[ log ] api.kzwchina.com/discover/introduce/details?id=55 [运行时间：0.025518s][吞吐率：39.19req/s] [内存消耗：3,294.55kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '55',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000811s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 55 LIMIT 1 [ RunTime:0.000418s ]

---------------------------------------------------------------
[ 2019-05-06T21:44:56+08:00 ] 172.31.69.247 116.243.130.113 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.043372s][吞吐率：23.06req/s] [内存消耗：4,172.03kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '63',
)
[ info ] [ PARAM ] array (
  'cid' => '401',
  'course_time' => '7869.568000',
  'time' => '1425.200000',
  'type' => '1',
  'uid' => '570',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000400s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000910s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001150s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 570  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1372 [ RunTime:0.004764s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (570 , 401 , 1425.2 , 1 , 7869.568) [ RunTime:0.004584s ]

---------------------------------------------------------------
[ 2019-05-06T21:44:56+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.034362s][吞吐率：29.10req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000357s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000859s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150296 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150296 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150296 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150296 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000756s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:45:00+08:00 ] 172.31.69.247 59.109.152.25 POST /common/login/login
[ log ] api.kzwchina.com/common/login/login [运行时间：0.037804s][吞吐率：26.45req/s] [内存消耗：4,023.82kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'login',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7bd3eee0da0e65481853eee6c21fbb0d',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '50',
)
[ info ] [ PARAM ] array (
  'login_type' => 'phone',
  'password' => '123456',
  'phone' => '13811070401',
)
[ info ] [ RUN ] app\api\common\controller\Login->login[ /www/wwwroot/kouzhiwen/application/api/common/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  (  username='13811070401' OR phone='13811070401' ) LIMIT 1 [ RunTime:0.000778s ]
[ sql ] [ SQL ] UPDATE `tpn_user`  SET `logintoken`='b71cd2850c61152e7200c4b7042ee0a4',`deviceToken`=NULL  WHERE  `uid` = 445 [ RunTime:0.004382s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 28 LIMIT 1 [ RunTime:0.000317s ]
[ error ] [8]未定义数组索引: deviceToken[/www/wwwroot/kouzhiwen/application/common/model/User.php:116]

---------------------------------------------------------------
[ 2019-05-06T21:45:00+08:00 ] 172.31.69.247 59.109.152.25 GET /common/user/my_info?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.8 [运行时间：0.139018s][吞吐率：7.19req/s] [内存消耗：5,163.07kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000888s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003119s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:00+08:00 ] 172.31.69.247 116.243.130.113 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.043385s][吞吐率：23.05req/s] [内存消耗：3,985.28kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000828s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000910s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 570  AND `reading` = 0 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:00+08:00 ] 172.31.69.247 59.109.152.25 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.049260s][吞吐率：20.30req/s] [内存消耗：4,193.71kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000771s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 28 LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 28  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '28'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000740s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 28  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000884s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 28 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:00+08:00 ] 172.31.69.247 59.109.152.25 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.064514s][吞吐率：15.50req/s] [内存消耗：3,985.19kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000359s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000733s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000732s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 445  AND `reading` = 0 LIMIT 1 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:02+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037599s][吞吐率：26.60req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000485s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000888s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150302 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150302 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150302 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150302 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000749s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:45:04+08:00 ] 172.31.69.247 59.109.152.25 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036415s][吞吐率：27.46req/s] [内存消耗：4,130.68kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000858s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000811s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150304 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000794s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150304 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150304 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=445) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150304 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000685s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:45:05+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.055283s][吞吐率：18.09req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000909s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001114s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000472s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000493s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001020s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 492 ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 480 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 440 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 420 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 461 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 408 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 414 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 574 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 399 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 450 ORDER BY date desc [ RunTime:0.000241s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:05+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.054089s][吞吐率：18.49req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000359s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000917s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000466s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000472s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000938s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 485 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 570 ORDER BY date desc [ RunTime:0.000241s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:05+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.030351s][吞吐率：32.95req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000364s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000839s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000300s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:07+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036470s][吞吐率：27.42req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001088s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150307 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000781s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150307 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150307 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150307 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000676s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:45:12+08:00 ] 172.31.69.247 116.243.130.113 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031829s][吞吐率：31.42req/s] [内存消耗：3,985.28kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000913s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 570  AND `reading` = 0 LIMIT 1 [ RunTime:0.000315s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:15+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036550s][吞吐率：27.36req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000866s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150315 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150315 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150315 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150315 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000741s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:45:21+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.037311s][吞吐率：26.80req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000911s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000769s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000426s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000588s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:21+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.070045s][吞吐率：14.28req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001152s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000691s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001050s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000222s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:21+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.107445s][吞吐率：9.31req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000937s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000441s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000468s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001011s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 595 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 428 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 557 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:21+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.116900s][吞吐率：8.55req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000827s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000275s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:22+08:00 ] 172.31.69.247 116.243.130.113 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017075s][吞吐率：58.56req/s] [内存消耗：1,987.17kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-05-06T21:45:41+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.069969s][吞吐率：14.29req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001145s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001261s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000702s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000446s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000395s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000949s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000232s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:41+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.081582s][吞吐率：12.26req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000781s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000810s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000301s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:41+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.092821s][吞吐率：10.77req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001118s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000453s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000446s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000479s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001013s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 485 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 570 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 492 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 480 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 440 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 420 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 461 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 408 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 414 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 574 ORDER BY date desc [ RunTime:0.000226s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:43+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.036831s][吞吐率：27.15req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000873s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000783s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000422s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000727s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000383s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:47+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036415s][吞吐率：27.46req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000920s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150347 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000786s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150347 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150347 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150347 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000685s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:45:49+08:00 ] 172.31.69.247 116.243.130.113 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016772s][吞吐率：59.62req/s] [内存消耗：1,987.17kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-05-06T21:45:50+08:00 ] 172.31.69.247 59.109.152.25 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031417s][吞吐率：31.83req/s] [内存消耗：3,985.19kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000783s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 445  AND `reading` = 0 LIMIT 1 [ RunTime:0.000311s ]

---------------------------------------------------------------
[ 2019-05-06T21:45:51+08:00 ] 172.31.69.247 59.109.152.25 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036079s][吞吐率：27.72req/s] [内存消耗：4,130.68kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000450s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000788s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000792s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=445) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000666s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:45:51+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035735s][吞吐率：27.98req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000905s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000769s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150351 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000880s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:46:12+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.036508s][吞吐率：27.39req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000918s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000791s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000423s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000585s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000730s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000369s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:17+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.037370s][吞吐率：26.76req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000921s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000788s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000425s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000367s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:20+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.061635s][吞吐率：16.22req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001135s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000703s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001148s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 485 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 570 ORDER BY date desc [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 492 ORDER BY date desc [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 480 ORDER BY date desc [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 440 ORDER BY date desc [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 420 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 461 ORDER BY date desc [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 408 ORDER BY date desc [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:20+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.068079s][吞吐率：14.69req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000910s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000866s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000582s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000455s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000931s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000222s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:20+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.094091s][吞吐率：10.63req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000307s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000952s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000265s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:22+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036843s][吞吐率：27.14req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000855s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001144s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150382 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150382 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150382 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150382 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000752s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:46:31+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.036897s][吞吐率：27.10req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000789s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000413s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000386s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:41+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/typelist?OS=iOS&enterprise_id=28&version=1.0.8
[ log ] api.kzwchina.com/common/study/typelist?OS=iOS&enterprise_id=28&version=1.0.8 [运行时间：0.032147s][吞吐率：31.11req/s] [内存消耗：4,050.39kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '28',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->typelist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000837s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_type` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 28  AND `up` = 0 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_type` WHERE  `enterprise_id` = 28  AND `up` > 0 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:45+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.069461s][吞吐率：14.40req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000479s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001164s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000367s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000450s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000953s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 485 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 570 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:45+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.109714s][吞吐率：9.11req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000337s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000999s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000463s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000496s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000934s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 492 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 480 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 440 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 420 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 461 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 408 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 414 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 574 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 399 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 450 ORDER BY date desc [ RunTime:0.000241s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:45+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.117493s][吞吐率：8.51req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000322s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000956s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-05-06T21:46:46+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036224s][吞吐率：27.61req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000887s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150406 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150406 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150406 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150406 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000757s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:46:50+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.036826s][吞吐率：27.15req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000909s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000796s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000419s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000732s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:21+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.062628s][吞吐率：15.97req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000504s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000871s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000468s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000472s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000510s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000955s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 485 ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 570 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 492 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 480 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 440 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 420 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 461 ORDER BY date desc [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 408 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 414 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 574 ORDER BY date desc [ RunTime:0.000241s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:21+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.101000s][吞吐率：9.90req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000332s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000830s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000461s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000458s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000482s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000925s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:21+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.036805s][吞吐率：27.17req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000858s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000829s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000420s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000394s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:23+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.032187s][吞吐率：31.07req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001068s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000296s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:33+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.036532s][吞吐率：27.37req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000778s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000418s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000728s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000363s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:51+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037143s][吞吐率：26.92req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000444s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000920s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150471 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000780s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150471 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150471 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150471 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000879s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:47:52+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.037305s][吞吐率：26.81req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000751s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000414s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000753s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000357s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:56+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.077545s][吞吐率：12.90req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000472s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001178s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000503s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000460s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001012s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000238s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:56+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.078737s][吞吐率：12.70req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000897s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-05-06T21:47:57+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.103918s][吞吐率：9.62req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000984s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000443s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000960s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 595 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 428 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 557 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000237s ]

---------------------------------------------------------------
[ 2019-05-06T21:48:13+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036363s][吞吐率：27.50req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001080s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150493 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000805s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150493 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150493 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150493 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000774s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:48:23+08:00 ] 172.31.69.247 116.243.130.113 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031655s][吞吐率：31.59req/s] [内存消耗：3,985.28kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000906s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000902s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 570  AND `reading` = 0 LIMIT 1 [ RunTime:0.000320s ]

---------------------------------------------------------------
[ 2019-05-06T21:48:36+08:00 ] 172.31.69.247 59.109.152.25 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031746s][吞吐率：31.50req/s] [内存消耗：3,985.19kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000863s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 445  AND `reading` = 0 LIMIT 1 [ RunTime:0.000333s ]

---------------------------------------------------------------
[ 2019-05-06T21:48:36+08:00 ] 172.31.69.247 59.109.152.25 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036194s][吞吐率：27.63req/s] [内存消耗：4,130.68kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000394s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000836s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000792s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150516 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000795s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150516 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150516 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=445) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557150516 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000862s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T21:48:37+08:00 ] 172.31.69.247 59.109.152.25 GET /common/study/study_details?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=139&version=1.0.8 [运行时间：0.037112s][吞吐率：26.95req/s] [内存消耗：4,146.28kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000895s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000772s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 139 LIMIT 1 [ RunTime:0.000438s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 445 LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000737s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 599 LIMIT 1 [ RunTime:0.000377s ]

---------------------------------------------------------------
[ 2019-05-06T21:48:40+08:00 ] 172.31.69.247 59.109.152.25 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031225s][吞吐率：32.03req/s] [内存消耗：3,985.19kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=aje6edmgm11dsf9c1qrpdcj036',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'b71cd2850c61152e7200c4b7042ee0a4',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'b71cd2850c61152e7200c4b7042ee0a4' LIMIT 1 [ RunTime:0.000804s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 445  AND `reading` = 0 LIMIT 1 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-05-06T21:56:33+08:00 ] 172.31.69.247 211.103.241.189 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.038029s][吞吐率：26.30req/s] [内存消耗：4,125.47kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '2f9aa559e7c16d2ffbbd24eda4a322fc',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '35',
)
[ info ] [ PARAM ] array (
  'uid' => '577',
  'cid' => '407',
  'time' => '2840200',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '2f9aa559e7c16d2ffbbd24eda4a322fc' LIMIT 1 [ RunTime:0.001116s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 577  AND `classcourse_id` = 407  AND `type` = 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (577 , 407 , 2840200 , 1 , NULL) [ RunTime:0.005149s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-06T21:57:51+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=55
[ log ] api.kzwchina.com/discover/introduce/details?id=55 [运行时间：0.025627s][吞吐率：39.02req/s] [内存消耗：3,294.55kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '55',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 55 LIMIT 1 [ RunTime:0.000391s ]

---------------------------------------------------------------
[ 2019-05-06T21:58:12+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/banner?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/banner?OS=iOS&version=1.0.8 [运行时间：0.042011s][吞吐率：23.80req/s] [内存消耗：4,022.66kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000867s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000766s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000392s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course` WHERE  `id` = 192 LIMIT 1 [ RunTime:0.000317s ]

---------------------------------------------------------------
[ 2019-05-06T21:58:12+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.049940s][吞吐率：20.02req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000348s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000716s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000283s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000402s ]

---------------------------------------------------------------
[ 2019-05-06T21:58:15+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&type=4&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=4&version=1.0.8 [运行时间：0.031708s][吞吐率：31.54req/s] [内存消耗：3,873.13kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '4',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000983s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000823s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000394s ]

---------------------------------------------------------------
[ 2019-05-06T21:58:16+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=44
[ log ] api.kzwchina.com/discover/introduce/details?id=44 [运行时间：0.025826s][吞吐率：38.72req/s] [内存消耗：3,294.62kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '44',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000786s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 44 LIMIT 1 [ RunTime:0.000410s ]

---------------------------------------------------------------
[ 2019-05-06T21:59:52+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.032558s][吞吐率：30.71req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001017s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000734s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000297s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000379s ]

---------------------------------------------------------------
[ 2019-05-06T22:00:14+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=63
[ log ] api.kzwchina.com/discover/introduce/details?id=63 [运行时间：0.026040s][吞吐率：38.40req/s] [内存消耗：3,301.28kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '63',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000491s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000764s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 63 LIMIT 1 [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-05-06T22:00:50+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.032742s][吞吐率：30.54req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000970s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000834s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000391s ]

---------------------------------------------------------------
[ 2019-05-06T22:00:58+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.032573s][吞吐率：30.70req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000813s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000309s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000394s ]

---------------------------------------------------------------
[ 2019-05-06T22:01:03+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&type=3&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=3&version=1.0.8 [运行时间：0.032369s][吞吐率：30.89req/s] [内存消耗：3,873.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '3',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 3  AND `status` = 1 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 3  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000412s ]

---------------------------------------------------------------
[ 2019-05-06T22:01:06+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&type=2&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=2&version=1.0.8 [运行时间：0.032491s][吞吐率：30.78req/s] [内存消耗：3,877.62kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '2',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000300s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000415s ]

---------------------------------------------------------------
[ 2019-05-06T22:01:09+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=51
[ log ] api.kzwchina.com/discover/introduce/details?id=51 [运行时间：0.025774s][吞吐率：38.80req/s] [内存消耗：3,294.56kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '51',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000923s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 51 LIMIT 1 [ RunTime:0.000405s ]

---------------------------------------------------------------
[ 2019-05-06T22:03:03+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=54
[ log ] api.kzwchina.com/discover/introduce/details?id=54 [运行时间：0.024981s][吞吐率：40.03req/s] [内存消耗：3,294.56kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '54',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 54 LIMIT 1 [ RunTime:0.000406s ]

---------------------------------------------------------------
[ 2019-05-06T22:03:24+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=53
[ log ] api.kzwchina.com/discover/introduce/details?id=53 [运行时间：0.025664s][吞吐率：38.96req/s] [内存消耗：3,294.63kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '53',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000391s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000819s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 53 LIMIT 1 [ RunTime:0.000394s ]

---------------------------------------------------------------
[ 2019-05-06T22:03:50+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=52
[ log ] api.kzwchina.com/discover/introduce/details?id=52 [运行时间：0.025802s][吞吐率：38.76req/s] [内存消耗：3,294.55kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '52',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000404s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000746s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 52 LIMIT 1 [ RunTime:0.000422s ]

---------------------------------------------------------------
[ 2019-05-06T22:04:43+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&type=2&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&type=2&version=1.0.8 [运行时间：0.032296s][吞吐率：30.96req/s] [内存消耗：3,877.62kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'type' => '2',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000893s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000291s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000426s ]

---------------------------------------------------------------
[ 2019-05-06T22:04:46+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=51
[ log ] api.kzwchina.com/discover/introduce/details?id=51 [运行时间：0.025268s][吞吐率：39.58req/s] [内存消耗：3,294.56kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '51',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000755s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 51 LIMIT 1 [ RunTime:0.000403s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:03+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.032662s][吞吐率：30.62req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000890s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000292s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000409s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:05+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.032238s][吞吐率：31.02req/s] [内存消耗：3,901.70kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000915s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000826s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000333s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 6  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000400s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:07+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=59
[ log ] api.kzwchina.com/discover/introduce/details?id=59 [运行时间：0.026174s][吞吐率：38.21req/s] [内存消耗：3,294.63kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '59',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000742s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 59 LIMIT 1 [ RunTime:0.000409s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:27+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.030923s][吞吐率：32.34req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000780s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000328s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:31+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_list?OS=iOS&page=1&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_list?OS=iOS&page=1&version=1.0.8 [运行时间：0.033272s][吞吐率：30.06req/s] [内存消耗：4,065.05kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000927s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000742s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` `n` WHERE  `n`.`uid` = 408 ORDER BY n.created_at desc LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `n`.`id`,`n`.`title`,`n`.`content`,`n`.`reading`,`n`.`type`,`n`.`type_id`,`n`.`created_at`,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_user_collect` WHERE TYPE =4 AND type_id=n.id) is_collect FROM `tpn_user_notice` `n` WHERE  `n`.`uid` = 408 ORDER BY n.created_at desc LIMIT 0,10 [ RunTime:0.000503s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:34+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.032240s][吞吐率：31.02req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000916s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000754s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:42+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/course/course_type?OS=iOS&enterprise_id=28&type=2&version=1.0.8
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=28&type=2&version=1.0.8 [运行时间：0.031505s][吞吐率：31.74req/s] [内存消耗：3,910.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '28',
  'type' => '2',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000881s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000732s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 28  AND `type` = 2 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:42+08:00 ] 172.31.69.247 211.94.192.251 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.032509s][吞吐率：30.76req/s] [内存消耗：3,999.21kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'type' => '2',
  'type_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000774s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000744s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '2' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '28'  AND `a`.`type` = '2' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000404s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-05-06T22:05:44+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.032604s][吞吐率：30.67req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000895s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000752s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:46+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.031466s][吞吐率：31.78req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000942s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000297s ]

---------------------------------------------------------------
[ 2019-05-06T22:05:48+08:00 ] 172.31.69.247 211.94.192.251 GET /discover/introduce/details?id=36
[ log ] api.kzwchina.com/discover/introduce/details?id=36 [运行时间：0.026457s][吞吐率：37.80req/s] [内存消耗：3,359.12kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '36',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000754s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 36 LIMIT 1 [ RunTime:0.000442s ]

---------------------------------------------------------------
[ 2019-05-06T22:13:00+08:00 ] 172.31.69.247 211.94.192.251 GET /common/user/notice_count?OS=iOS&version=1.0.8
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.8 [运行时间：0.030866s][吞吐率：32.40req/s] [内存消耗：3,985.25kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=dn8ca6sql6el24eq80hnvsri65',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'af995b78111b2b0dd067296ee885b767',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1, en-CN;q=0.9',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'af995b78111b2b0dd067296ee885b767' LIMIT 1 [ RunTime:0.000782s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 408  AND `reading` = 0 LIMIT 1 [ RunTime:0.000331s ]

---------------------------------------------------------------
[ 2019-05-06T22:13:58+08:00 ] 172.31.69.247 117.136.0.214 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.120735s][吞吐率：8.28req/s] [内存消耗：5,161.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000855s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000747s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003098s ]

---------------------------------------------------------------
[ 2019-05-06T22:13:59+08:00 ] 172.31.69.247 117.136.0.214 GET /common/home/index?enterprise_id=28
[ log ] api.kzwchina.com/common/home/index?enterprise_id=28 [运行时间：0.049416s][吞吐率：20.24req/s] [内存消耗：4,193.75kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001153s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000978s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000785s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 28 LIMIT 1 [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 28  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000782s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '28'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000429s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 28  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000946s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 28 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000362s ]

---------------------------------------------------------------
[ 2019-05-06T22:13:59+08:00 ] 172.31.69.247 117.136.0.214 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043565s][吞吐率：22.95req/s] [内存消耗：3,983.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000662s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 399  AND `reading` = 0 LIMIT 1 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-05-06T22:14:08+08:00 ] 172.31.69.247 117.136.0.214 POST /discover/teacher/teacher_type
[ log ] api.kzwchina.com/discover/teacher/teacher_type [运行时间：0.030163s][吞吐率：33.15req/s] [内存消耗：3,948.32kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'teacher',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Teacher->TeacherType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Teacher.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000872s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000719s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_type` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher_type` WHERE  `enterprise_id` = 28 [ RunTime:0.000251s ]

---------------------------------------------------------------
[ 2019-05-06T22:14:08+08:00 ] 172.31.69.247 117.136.0.214 POST /discover/teacher/teacher_list
[ log ] api.kzwchina.com/discover/teacher/teacher_list [运行时间：0.033105s][吞吐率：30.21req/s] [内存消耗：3,981.63kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'teacher',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '38',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'teacher_type' => '0',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Teacher->TeacherList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Teacher.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000748s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000747s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000785s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_teacher` WHERE  `enterprise_id` = 28  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' LIMIT 1 [ RunTime:0.000772s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`nickname`,`photo`,`consult_num`,`brief`,`level`,`phone` FROM `tpn_teacher` WHERE  `enterprise_id` = 28  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY created_at desc LIMIT 0,10 [ RunTime:0.000609s ]

---------------------------------------------------------------
[ 2019-05-06T22:14:15+08:00 ] 172.31.69.247 117.136.0.214 GET /common/user/communication?enterprise_id=28&page=1
[ log ] api.kzwchina.com/common/user/communication?enterprise_id=28&page=1 [运行时间：0.033459s][吞吐率：29.89req/s] [内存消耗：4,021.48kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000767s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 399 LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 399 ORDER BY level desc LIMIT 0,10 [ RunTime:0.000849s ]

---------------------------------------------------------------
[ 2019-05-06T22:14:15+08:00 ] 172.31.69.247 117.136.0.214 GET /common/user/communication?enterprise_id=28&page=2
[ log ] api.kzwchina.com/common/user/communication?enterprise_id=28&page=2 [运行时间：0.032027s][吞吐率：31.22req/s] [内存消耗：4,021.44kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000362s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000739s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000714s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 399 LIMIT 1 [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 399 ORDER BY level desc LIMIT 10,10 [ RunTime:0.000829s ]

---------------------------------------------------------------
[ 2019-05-06T22:14:20+08:00 ] 172.31.69.247 117.136.0.214 GET /common/user/communication?enterprise_id=28&page=3
[ log ] api.kzwchina.com/common/user/communication?enterprise_id=28&page=3 [运行时间：0.033666s][吞吐率：29.70req/s] [内存消耗：4,021.44kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '3',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 399 LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 28  AND `uid` <> 399 ORDER BY level desc LIMIT 20,10 [ RunTime:0.000817s ]

---------------------------------------------------------------
[ 2019-05-06T22:14:22+08:00 ] 172.31.69.247 117.136.0.214 GET /common/study/discussdetails?id=402&type=1
[ log ] api.kzwchina.com/common/study/discussdetails?id=402&type=1 [运行时间：0.033790s][吞吐率：29.59req/s] [内存消耗：4,107.72kb] [文件加载：64]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'faf1908cc0acc40cd3bcd80bd16129b5',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '402',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->DiscussDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'faf1908cc0acc40cd3bcd80bd16129b5' LIMIT 1 [ RunTime:0.000823s ]
[ sql ] [ SQL ] SELECT uid as id,face as photo,`name`,`name_hide`,`nickname`,`sex`,`company_name`,`unit_title`,`email` FROM `tpn_user` WHERE  `uid` = 402 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` ORDER BY date desc [ RunTime:0.000227s ]

---------------------------------------------------------------
[ 2019-05-06T23:08:46+08:00 ] 172.31.69.247 116.243.130.113 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036750s][吞吐率：27.21req/s] [内存消耗：4,130.54kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000855s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001004s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557155326 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000789s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557155326 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557155326 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=570) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557155326 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000666s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-06T23:08:49+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.065740s][吞吐率：15.21req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001164s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.002767s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000538s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001135s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 414 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 574 ORDER BY date desc [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 399 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 450 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 595 ORDER BY date desc [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 428 ORDER BY date desc [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 557 ORDER BY date desc [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-05-06T23:08:49+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/class_course_list?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=139&version=1.0.8 [运行时间：0.086326s][吞吐率：11.58req/s] [内存消耗：4,469.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000364s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000861s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 570 LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 570  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-06' LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000455s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 570 LIMIT 1 [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 570 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 570 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 570 LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 570 LIMIT 1 [ RunTime:0.000471s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001028s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 417 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-05-06T23:08:49+08:00 ] 172.31.69.247 116.243.130.113 GET /common/study/getclasstime?OS=iOS&id=139&version=1.0.8
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=139&version=1.0.8 [运行时间：0.076709s][吞吐率：13.04req/s] [内存消耗：3,992.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '139',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000761s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000871s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-05-06T23:08:58+08:00 ] 172.31.69.247 116.243.130.113 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038578s][吞吐率：25.92req/s] [内存消耗：4,108.98kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000861s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000905s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000596s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 401 [ RunTime:0.002995s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 401 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 570  AND `type` = 3  AND `type_id` = 401 LIMIT 1 [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-05-06T23:08:59+08:00 ] 172.31.69.247 116.243.130.113 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040926s][吞吐率：24.43req/s] [内存消耗：3,941.69kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000827s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001130s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='570') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000460s ]

---------------------------------------------------------------
[ 2019-05-06T23:08:59+08:00 ] 172.31.69.247 116.243.130.113 GET /common/user/aftertime?OS=iOS&cid=401&type=1&uid=570&version=1.0.8
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=401&type=1&uid=570&version=1.0.8 [运行时间：0.056013s][吞吐率：17.85req/s] [内存消耗：3,990.03kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '401',
  'type' => '1',
  'uid' => '570',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000817s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 570  AND `classcourse_id` = 401  AND `type` = 1 LIMIT 1 [ RunTime:0.000435s ]

---------------------------------------------------------------
[ 2019-05-06T23:28:34+08:00 ] 172.31.69.247 116.243.130.113 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.069872s][吞吐率：14.31req/s] [内存消耗：4,172.04kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '63',
)
[ info ] [ PARAM ] array (
  'cid' => '401',
  'course_time' => '7869.568000',
  'time' => '2587.316000',
  'type' => '1',
  'uid' => '570',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001187s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 570  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1380 [ RunTime:0.004087s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (570 , 401 , 2587.316 , 1 , 7869.568) [ RunTime:0.003736s ]

---------------------------------------------------------------
[ 2019-05-06T23:28:34+08:00 ] 172.31.69.247 116.243.130.113 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.060204s][吞吐率：16.61req/s] [内存消耗：4,108.98kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '407',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000730s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000916s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000529s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 407 [ RunTime:0.009128s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 407 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 570  AND `type` = 3  AND `type_id` = 407 LIMIT 1 [ RunTime:0.000459s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000275s ]

---------------------------------------------------------------
[ 2019-05-06T23:28:34+08:00 ] 172.31.69.247 116.243.130.113 GET /common/user/aftertime?OS=iOS&cid=407&type=1&uid=570&version=1.0.8
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=407&type=1&uid=570&version=1.0.8 [运行时间：0.116242s][吞吐率：8.60req/s] [内存消耗：3,990.03kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'accept-language' => 'zh-Hans;q=1',
  'version' => '1.0.8',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '407',
  'type' => '1',
  'uid' => '570',
  'version' => '1.0.8',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.001009s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 570  AND `classcourse_id` = 407  AND `type` = 1 LIMIT 1 [ RunTime:0.000541s ]

---------------------------------------------------------------
[ 2019-05-06T23:28:34+08:00 ] 172.31.69.247 116.243.130.113 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.126382s][吞吐率：7.91req/s] [内存消耗：3,941.69kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.8',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans;q=1',
  'logintoken' => 'aa3d2328c29da95f472a38fafbf94d96',
  'user-agent' => 'kouzhiwen/1.0.8 (iPhone; iOS 12.2; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lm8khhcqh5r1pitt6306p16pk6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '407',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000719s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'aa3d2328c29da95f472a38fafbf94d96' LIMIT 1 [ RunTime:0.000821s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '407' ORDER BY id desc LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='570') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '407' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000462s ]

---------------------------------------------------------------
