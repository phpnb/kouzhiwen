[ 2019-05-07T22:26:50+08:00 ] 172.31.69.247 223.72.54.91 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016133s][吞吐率：61.99req/s] [内存消耗：1,986.86kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'user-agent' => 'Dalvik/2.1.0 (Linux; U; Android 9; HMA-AL00 Build/HUAWEIHMA-AL00)',
  'host' => 'api.kzwchina.com',
  'connection' => 'Keep-Alive',
  'accept-encoding' => 'gzip',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-05-07T22:26:50+08:00 ] 172.31.69.247 223.72.54.91 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017598s][吞吐率：56.82req/s] [内存消耗：1,986.93kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'user-agent' => 'Dalvik/2.1.0 (Linux; U; Android 9; HMA-AL00 Build/HUAWEIHMA-AL00)',
  'host' => 'api.kzwchina.com',
  'connection' => 'Keep-Alive',
  'accept-encoding' => 'gzip',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-05-07T22:26:56+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.044838s][吞吐率：22.30req/s] [内存消耗：3,985.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001088s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001205s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 LIMIT 1 [ RunTime:0.000629s ]

---------------------------------------------------------------
[ 2019-05-07T22:26:56+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.055671s][吞吐率：17.96req/s] [内存消耗：4,109.60kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '403',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000875s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001088s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001205s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000657s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 403 [ RunTime:0.002999s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 403 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 403 LIMIT 1 [ RunTime:0.000430s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (571 , 3 , 403 , 1557239216) [ RunTime:0.002179s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-05-07T22:26:56+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032871s][吞吐率：30.42req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '403',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000815s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000879s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 1 [ RunTime:0.000377s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000461s ]

---------------------------------------------------------------
[ 2019-05-07T22:27:00+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.042048s][吞吐率：23.78req/s] [内存消耗：3,981.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000959s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000975s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 571  AND `cid` = 403 LIMIT 1 [ RunTime:0.000405s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (571 , 403 , 2) [ RunTime:0.004246s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 571  AND `cid` = 403 [ RunTime:0.004745s ]

---------------------------------------------------------------
[ 2019-05-07T22:41:20+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.039483s][吞吐率：25.33req/s] [内存消耗：4,125.47kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'time' => '741766',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000895s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000911s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (571 , 403 , 741766 , 1 , NULL) [ RunTime:0.006597s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T22:42:36+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.066416s][吞吐率：15.06req/s] [内存消耗：4,234.32kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'time' => '763416',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000928s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000893s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 [ RunTime:0.000448s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1435 [ RunTime:0.011335s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (571 , 403 , 763416 , 1 , NULL) [ RunTime:0.020480s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T22:45:09+08:00 ] 172.31.69.247 116.22.135.164 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.121711s][吞吐率：8.22req/s] [内存消耗：5,161.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000925s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000923s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003017s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:10+08:00 ] 172.31.69.247 116.22.135.164 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.045305s][吞吐率：22.07req/s] [内存消耗：3,983.93kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001207s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 613  AND `reading` = 0 LIMIT 1 [ RunTime:0.000323s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:10+08:00 ] 172.31.69.247 116.22.135.164 GET /common/home/index?enterprise_id=28
[ log ] api.kzwchina.com/common/home/index?enterprise_id=28 [运行时间：0.053264s][吞吐率：18.77req/s] [内存消耗：4,193.75kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001200s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001360s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000769s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 28 LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 28  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '28'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000426s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 28  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000895s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 28 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000346s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:12+08:00 ] 172.31.69.247 116.22.135.164 GET /common/study/datalist?enterprise_id=28&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=28&page=1 [运行时间：0.037684s][吞吐率：26.54req/s] [内存消耗：4,130.86kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000938s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240312 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240312 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240312 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=613) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240312 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000750s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-07T22:45:14+08:00 ] 172.31.69.247 116.22.135.164 GET /common/study/getclasstime?id=139
[ log ] api.kzwchina.com/common/study/getclasstime?id=139 [运行时间：0.045336s][吞吐率：22.06req/s] [内存消耗：3,991.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001156s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000708s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000358s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:14+08:00 ] 172.31.69.247 116.22.135.164 GET /common/study/class_course_list?id=139
[ log ] api.kzwchina.com/common/study/class_course_list?id=139 [运行时间：0.067496s][吞吐率：14.82req/s] [内存消耗：4,467.67kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000933s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001205s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 613 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 613  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000462s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 613 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 613 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 613 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 613 LIMIT 1 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 613 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001035s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 569 ORDER BY date desc [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 494 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 531 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 577 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 394 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 445 ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 491 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000245s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:17+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.045725s][吞吐率：21.87req/s] [内存消耗：3,987.10kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001027s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001223s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 LIMIT 1 [ RunTime:0.000625s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:17+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.052817s][吞吐率：18.93req/s] [内存消耗：4,107.77kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000710s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 401 [ RunTime:0.003452s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 401 LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 613  AND `type` = 3  AND `type_id` = 401 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:17+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032449s][吞吐率：30.82req/s] [内存消耗：3,940.97kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '401',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000361s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000901s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='613') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000432s ]

---------------------------------------------------------------
[ 2019-05-07T22:45:18+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.037067s][吞吐率：26.98req/s] [内存消耗：3,979.09kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000933s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001002s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 613  AND `cid` = 401 LIMIT 1 [ RunTime:0.000410s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 613  AND `cid` = 401 [ RunTime:0.004777s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:24+08:00 ] 172.31.69.247 223.72.54.91 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.115838s][吞吐率：8.63req/s] [内存消耗：5,161.37kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000400s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000863s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001053s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003093s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:25+08:00 ] 172.31.69.247 223.72.54.91 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044115s][吞吐率：22.67req/s] [内存消耗：3,983.95kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000295s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001183s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 571  AND `reading` = 0 LIMIT 1 [ RunTime:0.000355s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:26+08:00 ] 172.31.69.247 223.72.54.91 GET /common/home/index?enterprise_id=28
[ log ] api.kzwchina.com/common/home/index?enterprise_id=28 [运行时间：0.053396s][吞吐率：18.73req/s] [内存消耗：4,193.77kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001146s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001199s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 28 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 28  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000750s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '28'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 28  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000889s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 28 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000274s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:27+08:00 ] 172.31.69.247 223.72.54.91 GET /common/study/datalist?enterprise_id=28&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=28&page=1 [运行时间：0.035802s][吞吐率：27.93req/s] [内存消耗：4,130.82kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001078s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240387 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240387 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240387 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=571) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240387 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000813s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-07T22:46:28+08:00 ] 172.31.69.247 223.72.54.91 GET /common/study/getclasstime?id=139
[ log ] api.kzwchina.com/common/study/getclasstime?id=139 [运行时间：0.045665s][吞吐率：21.90req/s] [内存消耗：3,991.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001135s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000322s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:28+08:00 ] 172.31.69.247 223.72.54.91 GET /common/study/class_course_list?id=139
[ log ] api.kzwchina.com/common/study/class_course_list?id=139 [运行时间：0.068646s][吞吐率：14.57req/s] [内存消耗：4,467.76kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001151s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001201s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 571 LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 571  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000399s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000497s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 571 LIMIT 1 [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 571 LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 571 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 571 LIMIT 1 [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 571 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001013s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 595 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 405 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 428 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 557 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 490 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 592 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000217s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:31+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.044761s][吞吐率：22.34req/s] [内存消耗：3,987.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001072s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001219s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 LIMIT 1 [ RunTime:0.000632s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:31+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.053301s][吞吐率：18.76req/s] [内存消耗：4,107.78kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '403',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001072s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001218s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000634s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 403 [ RunTime:0.005298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 403 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 403 LIMIT 1 [ RunTime:0.000409s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:31+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031492s][吞吐率：31.75req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '403',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000392s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000813s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000923s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000458s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:33+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.037065s][吞吐率：26.98req/s] [内存消耗：3,979.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000959s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 571  AND `cid` = 403 LIMIT 1 [ RunTime:0.000410s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 571  AND `cid` = 403 [ RunTime:0.005150s ]

---------------------------------------------------------------
[ 2019-05-07T22:46:58+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/getnote
[ log ] api.kzwchina.com/common/user/getnote [运行时间：0.031344s][吞吐率：31.90req/s] [内存消耗：3,979.44kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '15',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->getnote[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000874s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_note` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_note` WHERE  `uid` = 571  AND `cid` = 403 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:00+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.043760s][吞吐率：22.85req/s] [内存消耗：4,234.32kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'time' => '781166',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000950s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000892s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 [ RunTime:0.000451s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1436 [ RunTime:0.005005s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (571 , 403 , 781166 , 1 , NULL) [ RunTime:0.004390s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T22:47:08+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.045677s][吞吐率：21.89req/s] [内存消耗：3,987.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '407',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000313s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000861s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001096s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 407  AND `type` = 1 LIMIT 1 [ RunTime:0.000617s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:08+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.054107s][吞吐率：18.48req/s] [内存消耗：4,107.79kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '407',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001126s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001189s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000634s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 407 [ RunTime:0.004010s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 407 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 407 LIMIT 1 [ RunTime:0.000423s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:08+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031101s][吞吐率：32.15req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '407',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000885s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '407' ORDER BY id desc LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '407' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000435s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:10+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.044228s][吞吐率：22.61req/s] [内存消耗：3,985.61kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '400',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001152s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 400  AND `type` = 1 LIMIT 1 [ RunTime:0.000659s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:10+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.051225s][吞吐率：19.52req/s] [内存消耗：4,107.78kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '400',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000911s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000997s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000573s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 400 [ RunTime:0.003152s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 400 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 400 LIMIT 1 [ RunTime:0.000451s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000266s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:10+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031779s][吞吐率：31.47req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '400',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000386s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001027s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '400' ORDER BY id desc LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '400' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000477s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:12+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.041082s][吞吐率：24.34req/s] [内存消耗：3,981.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '400',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000872s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001010s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 571  AND `cid` = 400 LIMIT 1 [ RunTime:0.000404s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (571 , 400 , 2) [ RunTime:0.004483s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 571  AND `cid` = 400 [ RunTime:0.003977s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:24+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.038760s][吞吐率：25.80req/s] [内存消耗：4,125.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '32',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '400',
  'time' => '9266',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000485s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000903s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 400  AND `type` = 1 [ RunTime:0.000439s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (571 , 400 , 9266 , 1 , NULL) [ RunTime:0.005084s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T22:47:30+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.045203s][吞吐率：22.12req/s] [内存消耗：3,987.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000883s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001124s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 LIMIT 1 [ RunTime:0.000623s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:30+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.053783s][吞吐率：18.59req/s] [内存消耗：4,107.78kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '403',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001128s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001191s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000693s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 403 [ RunTime:0.003491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 403 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 403 LIMIT 1 [ RunTime:0.000426s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:30+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031917s][吞吐率：31.33req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '403',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000745s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000839s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000438s ]

---------------------------------------------------------------
[ 2019-05-07T22:47:33+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.039486s][吞吐率：25.33req/s] [内存消耗：3,979.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000926s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 571  AND `cid` = 403 LIMIT 1 [ RunTime:0.000401s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 571  AND `cid` = 403 [ RunTime:0.007012s ]

---------------------------------------------------------------
[ 2019-05-07T22:48:33+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.045289s][吞吐率：22.08req/s] [内存消耗：4,234.32kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'time' => '840766',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000910s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000912s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 [ RunTime:0.000434s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1437 [ RunTime:0.005692s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (571 , 403 , 840766 , 1 , NULL) [ RunTime:0.004671s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T22:48:37+08:00 ] 172.31.69.247 223.72.54.91 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.121911s][吞吐率：8.20req/s] [内存消耗：5,161.37kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000916s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000899s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003044s ]

---------------------------------------------------------------
[ 2019-05-07T22:48:38+08:00 ] 172.31.69.247 223.72.54.91 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.045641s][吞吐率：21.91req/s] [内存消耗：3,983.95kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001074s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001210s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 571  AND `reading` = 0 LIMIT 1 [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-05-07T22:48:38+08:00 ] 172.31.69.247 223.72.54.91 GET /common/home/index?enterprise_id=28
[ log ] api.kzwchina.com/common/home/index?enterprise_id=28 [运行时间：0.054647s][吞吐率：18.30req/s] [内存消耗：4,193.77kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001056s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001074s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001210s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 28 LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 28  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000403s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '28'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 28  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 28 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:27+08:00 ] 172.31.69.247 223.72.54.91 GET /common/study/datalist?enterprise_id=28&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=28&page=1 [运行时间：0.035611s][吞吐率：28.08req/s] [内存消耗：4,130.82kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000920s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000909s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240567 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240567 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240567 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=571) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557240567 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000753s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-07T22:49:29+08:00 ] 172.31.69.247 223.72.54.91 GET /common/study/getclasstime?id=139
[ log ] api.kzwchina.com/common/study/getclasstime?id=139 [运行时间：0.045752s][吞吐率：21.86req/s] [内存消耗：3,991.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001076s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001216s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000740s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:29+08:00 ] 172.31.69.247 223.72.54.91 GET /common/study/class_course_list?id=139
[ log ] api.kzwchina.com/common/study/class_course_list?id=139 [运行时间：0.068443s][吞吐率：14.61req/s] [内存消耗：4,467.76kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001092s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001216s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 571 LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 571  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000469s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 571 LIMIT 1 [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 571 LIMIT 1 [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 571 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 571 LIMIT 1 [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 571 LIMIT 1 [ RunTime:0.000482s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001043s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 571 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 395 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 613 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 485 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 570 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 492 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 593 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 480 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 440 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 420 ORDER BY date desc [ RunTime:0.000249s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:31+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.032584s][吞吐率：30.69req/s] [内存消耗：3,987.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '400',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000483s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000886s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 400  AND `type` = 1 LIMIT 1 [ RunTime:0.000440s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:32+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.045511s][吞吐率：21.97req/s] [内存消耗：4,107.78kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '400',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000872s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000906s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000541s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 400 [ RunTime:0.009465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 400 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 400 LIMIT 1 [ RunTime:0.000424s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:32+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031563s][吞吐率：31.68req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '400',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000859s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '400' ORDER BY id desc LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '400' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000458s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:36+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.045377s][吞吐率：22.04req/s] [内存消耗：3,987.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000302s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000899s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001170s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 LIMIT 1 [ RunTime:0.000643s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:36+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.055371s][吞吐率：18.06req/s] [内存消耗：4,107.78kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '403',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001121s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001196s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000681s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 403 [ RunTime:0.004818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 403 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 403 LIMIT 1 [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:36+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031161s][吞吐率：32.09req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '403',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000309s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000904s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000429s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:44+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.045834s][吞吐率：21.82req/s] [内存消耗：3,987.12kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000472s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001141s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001176s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 LIMIT 1 [ RunTime:0.000613s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:44+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.053494s][吞吐率：18.69req/s] [内存消耗：4,107.78kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '403',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.001142s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000701s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 403 [ RunTime:0.004430s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 403 LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 571  AND `type` = 3  AND `type_id` = 403 LIMIT 1 [ RunTime:0.000430s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000275s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:44+08:00 ] 172.31.69.247 223.72.54.91 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031960s][吞吐率：31.29req/s] [内存消耗：3,940.99kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '403',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000331s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000830s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='571') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '403' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000452s ]

---------------------------------------------------------------
[ 2019-05-07T22:49:46+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.043775s][吞吐率：22.84req/s] [内存消耗：3,979.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000499s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000901s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 571  AND `cid` = 403 LIMIT 1 [ RunTime:0.000415s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 571  AND `cid` = 403 [ RunTime:0.011195s ]

---------------------------------------------------------------
[ 2019-05-07T22:51:03+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.041918s][吞吐率：23.86req/s] [内存消耗：4,234.32kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'time' => '888300',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000895s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000985s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 [ RunTime:0.000462s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1439 [ RunTime:0.004442s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (571 , 403 , 888300 , 1 , NULL) [ RunTime:0.003428s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T23:01:13+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.043308s][吞吐率：23.09req/s] [内存消耗：4,234.31kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'time' => '993383',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001147s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000511s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1422 [ RunTime:0.005316s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (613 , 401 , 993383 , 1 , NULL) [ RunTime:0.003715s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T23:02:37+08:00 ] 172.31.69.247 223.72.54.91 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.043065s][吞吐率：23.22req/s] [内存消耗：4,234.32kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '7650f4bdb41ac84d97dc170017195891',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'uid' => '571',
  'cid' => '403',
  'time' => '888300',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000502s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7650f4bdb41ac84d97dc170017195891' LIMIT 1 [ RunTime:0.000886s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 571  AND `classcourse_id` = 403  AND `type` = 1 [ RunTime:0.000436s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1440 [ RunTime:0.004532s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (571 , 403 , 888300 , 1 , NULL) [ RunTime:0.004264s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T23:08:11+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.042702s][吞吐率：23.42req/s] [内存消耗：4,234.31kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '35',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'time' => '1307116',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000840s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000949s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000513s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1441 [ RunTime:0.004561s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (613 , 401 , 1307116 , 1 , NULL) [ RunTime:0.003395s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T23:08:23+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.046242s][吞吐率：21.63req/s] [内存消耗：3,987.10kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001085s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 LIMIT 1 [ RunTime:0.000637s ]

---------------------------------------------------------------
[ 2019-05-07T23:08:23+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.054426s][吞吐率：18.37req/s] [内存消耗：4,107.77kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001222s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001085s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000667s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 401 [ RunTime:0.003554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 401 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 613  AND `type` = 3  AND `type_id` = 401 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-05-07T23:08:23+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032039s][吞吐率：31.21req/s] [内存消耗：3,940.97kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '401',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000367s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000769s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000941s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='613') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000445s ]

---------------------------------------------------------------
[ 2019-05-07T23:08:26+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.037631s][吞吐率：26.57req/s] [内存消耗：3,979.09kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000947s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 613  AND `cid` = 401 LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 613  AND `cid` = 401 [ RunTime:0.005020s ]

---------------------------------------------------------------
[ 2019-05-07T23:11:24+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.049668s][吞吐率：20.13req/s] [内存消耗：4,234.31kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '35',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'time' => '1400066',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001243s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000497s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1443 [ RunTime:0.010997s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (613 , 401 , 1400066 , 1 , NULL) [ RunTime:0.004177s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T23:11:27+08:00 ] 172.31.69.247 116.22.135.164 GET /common/study/paper_list?id=139&type=1&exam=1
[ log ] api.kzwchina.com/common/study/paper_list?id=139&type=1&exam=1 [运行时间：0.033067s][吞吐率：30.24req/s] [内存消耗：4,054.33kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
  'type' => '1',
  'exam' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->PaperList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_paper` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT `p`.`id`,`p`.`title`,`p`.`photo`,(SELECT COUNT(*) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=613) num,(SELECT IF(COUNT(*)>0,1,0) FROM `tpn_paper_user` WHERE paper_id=p.id AND `uid`=613 AND `status`=1) is_paper FROM `tpn_paper` `p` WHERE  `p`.`type` = '1'  AND `p`.`class_id` = '139'  AND `p`.`start_time` <= '2019-05-07 23:11'  AND `p`.`end_time` >= '2019-05-07 23:11' [ RunTime:0.000524s ]

---------------------------------------------------------------
[ 2019-05-07T23:17:55+08:00 ] 172.31.69.247 116.22.135.164 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.118920s][吞吐率：8.41req/s] [内存消耗：5,161.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000982s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000955s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003057s ]

---------------------------------------------------------------
[ 2019-05-07T23:17:59+08:00 ] 172.31.69.247 116.22.135.164 GET /common/study/datalist?enterprise_id=28&page=1
[ log ] api.kzwchina.com/common/study/datalist?enterprise_id=28&page=1 [运行时间：0.036836s][吞吐率：27.15req/s] [内存消耗：4,130.86kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '28',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000937s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557242278 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557242278 ORDER BY id<>139,a.start desc LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557242278 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=613) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '28'  AND `a`.`end` > 1557242278 ORDER BY id<>139,a.start desc LIMIT 0,10 [ RunTime:0.000768s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-05-07T23:18:02+08:00 ] 172.31.69.247 116.22.135.164 GET /common/study/getclasstime?id=139
[ log ] api.kzwchina.com/common/study/getclasstime?id=139 [运行时间：0.044912s][吞吐率：22.27req/s] [内存消耗：3,991.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001092s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000757s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000365s ]

---------------------------------------------------------------
[ 2019-05-07T23:18:02+08:00 ] 172.31.69.247 116.22.135.164 GET /common/study/class_course_list?id=139
[ log ] api.kzwchina.com/common/study/class_course_list?id=139 [运行时间：0.068799s][吞吐率：14.54req/s] [内存消耗：4,467.67kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
  'id' => '139',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001092s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 139  AND `uid` = 613 LIMIT 1 [ RunTime:0.000662s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 139  AND `uid` = 613  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 139  AND `date` = '2019-05-07' LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '139' ORDER BY `c`.`sort`  desc [ RunTime:0.000466s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 401  AND `uid` = 613 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 407  AND `uid` = 613 LIMIT 1 [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 400  AND `uid` = 613 LIMIT 1 [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 402  AND `uid` = 613 LIMIT 1 [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 403  AND `uid` = 613 LIMIT 1 [ RunTime:0.000482s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 139  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '139' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001058s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000445s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 595 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 405 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 428 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 557 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 490 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 505 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 518 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 592 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 474 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 521 ORDER BY date desc [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-05-07T23:18:03+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.044596s][吞吐率：22.42req/s] [内存消耗：3,987.10kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001144s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 LIMIT 1 [ RunTime:0.000578s ]

---------------------------------------------------------------
[ 2019-05-07T23:18:03+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.051119s][吞吐率：19.56req/s] [内存消耗：4,107.77kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001160s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000710s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 401 [ RunTime:0.003017s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 401 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 613  AND `type` = 3  AND `type_id` = 401 LIMIT 1 [ RunTime:0.000454s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000262s ]

---------------------------------------------------------------
[ 2019-05-07T23:18:03+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031972s][吞吐率：31.28req/s] [内存消耗：3,940.97kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '401',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000753s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000935s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='613') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000447s ]

---------------------------------------------------------------
[ 2019-05-07T23:18:06+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.041281s][吞吐率：24.22req/s] [内存消耗：3,979.09kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001004s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001008s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 613  AND `cid` = 401 LIMIT 1 [ RunTime:0.000402s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 613  AND `cid` = 401 [ RunTime:0.008359s ]

---------------------------------------------------------------
[ 2019-05-07T23:28:18+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.051676s][吞吐率：19.35req/s] [内存消耗：4,234.31kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '35',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'time' => '1757583',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000915s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000930s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000467s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1444 [ RunTime:0.005713s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (613 , 401 , 1757583 , 1 , NULL) [ RunTime:0.011898s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T23:29:11+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.045896s][吞吐率：21.79req/s] [内存消耗：4,234.31kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '35',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'time' => '1795166',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000900s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001208s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1445 [ RunTime:0.007245s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (613 , 401 , 1795166 , 1 , NULL) [ RunTime:0.004959s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
[ 2019-05-07T23:29:13+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/aftertime
[ log ] api.kzwchina.com/common/user/aftertime [运行时间：0.045578s][吞吐率：21.94req/s] [内存消耗：3,987.10kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '22',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000318s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000873s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001191s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 LIMIT 1 [ RunTime:0.000635s ]

---------------------------------------------------------------
[ 2019-05-07T23:29:13+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.053744s][吞吐率：18.61req/s] [内存消耗：4,107.77kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '401',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001116s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000671s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 401 [ RunTime:0.003783s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 401 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 613  AND `type` = 3  AND `type_id` = 401 LIMIT 1 [ RunTime:0.000427s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 139 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-05-07T23:29:13+08:00 ] 172.31.69.247 116.22.135.164 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032152s][吞吐率：31.10req/s] [内存消耗：3,940.97kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '401',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000780s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000955s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='613') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '401' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000452s ]

---------------------------------------------------------------
[ 2019-05-07T23:29:16+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/addstues
[ log ] api.kzwchina.com/common/user/addstues [运行时间：0.037986s][吞吐率：26.33req/s] [内存消耗：3,979.09kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'ctype' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.000919s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 613  AND `cid` = 401 LIMIT 1 [ RunTime:0.000416s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 613  AND `cid` = 401 [ RunTime:0.005934s ]

---------------------------------------------------------------
[ 2019-05-07T23:44:17+08:00 ] 172.31.69.247 116.22.135.164 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.055658s][吞吐率：17.97req/s] [内存消耗：4,234.31kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '41adaecc866089944c9540b62f034d94',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '35',
)
[ info ] [ PARAM ] array (
  'uid' => '613',
  'cid' => '401',
  'time' => '2340483',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000925s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '41adaecc866089944c9540b62f034d94' LIMIT 1 [ RunTime:0.001154s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 613  AND `classcourse_id` = 401  AND `type` = 1 [ RunTime:0.000463s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 1446 [ RunTime:0.017294s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (613 , 401 , 2340483 , 1 , NULL) [ RunTime:0.003700s ]
[ error ] [8]未定义数组索引: course_time[/www/wwwroot/kouzhiwen/application/api/common/controller/User.php:567]

---------------------------------------------------------------
