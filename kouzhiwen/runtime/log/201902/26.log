[ 2019-02-26T20:49:53+08:00 ] 172.31.69.247 1.203.117.69 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035266s][吞吐率：28.36req/s] [内存消耗：4,116.84kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185393 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185393 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185393 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=169) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185393 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000858s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-02-26T20:49:54+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.1 [运行时间：0.055442s][吞吐率：18.04req/s] [内存消耗：4,416.86kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000792s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 169 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000232s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000356s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000707s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 160 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000186s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 165 ORDER BY date desc [ RunTime:0.000208s ]

---------------------------------------------------------------
[ 2019-02-26T20:49:54+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.1 [运行时间：0.087492s][吞吐率：11.43req/s] [内存消耗：4,415.91kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000397s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000461s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 169 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000428s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000233s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000671s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000194s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000192s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000190s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000191s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000181s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-02-26T20:49:57+08:00 ] 172.31.69.247 1.203.117.69 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017132s][吞吐率：58.37req/s] [内存消耗：1,983.34kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-02-26T20:50:03+08:00 ] 172.31.69.247 1.203.117.69 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016897s][吞吐率：59.18req/s] [内存消耗：1,983.34kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-02-26T20:50:08+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/classdiscuss?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/classdiscuss?OS=iOS&id=43&version=1.0.1 [运行时间：0.031964s][吞吐率：31.29req/s] [内存消耗：4,027.58kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '43'  AND `u`.`user_id` = 169  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000425s ]

---------------------------------------------------------------
[ 2019-02-26T20:50:09+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/notice_list?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=43&version=1.0.1 [运行时间：0.031606s][吞吐率：31.64req/s] [内存消耗：4,037.59kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000968s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 43 ORDER BY created_at desc [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-02-26T20:50:10+08:00 ] 172.31.69.247 1.203.117.69 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035528s][吞吐率：28.15req/s] [内存消耗：4,116.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185410 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185410 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185410 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=169) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185410 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000863s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-02-26T20:50:22+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=47&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=47&version=1.0.1 [运行时间：0.047629s][吞吐率：21.00req/s] [内存消耗：4,415.31kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000835s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 169 LIMIT 1 [ RunTime:0.000391s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 47  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 47  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000228s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '47' ORDER BY `c`.`start` [ RunTime:0.000357s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 47  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '47' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000184s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000184s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]

---------------------------------------------------------------
[ 2019-02-26T20:50:22+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=47&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=47&version=1.0.1 [运行时间：0.046100s][吞吐率：21.69req/s] [内存消耗：4,415.31kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000379s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000746s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000538s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 169 LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 47  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 47  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '47' ORDER BY `c`.`start` [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 47  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '47' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000649s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000184s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]

---------------------------------------------------------------
[ 2019-02-26T20:50:32+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037399s][吞吐率：26.74req/s] [内存消耗：4,122.03kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '81',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000398s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000607s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 81 [ RunTime:0.002574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 81 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 169  AND `type` = 3  AND `type_id` = 81 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000274s ]

---------------------------------------------------------------
[ 2019-02-26T20:50:32+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030266s][吞吐率：33.04req/s] [内存消耗：3,937.87kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '81',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000711s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000469s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '81' ORDER BY id desc LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '81' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000392s ]

---------------------------------------------------------------
[ 2019-02-26T20:54:02+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040894s][吞吐率：24.45req/s] [内存消耗：4,123.84kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '82',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000894s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000703s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 82 [ RunTime:0.002762s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 82 LIMIT 1 [ RunTime:0.000383s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 169  AND `type` = 3  AND `type_id` = 82 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (169 , 3 , 82 , 1551185642) [ RunTime:0.002065s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-02-26T20:54:02+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032273s][吞吐率：30.99req/s] [内存消耗：3,937.87kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '82',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000811s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000538s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '82' ORDER BY id desc LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '82' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000418s ]

---------------------------------------------------------------
[ 2019-02-26T20:54:04+08:00 ] 172.31.69.247 1.203.117.69 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035652s][吞吐率：28.05req/s] [内存消耗：4,116.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000545s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000525s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185644 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185644 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185644 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=169) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551185644 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.000867s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-02-26T20:54:05+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.1 [运行时间：0.056299s][吞吐率：17.76req/s] [内存消耗：4,415.91kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 169 LIMIT 1 [ RunTime:0.000411s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000237s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000721s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000187s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 165 ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 72 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000184s ]

---------------------------------------------------------------
[ 2019-02-26T20:54:05+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.1 [运行时间：0.082995s][吞吐率：12.05req/s] [内存消耗：4,415.91kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000362s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 169 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000433s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000227s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000194s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000187s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000191s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 165 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 72 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-02-26T20:54:07+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038823s][吞吐率：25.76req/s] [内存消耗：4,119.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000696s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 66 [ RunTime:0.002646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 66 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 169  AND `type` = 3  AND `type_id` = 66 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-02-26T20:54:07+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030838s][吞吐率：32.43req/s] [内存消耗：3,937.87kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000899s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000433s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:12+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/notice_list?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=43&version=1.0.1 [运行时间：0.031339s][吞吐率：31.91req/s] [内存消耗：4,037.59kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 43 ORDER BY created_at desc [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:13+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/classdiscuss?OS=iOS&id=43&version=1.0.1
[ log ] api.kzwchina.com/common/study/classdiscuss?OS=iOS&id=43&version=1.0.1 [运行时间：0.033232s][吞吐率：30.09req/s] [内存消耗：4,027.58kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000509s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001121s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '43'  AND `u`.`user_id` = 169  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000679s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:19+08:00 ] 172.31.69.247 1.203.117.69 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036134s][吞吐率：27.67req/s] [内存消耗：4,116.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000776s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189739 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189739 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000414s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189739 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=169) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189739 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001061s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-02-26T22:02:24+08:00 ] 172.31.69.247 1.203.117.69 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.034862s][吞吐率：28.68req/s] [内存消耗：4,114.21kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189744 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189744 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189744 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=169) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1551189744 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000410s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-02-26T22:02:26+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/notice_count?OS=iOS&version=1.0.1
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.1 [运行时间：0.029704s][吞吐率：33.67req/s] [内存消耗：3,947.32kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000842s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:30+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/article/information_classify?OS=iOS&enterprise_id=13&version=1.0.1
[ log ] api.kzwchina.com/discover/article/information_classify?OS=iOS&enterprise_id=13&version=1.0.1 [运行时间：0.030964s][吞吐率：32.30req/s] [内存消耗：3,980.00kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->InformationClassify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000505s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000828s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000537s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 13 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 2  AND `enterprise_id` = 13 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:30+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/article/datalist?OS=iOS&classify_id=41&enterprise_id=13&page=1&version=1.0.1
[ log ] api.kzwchina.com/discover/article/datalist?OS=iOS&classify_id=41&enterprise_id=13&page=1&version=1.0.1 [运行时间：0.041363s][吞吐率：24.18req/s] [内存消耗：4,003.70kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'classify_id' => '41',
  'enterprise_id' => '13',
  'page' => '1',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_information` WHERE  `status` = 1  AND `enterprise_id` = 13  AND `classify_id` = 41 ORDER BY comment_num desc,is_recommend desc,id desc LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img`,`author`,`add_time`,`comment_num`,`pv`,`is_recommend` FROM `tpn_information` WHERE  `status` = 1  AND `enterprise_id` = 13  AND `classify_id` = 41 ORDER BY comment_num desc,is_recommend desc,id desc LIMIT 0,10 [ RunTime:0.000325s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Information.php:35]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Information.php:35]

---------------------------------------------------------------
[ 2019-02-26T22:02:30+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/article/datalist?OS=iOS&classify_id=0&enterprise_id=13&page=1&version=1.0.1
[ log ] api.kzwchina.com/discover/article/datalist?OS=iOS&classify_id=0&enterprise_id=13&page=1&version=1.0.1 [运行时间：0.055531s][吞吐率：18.01req/s] [内存消耗：4,002.22kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'classify_id' => '0',
  'enterprise_id' => '13',
  'page' => '1',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000499s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_information` WHERE  `status` = 1  AND `enterprise_id` = 13 ORDER BY comment_num desc,is_recommend desc,id desc LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img`,`author`,`add_time`,`comment_num`,`pv`,`is_recommend` FROM `tpn_information` WHERE  `status` = 1  AND `enterprise_id` = 13 ORDER BY comment_num desc,is_recommend desc,id desc LIMIT 0,10 [ RunTime:0.000305s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Information.php:35]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Information.php:35]

---------------------------------------------------------------
[ 2019-02-26T22:02:34+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/article/details
[ log ] api.kzwchina.com/discover/article/details [运行时间：0.038520s][吞吐率：25.96req/s] [内存消耗：4,114.90kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '21',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000542s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 21  AND `status` = 1 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 169  AND `type_id` = 21 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 21 [ RunTime:0.004590s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:34+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032161s][吞吐率：31.09req/s] [内存消耗：3,937.87kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '21',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000821s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000539s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '21' ORDER BY id desc LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '21' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000471s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:34+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/article/details?id=21
[ log ] api.kzwchina.com/discover/article/details?id=21 [运行时间：0.035427s][吞吐率：28.23req/s] [内存消耗：4,010.13kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '21',
)
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000712s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 21  AND `status` = 1 LIMIT 1 [ RunTime:0.000410s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 0  AND `type_id` = 21 LIMIT 1 [ RunTime:0.000241s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 21 [ RunTime:0.003976s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:54+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/article/details
[ log ] api.kzwchina.com/discover/article/details [运行时间：0.046801s][吞吐率：21.37req/s] [内存消耗：4,115.04kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '22',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000480s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000862s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000527s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 22  AND `status` = 1 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 169  AND `type_id` = 22 LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 22 [ RunTime:0.004102s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:54+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.054966s][吞吐率：18.19req/s] [内存消耗：3,937.87kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '22',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000478s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '22' ORDER BY id desc LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '22' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000413s ]

---------------------------------------------------------------
[ 2019-02-26T22:02:54+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/article/details?id=22
[ log ] api.kzwchina.com/discover/article/details?id=22 [运行时间：0.044087s][吞吐率：22.68req/s] [内存消耗：4,010.23kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '22',
)
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000480s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000727s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 22  AND `status` = 1 LIMIT 1 [ RunTime:0.000421s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 0  AND `type_id` = 22 LIMIT 1 [ RunTime:0.000247s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 22 [ RunTime:0.013763s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:11+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/article/details
[ log ] api.kzwchina.com/discover/article/details [运行时间：0.037188s][吞吐率：26.89req/s] [内存消耗：4,114.78kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '5',
)
[ info ] [ PARAM ] array (
  'id' => '23',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 23  AND `status` = 1 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 169  AND `type_id` = 23 LIMIT 1 [ RunTime:0.000242s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 23 [ RunTime:0.004185s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:11+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/article/details?id=23
[ log ] api.kzwchina.com/discover/article/details?id=23 [运行时间：0.035112s][吞吐率：28.48req/s] [内存消耗：4,010.07kb] [文件加载：66]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'application/json, text/plain, */*',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'user-agent' => 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_1_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/16D57',
  'accept-language' => 'zh-cn',
  'referer' => 'http://api.kzwchina.com/h5/index.html',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'id' => '23',
)
[ info ] [ RUN ] app\api\discover\controller\Article->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 23  AND `status` = 1 LIMIT 1 [ RunTime:0.000409s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_collect` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_collect` WHERE  `type` = 3  AND `uid` = 0  AND `type_id` = 23 LIMIT 1 [ RunTime:0.000394s ]
[ sql ] [ SQL ] UPDATE `tpn_information`  SET `pv`=pv+1  WHERE  `id` = 23 [ RunTime:0.003528s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:11+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030623s][吞吐率：32.66req/s] [内存消耗：3,939.64kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '23',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000356s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000727s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000497s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '23' ORDER BY id desc LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '23' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000425s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:37+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032343s][吞吐率：30.92req/s] [内存消耗：3,939.64kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'type_id' => '23',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000823s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '23' ORDER BY id desc LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '4'  AND `a`.`type_id` = '23' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000502s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:49+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/notice_count?OS=iOS&version=1.0.1
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.1 [运行时间：0.030362s][吞吐率：32.94req/s] [内存消耗：3,947.32kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000823s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:52+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/teacher/teacher_type?OS=iOS&enterprise_id=13&version=1.0.1
[ log ] api.kzwchina.com/discover/teacher/teacher_type?OS=iOS&enterprise_id=13&version=1.0.1 [运行时间：0.031003s][吞吐率：32.25req/s] [内存消耗：3,948.31kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'teacher',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Teacher->TeacherType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Teacher.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000533s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000889s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_type` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher_type` WHERE  `enterprise_id` = 13 [ RunTime:0.000242s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:52+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/teacher/teacher_list?OS=iOS&enterprise_id=13&page=1&teacher_type=29&version=1.0.1
[ log ] api.kzwchina.com/discover/teacher/teacher_list?OS=iOS&enterprise_id=13&page=1&teacher_type=29&version=1.0.1 [运行时间：0.041028s][吞吐率：24.37req/s] [内存消耗：3,982.23kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'teacher',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'page' => '1',
  'teacher_type' => '29',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Teacher->TeacherList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Teacher.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000495s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000863s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000787s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%'  AND `teacher_type` = 29 LIMIT 1 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`nickname`,`photo`,`consult_num`,`brief`,`level`,`phone` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%'  AND `teacher_type` = 29 ORDER BY created_at desc LIMIT 0,10 [ RunTime:0.000611s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:52+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/teacher/teacher_list?OS=iOS&enterprise_id=13&page=1&teacher_type=0&version=1.0.1
[ log ] api.kzwchina.com/discover/teacher/teacher_list?OS=iOS&enterprise_id=13&page=1&teacher_type=0&version=1.0.1 [运行时间：0.057707s][吞吐率：17.33req/s] [内存消耗：3,980.91kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'teacher',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'page' => '1',
  'teacher_type' => '0',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Teacher->TeacherList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Teacher.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000509s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' LIMIT 1 [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`nickname`,`photo`,`consult_num`,`brief`,`level`,`phone` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY created_at desc LIMIT 0,10 [ RunTime:0.000540s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:54+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/notice_count?OS=iOS&version=1.0.1
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.1 [运行时间：0.031582s][吞吐率：31.66req/s] [内存消耗：3,947.32kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000862s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000551s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:55+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/course/course_type?OS=iOS&enterprise_id=13&type=1&version=1.0.1
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=13&type=1&version=1.0.1 [运行时间：0.030900s][吞吐率：32.36req/s] [内存消耗：3,908.29kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '13',
  'type' => '1',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000833s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 13  AND `type` = 1 [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-02-26T22:03:55+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.041127s][吞吐率：24.31req/s] [内存消耗：3,996.88kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'type' => '1',
  'type_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000398s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000787s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000628s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-02-26T22:03:55+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.053032s][吞吐率：18.86req/s] [内存消耗：3,997.11kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '34',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'type' => '1',
  'type_id' => '31',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000305s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1'  AND `a`.`type_id` = '31' ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '13'  AND `a`.`type` = '1'  AND `a`.`type_id` = '31' ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000584s ]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Course.php:31]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-02-26T22:03:57+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/notice_count?OS=iOS&version=1.0.1
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.1 [运行时间：0.030764s][吞吐率：32.51req/s] [内存消耗：3,947.32kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000917s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:01+08:00 ] 172.31.69.247 1.203.117.69 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.043516s][吞吐率：22.98req/s] [内存消耗：4,385.89kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '20',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000468s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 20  AND `status` = 1 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 20  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 169  AND `class_id` = 79 LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '20'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 20  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000538s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 20  AND `power` = 0 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:05+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/course/course_type?OS=iOS&enterprise_id=20&type=1&version=1.0.1
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=20&type=1&version=1.0.1 [运行时间：0.030367s][吞吐率：32.93req/s] [内存消耗：3,906.98kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '20',
  'type' => '1',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000531s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 20  AND `type` = 1 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:05+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.032756s][吞吐率：30.53req/s] [内存消耗：3,994.87kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '20',
  'type' => '1',
  'type_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '20'  AND `a`.`type` = '1'  AND `a`.`power` = 0 ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '20'  AND `a`.`type` = '1'  AND `a`.`power` = 0 ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000349s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-02-26T22:04:07+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/notice_count?OS=iOS&version=1.0.1
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.1 [运行时间：0.030831s][吞吐率：32.43req/s] [内存消耗：3,947.32kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:09+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/communication?OS=iOS&enterprise_id=20&page=1&version=1.0.1
[ log ] api.kzwchina.com/common/user/communication?OS=iOS&enterprise_id=20&page=1&version=1.0.1 [运行时间：0.030634s][吞吐率：32.64req/s] [内存消耗：3,979.55kb] [文件加载：61]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '20',
  'page' => '1',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->Communication[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user` WHERE  `enterprise_id` = 20  AND `uid` <> 169 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SELECT `uid`,`name`,`name_hide`,`nickname`,`face`,`phone`,`level` FROM `tpn_user` WHERE  `enterprise_id` = 20  AND `uid` <> 169 ORDER BY level desc LIMIT 0,10 [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:12+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/notice_count?OS=iOS&version=1.0.1
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.1 [运行时间：0.030823s][吞吐率：32.44req/s] [内存消耗：3,947.32kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000797s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:13+08:00 ] 172.31.69.247 1.203.117.69 GET /discover/course/course_type?OS=iOS&enterprise_id=20&type=2&version=1.0.1
[ log ] api.kzwchina.com/discover/course/course_type?OS=iOS&enterprise_id=20&type=2&version=1.0.1 [运行时间：0.030308s][吞吐率：32.99req/s] [内存消耗：3,906.98kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'enterprise_id' => '20',
  'type' => '2',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->CourseType[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000821s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_type` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_type` WHERE  `enterprise_id` = 20  AND `type` = 2 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:13+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/datalist
[ log ] api.kzwchina.com/discover/course/datalist [运行时间：0.032049s][吞吐率：31.20req/s] [内存消耗：3,994.87kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '33',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '20',
  'type' => '2',
  'type_id' => '0',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000765s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000711s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '20'  AND `a`.`type` = '2'  AND `a`.`power` = 0 ORDER BY weight desc,a.id desc LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`photo`,`a`.`title`,`a`.`price`,`a`.`look_num`,`a`.`reading`,(select if(count(*)>0,1,0) from `tpn_order` where `type`=2 and `type_id`=a.id and `pay_status`=2) is_buy FROM `tpn_course` `a` WHERE  `a`.`status` = 1  AND `a`.`enterprise_id` = '20'  AND `a`.`type` = '2'  AND `a`.`power` = 0 ORDER BY weight desc,a.id desc LIMIT 0,10 [ RunTime:0.000355s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Course.php:34]

---------------------------------------------------------------
[ 2019-02-26T22:04:14+08:00 ] 172.31.69.247 1.203.117.69 GET /common/user/notice_count?OS=iOS&version=1.0.1
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.1 [运行时间：0.030754s][吞吐率：32.52req/s] [内存消耗：3,947.32kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000540s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 169  AND `reading` = 0 LIMIT 1 [ RunTime:0.000308s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:15+08:00 ] 172.31.69.247 1.203.117.69 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.034671s][吞吐率：28.84req/s] [内存消耗：4,114.98kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '20',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000840s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000558s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '20'  AND `a`.`end` > 1551189855  AND `a`.`power` = 0 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '20'  AND `a`.`end` > 1551189855  AND `a`.`power` = 0 ORDER BY id<>79,a.start desc LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '20'  AND `a`.`end` > 1551189855  AND `a`.`power` = 0 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=169) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '20'  AND `a`.`end` > 1551189855  AND `a`.`power` = 0 ORDER BY id<>79,a.start desc LIMIT 0,10 [ RunTime:0.000567s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]

---------------------------------------------------------------
[ 2019-02-26T22:04:20+08:00 ] 172.31.69.247 1.203.117.69 POST /common/order/order
[ log ] api.kzwchina.com/common/order/order [运行时间：0.143505s][吞吐率：6.97req/s] [内存消耗：4,257.02kb] [文件加载：71]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'order',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '29',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '20',
  'id' => '79',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Order->Order[ /www/wwwroot/kouzhiwen/application/api/common/controller/Order.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000863s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 79  AND `uid` = 169 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 79 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] INSERT INTO `tpn_class_user` (`class_id` , `uid` , `status` , `created_at` , `updated_at`) VALUES (79 , 169 , 1 , 1551189860 , 1551189860) [ RunTime:0.003849s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:22+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=79&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=79&version=1.0.1 [运行时间：0.052032s][吞吐率：19.22req/s] [内存消耗：4,412.02kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '79',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 79  AND `uid` = 169 LIMIT 1 [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 79  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 79  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '79' ORDER BY `c`.`start` [ RunTime:0.000334s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 79  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '79' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000558s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000224s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:22+08:00 ] 172.31.69.247 1.203.117.69 GET /common/study/class_course_list?OS=iOS&id=79&version=1.0.1
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=79&version=1.0.1 [运行时间：0.079441s][吞吐率：12.59req/s] [内存消耗：4,412.02kb] [文件加载：69]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.1',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '79',
  'version' => '1.0.1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 79  AND `uid` = 169 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000439s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 79  AND `uid` = 169  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 79  AND `date` = '2019-02-26' LIMIT 1 [ RunTime:0.000227s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status`,`c`.`type` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '79' ORDER BY `c`.`start` [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 79  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '79' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000542s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:22+08:00 ] 172.31.69.247 1.203.117.69 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016842s][吞吐率：59.38req/s] [内存消耗：1,983.34kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-02-26T22:04:26+08:00 ] 172.31.69.247 1.203.117.69 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017664s][吞吐率：56.61req/s] [内存消耗：1,983.34kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-02-26T22:04:31+08:00 ] 172.31.69.247 1.203.117.69 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017796s][吞吐率：56.19req/s] [内存消耗：1,983.34kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-02-26T22:04:40+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038636s][吞吐率：25.88req/s] [内存消耗：4,118.13kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '163',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000627s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 163 [ RunTime:0.002762s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 163 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 169  AND `type` = 3  AND `type_id` = 163 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (169 , 3 , 163 , 1551189880) [ RunTime:0.002063s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:40+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030361s][吞吐率：32.94req/s] [内存消耗：3,937.79kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '163',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '163' ORDER BY id desc LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '163' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:46+08:00 ] 172.31.69.247 1.203.117.69 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016617s][吞吐率：60.18req/s] [内存消耗：1,983.34kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-02-26T22:04:50+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.042358s][吞吐率：23.61req/s] [内存消耗：4,118.35kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '155',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000808s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000652s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 155 [ RunTime:0.002824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 155 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 169  AND `type` = 3  AND `type_id` = 155 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (169 , 3 , 155 , 1551189890) [ RunTime:0.002751s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000338s ]

---------------------------------------------------------------
[ 2019-02-26T22:04:50+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032882s][吞吐率：30.41req/s] [内存消耗：3,937.79kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '155',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000513s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '155' ORDER BY id desc LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '155' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000397s ]

---------------------------------------------------------------
[ 2019-02-26T22:05:01+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037586s][吞吐率：26.61req/s] [内存消耗：4,116.55kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '155',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000537s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000639s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 155 [ RunTime:0.002764s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 155 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 169  AND `type` = 3  AND `type_id` = 155 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000255s ]

---------------------------------------------------------------
[ 2019-02-26T22:05:01+08:00 ] 172.31.69.247 1.203.117.69 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.030429s][吞吐率：32.86req/s] [内存消耗：3,937.79kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.1',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => '7913b06fecf037c7b76fed0817cd67a7',
  'user-agent' => 'kouzhiwen/1.0.1 (iPhone; iOS 12.1.4; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=cgqtidnk2nusf0ohjbmqne28a2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '155',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000369s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000771s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '7913b06fecf037c7b76fed0817cd67a7' LIMIT 1 [ RunTime:0.000510s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '155' ORDER BY id desc LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='169') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '155' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000408s ]

---------------------------------------------------------------
