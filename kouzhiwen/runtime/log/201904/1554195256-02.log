[ 2019-04-02T14:56:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.071519s][吞吐率：13.98req/s] [内存消耗：4,004.45kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000715s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.110171s][吞吐率：9.08req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000322s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000424s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001020s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000229s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:02+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038769s][吞吐率：25.79req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000649s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000665s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.003223s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.039722s][吞吐率：25.17req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000476s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000367s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:03+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.045944s][吞吐率：21.77req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000558s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000479s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.074102s][吞吐率：13.49req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000404s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.014671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000377s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001222s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.077479s][吞吐率：12.91req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000427s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000982s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.085811s][吞吐率：11.65req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:08+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037898s][吞吐率：26.39req/s] [内存消耗：4,106.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000658s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.002680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000392s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000255s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:08+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5 [运行时间：0.039322s][吞吐率：25.43req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '303',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000715s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000338s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:08+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.050530s][吞吐率：19.79req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000317s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000428s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:10+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038258s][吞吐率：26.14req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000937s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000679s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000252s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.038502s][吞吐率：25.97req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000340s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000928s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000662s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000399s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:10+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040441s][吞吐率：24.73req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bk6dvmnap1ebhov48sa01gcl73',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000436s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:44+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.116024s][吞吐率：8.62req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000714s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003147s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.039994s][吞吐率：25.00req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001163s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000814s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 294  AND `reading` = 0 LIMIT 1 [ RunTime:0.000393s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:46+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.042319s][吞吐率：23.63req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000368s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 294 ORDER BY u.weight ASC [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000345s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:47+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030840s][吞吐率：32.43req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000381s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000208s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:47+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032753s][吞吐率：30.53req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000385s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000750s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000671s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000305s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000431s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:49+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030736s][吞吐率：32.54req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000328s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:49+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031927s][吞吐率：31.32req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000387s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000800s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000301s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000398s ]

---------------------------------------------------------------
[ 2019-04-02T14:56:56+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031626s][吞吐率：31.62req/s] [内存消耗：3,869.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000289s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000398s ]

---------------------------------------------------------------
[ 2019-04-02T14:57:35+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/introduce/details?id=null
[ log ] api.kzwchina.com/discover/introduce/details?id=null [运行时间：0.025707s][吞吐率：38.90req/s] [内存消耗：3,291.95kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 8.0.0; PRA-AL00X Build/HONORPRA-AL00X; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.110 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.9',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => 'null',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000765s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 0 LIMIT 1 [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:50+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115984s][吞吐率：8.62req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003102s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:50+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.040013s][吞吐率：24.99req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000311s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:50+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.064004s][吞吐率：15.62req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000505s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000714s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000821s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:52+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036735s][吞吐率：27.22req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188332 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000863s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188332 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188332 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188332 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001207s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T14:58:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.069929s][吞吐率：14.30req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001180s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000964s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000239s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.097123s][吞吐率：10.30req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000482s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001066s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000241s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.123241s][吞吐率：8.11req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:54+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038509s][吞吐率：25.97req/s] [内存消耗：4,106.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000675s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.002765s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000258s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:55+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040778s][吞吐率：24.52req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000858s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000644s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000450s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:55+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5 [运行时间：0.055549s][吞吐率：18.00req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '303',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000339s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:57+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038072s][吞吐率：26.27req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000883s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000695s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000252s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:58+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.041163s][吞吐率：24.29req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000788s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000596s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000439s ]

---------------------------------------------------------------
[ 2019-04-02T14:58:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.056238s][吞吐率：17.78req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000352s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:02+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.045567s][吞吐率：21.95req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001166s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000711s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000723s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000422s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:02+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.087718s][吞吐率：11.40req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000714s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000514s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000420s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001036s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:02+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.122241s][吞吐率：8.18req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000319s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000565s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000403s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001006s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:02+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039040s][吞吐率：25.61req/s] [内存消耗：4,122.52kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 66 [ RunTime:0.003459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 66 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 66 LIMIT 1 [ RunTime:0.000383s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=66&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=66&type=1&uid=249&version=1.0.5 [运行时间：0.039019s][吞吐率：25.63req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '66',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000392s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 66  AND `type` = 1 LIMIT 1 [ RunTime:0.000339s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:03+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.051628s][吞吐率：19.37req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000434s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:06+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.041524s][吞吐率：24.08req/s] [内存消耗：4,170.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '66',
  'course_time' => '9993.400000',
  'time' => '0.840000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000690s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 66  AND `type` = 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 440 [ RunTime:0.004178s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 66 , 0.84 , 1 , 9993.4) [ RunTime:0.003403s ]

---------------------------------------------------------------
[ 2019-04-02T14:59:09+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/study_details?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=46&version=1.0.5 [运行时间：0.037253s][吞吐率：26.84req/s] [内存消耗：4,151.32kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=u9gj2jee81lv5p8efheaaduib3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 46 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000496s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000368s ]

---------------------------------------------------------------
[ 2019-04-02T15:00:01+08:00 ] 172.31.69.247 47.105.58.152 GET /root/Task/index.html?type=1
[ log ] admin.kzwchina.com/root/Task/index.html?type=1 [运行时间：0.017178s][吞吐率：58.21req/s] [内存消耗：2,443.01kb] [文件加载：48]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'root',
    2 => 'Task',
  ),
)
[ info ] [ HEADER ] array (
  'user-agent' => 'curl/7.29.0',
  'host' => 'admin.kzwchina.com',
  'accept' => '*/*',
)
[ info ] [ PARAM ] array (
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:01:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.116753s][吞吐率：8.57req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000762s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003150s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:33+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.040620s][吞吐率：24.62req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001142s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000782s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 294 ORDER BY u.weight ASC [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000437s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:33+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.039695s][吞吐率：25.19req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 294  AND `reading` = 0 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:34+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030734s][吞吐率：32.54req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:34+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032323s][吞吐率：30.94req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000299s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:37+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031265s][吞吐率：31.98req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000309s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:37+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030356s][吞吐率：32.94req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000378s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000753s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000304s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000399s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:38+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031275s][吞吐率：31.97req/s] [内存消耗：3,869.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000902s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000730s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000291s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000375s ]

---------------------------------------------------------------
[ 2019-04-02T15:01:40+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/introduce/details?id=null
[ log ] api.kzwchina.com/discover/introduce/details?id=null [运行时间：0.025665s][吞吐率：38.96req/s] [内存消耗：3,291.95kb] [文件加载：56]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/plain, */*',
  'user-agent' => 'Mozilla/5.0 (Linux; Android 8.0.0; PRA-AL00X Build/HONORPRA-AL00X; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/70.0.3538.110 Mobile Safari/537.36',
  'referer' => 'http://api.kzwchina.com/h5/',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,en-US;q=0.9',
  'x-requested-with' => 'com.zipingfang.kzhw',
)
[ info ] [ PARAM ] array (
  'id' => 'null',
)
[ info ] [ RUN ] app\api\discover\controller\Introduce->details[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000496s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000809s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `id` = 0 LIMIT 1 [ RunTime:0.000379s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.117102s][吞吐率：8.54req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003100s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.039778s][吞吐率：25.14req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000824s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000311s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:32+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.068250s][吞吐率：14.65req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000712s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000823s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:33+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036087s][吞吐率：27.71req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000919s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188553 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188553 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188553 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188553 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001078s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:02:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.045189s][吞吐率：22.13req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000478s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001190s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000746s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000733s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000373s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.085229s][吞吐率：11.73req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000327s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000722s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000432s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001006s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.121344s][吞吐率：8.24req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000400s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001090s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000232s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:35+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017030s][吞吐率：58.72req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:02:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038973s][吞吐率：25.66req/s] [内存消耗：4,106.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.002995s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:37+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040918s][吞吐率：24.44req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000437s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5 [运行时间：0.055892s][吞吐率：17.89req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '303',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000322s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000342s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:41+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039456s][吞吐率：25.34req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000672s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.003757s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000256s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:41+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.038907s][吞吐率：25.70req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000388s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000350s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:41+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.048348s][吞吐率：20.68req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000313s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000438s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.075434s][吞吐率：13.26req/s] [内存消耗：4,474.54kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000903s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000680s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.011671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.006970s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000367s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000431s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.082732s][吞吐率：12.09req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001104s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.098697s][吞吐率：10.13req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000542s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:47+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038903s][吞吐率：25.70req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000683s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.002817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:47+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.040200s][吞吐率：24.88req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000365s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000749s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000338s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:47+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052080s][吞吐率：19.20req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000744s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000491s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:49+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.042064s][吞吐率：23.77req/s] [内存消耗：4,170.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '65',
  'course_time' => '8877.380000',
  'time' => '6.960000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 442 [ RunTime:0.004964s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 65 , 6.96 , 1 , 8877.38) [ RunTime:0.004213s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.068771s][吞吐率：14.54req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001160s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000436s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000420s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001143s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000235s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.114708s][吞吐率：8.72req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000384s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000517s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000420s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000901s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000233s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.114746s][吞吐率：8.71req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000378s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000782s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:59+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038867s][吞吐率：25.73req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000679s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002941s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000263s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:59+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.040299s][吞吐率：24.81req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000905s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000372s ]

---------------------------------------------------------------
[ 2019-04-02T15:02:59+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.050248s][吞吐率：19.90req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:05+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037409s][吞吐率：26.73req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000651s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000367s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:05+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.038399s][吞吐率：26.04req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000751s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000598s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000357s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:05+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.049912s][吞吐率：20.04req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000304s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000429s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:06+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.033010s][吞吐率：30.29req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=e8ps25iune42snqhvb21v4dvp5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000509s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000459s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044684s][吞吐率：22.38req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000371s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000705s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 294  AND `reading` = 0 LIMIT 1 [ RunTime:0.000333s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:12+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.047776s][吞吐率：20.93req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001142s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000799s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 294 ORDER BY u.weight ASC [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000436s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030165s][吞吐率：33.15req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000379s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000798s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000715s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000309s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030271s][吞吐率：33.03req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000332s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000397s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116896s][吞吐率：8.55req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000954s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.002893s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:41+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051454s][吞吐率：19.43req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000470s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000899s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000799s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000310s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:41+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.066459s][吞吐率：15.05req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000317s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000539s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:42+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037156s][吞吐率：26.91req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000992s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188622 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000919s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188622 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188622 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000797s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188622 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001361s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:03:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.070144s][吞吐率：14.26req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001160s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000576s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000919s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000237s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.079514s][吞吐率：12.58req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000342s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000551s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.123311s][吞吐率：8.11req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000293s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000426s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000978s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:44+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038467s][吞吐率：26.00req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000686s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002952s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:45+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040708s][吞吐率：24.57req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000650s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000470s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:45+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.055622s][吞吐率：17.98req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000347s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:48+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032019s][吞吐率：31.23req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000890s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000431s ]

---------------------------------------------------------------
[ 2019-04-02T15:03:49+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032407s][吞吐率：30.86req/s] [内存消耗：3,940.29kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '25',
)
[ info ] [ PARAM ] array (
  'page' => '2',
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 10,10 [ RunTime:0.000449s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037628s][吞吐率：26.58req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002271s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000258s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:13+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.038909s][吞吐率：25.70req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000387s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001008s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000433s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:13+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040828s][吞吐率：24.49req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000301s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000441s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:15+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.031931s][吞吐率：31.32req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=pdfebsn77j65sfhs6tc4ltmb82',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000494s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000929s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000428s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115118s][吞吐率：8.69req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003106s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:31+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051493s][吞吐率：19.42req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000361s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000754s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000714s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000831s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.061671s][吞吐率：16.22req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000341s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000531s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:33+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037206s][吞吐率：26.88req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188673 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000909s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188673 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188673 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000804s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188673 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001321s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:04:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.065941s][吞吐率：15.17req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001143s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000743s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000367s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001253s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.088281s][吞吐率：11.33req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000468s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000521s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001101s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.092901s][吞吐率：10.76req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:36+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016891s][吞吐率：59.20req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:04:49+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.032922s][吞吐率：30.37req/s] [内存消耗：4,076.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000418s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:50+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/classdiscuss?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/classdiscuss?OS=iOS&id=130&version=1.0.5 [运行时间：0.032255s][吞吐率：31.00req/s] [内存消耗：4,039.04kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassDiscuss[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000907s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000672s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_discuss` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT `d`.* FROM `tpn_class_discuss` `d` LEFT JOIN `tpn_class_discuss_user` `u` ON `d`.`id`=`u`.`discuss_id` WHERE  `d`.`class_id` = '130'  AND `u`.`user_id` = 249  AND `u`.`type` = 1 ORDER BY d.created_at asc [ RunTime:0.000441s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:56+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/discussuser?OS=iOS&id=130&type=1&version=1.0.5
[ log ] api.kzwchina.com/common/study/discussuser?OS=iOS&id=130&type=1&version=1.0.5 [运行时间：0.040139s][吞吐率：24.91req/s] [内存消耗：4,273.62kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'type' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->DiscussUser[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000865s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `class_id` = 130 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT c.uid as user_id,`u`.`name`,u.face as photo,1 as type,`c`.`call` FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' [ RunTime:0.000706s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000752s ]
[ sql ] [ SQL ] SELECT id as user_id,`name`,`photo`,2 as type,if(id=585,'班主任','讲师') as 'call' FROM `tpn_teacher` WHERE  `id` IN (0,585) [ RunTime:0.000306s ]

---------------------------------------------------------------
[ 2019-04-02T15:04:57+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016961s][吞吐率：58.96req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:04:58+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017555s][吞吐率：56.96req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:05:02+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037863s][吞吐率：26.41req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188702 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000913s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188702 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188702 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000806s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188702 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001290s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:05:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.076055s][吞吐率：13.15req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001155s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000742s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000426s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001086s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000232s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.070989s][吞吐率：14.09req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000357s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:04+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.108884s][吞吐率：9.18req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000302s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000413s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001016s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000232s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:06+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.032368s][吞吐率：30.89req/s] [内存消耗：4,076.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000672s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000368s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:08+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037069s][吞吐率：26.98req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000865s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188708 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000922s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188708 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188708 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000788s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188708 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001027s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:05:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.074806s][吞吐率：13.37req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.014092s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000373s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.001277s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 285 ORDER BY date desc [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 267 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 277 ORDER BY date desc [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000240s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.087554s][吞吐率：11.42req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000880s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000564s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000420s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001100s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000256s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.103482s][吞吐率：9.66req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000337s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000797s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:32+08:00 ] 172.31.69.247 123.117.10.225 POST /common/order/order
[ log ] api.kzwchina.com/common/order/order [运行时间：0.140644s][吞吐率：7.11req/s] [内存消耗：4,261.45kb] [文件加载：71]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'order',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '29',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'id' => '46',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Order->Order[ /www/wwwroot/kouzhiwen/application/api/common/controller/Order.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 46 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] INSERT INTO `tpn_class_user` (`class_id` , `uid` , `status` , `created_at` , `updated_at`) VALUES (46 , 249 , 1 , 1554188732 , 1554188732) [ RunTime:0.003642s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:36+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036111s][吞吐率：27.69req/s] [内存消耗：4,125.72kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000878s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000664s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188736 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000923s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188736 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188736 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000800s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188736 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000474s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:05:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.077378s][吞吐率：12.92req/s] [内存消耗：4,474.85kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000540s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.008017s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.011334s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000393s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001083s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000225s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.055396s][吞吐率：18.05req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000301s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.093960s][吞吐率：10.64req/s] [内存消耗：4,474.85kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000331s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000413s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000884s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:46+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039193s][吞吐率：25.51req/s] [内存消耗：4,125.98kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '68',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000431s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000673s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 68 [ RunTime:0.002593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 68 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 68 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 68 , 1554188746) [ RunTime:0.001936s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:47+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=68&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=68&type=1&uid=249&version=1.0.5 [运行时间：0.040438s][吞吐率：24.73req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '68',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 68  AND `type` = 1 LIMIT 1 [ RunTime:0.000376s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:47+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.055044s][吞吐率：18.17req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '68',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '68' ORDER BY id desc LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '68' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000446s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=68&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=68&ctype=2&uid=249&version=1.0.5 [运行时间：0.040764s][吞吐率：24.53req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '68',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 68 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 68 , 2) [ RunTime:0.003977s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 68 [ RunTime:0.004802s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:49+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=68&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=68&ctype=2&uid=249&version=1.0.5 [运行时间：0.035852s][吞吐率：27.89req/s] [内存消耗：3,980.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '68',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000516s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000859s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 68 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 68 [ RunTime:0.004339s ]

---------------------------------------------------------------
[ 2019-04-02T15:05:54+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036404s][吞吐率：27.47req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=b8rhgie097jgbo3bhue45mcpe6',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000677s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188754 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188754 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188754 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188754 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001119s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:07:55+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116416s][吞吐率：8.59req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000935s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003110s ]

---------------------------------------------------------------
[ 2019-04-02T15:07:55+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050930s][吞吐率：19.63req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000843s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000732s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000787s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000316s ]

---------------------------------------------------------------
[ 2019-04-02T15:07:55+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.066187s][吞吐率：15.11req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000540s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-04-02T15:07:56+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037360s][吞吐率：26.77req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188876 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000938s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188876 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188876 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000758s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554188876 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001207s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:07:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.044360s][吞吐率：22.54req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000492s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000984s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000306s ]

---------------------------------------------------------------
[ 2019-04-02T15:07:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.094373s][吞吐率：10.60req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000343s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000758s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000421s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001216s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-04-02T15:07:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.113360s][吞吐率：8.82req/s] [内存消耗：4,474.54kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000410s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001026s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-04-02T15:07:59+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040489s][吞吐率：24.70req/s] [内存消耗：4,124.32kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '67',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000671s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 67 [ RunTime:0.002766s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 67 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 67 LIMIT 1 [ RunTime:0.000373s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 67 , 1554188879) [ RunTime:0.002162s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:00+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040680s][吞吐率：24.58req/s] [内存消耗：3,941.79kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '67',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000972s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000660s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '67' ORDER BY id desc LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '67' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000488s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=67&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=67&type=1&uid=249&version=1.0.5 [运行时间：0.055157s][吞吐率：18.13req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '67',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 67  AND `type` = 1 LIMIT 1 [ RunTime:0.000344s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:00+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.015994s][吞吐率：62.52req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:08:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=67&ctype=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=67&ctype=1&uid=249&version=1.0.5 [运行时间：0.037910s][吞吐率：26.38req/s] [内存消耗：3,981.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '67',
  'ctype' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000539s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000904s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 67 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 67 , 1) [ RunTime:0.005668s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:09+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.036632s][吞吐率：27.30req/s] [内存消耗：4,060.30kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '67',
  'course_time' => '8867.520000',
  'time' => '4.640000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 67  AND `type` = 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 67 , 4.64 , 1 , 8867.52) [ RunTime:0.004400s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:11+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.069372s][吞吐率：14.42req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000468s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001160s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000739s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000964s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000234s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:11+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.112755s][吞吐率：8.87req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001078s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:11+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.116356s][吞吐率：8.59req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000664s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:13+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.075074s][吞吐率：13.32req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001171s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000719s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000919s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000222s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:13+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.094708s][吞吐率：10.56req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000505s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001113s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000224s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:13+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.109093s][吞吐率：9.17req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:14+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037874s][吞吐率：26.40req/s] [内存消耗：4,106.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000682s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000679s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.002637s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000391s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000260s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:14+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5 [运行时间：0.039651s][吞吐率：25.22req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '303',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000630s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000353s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:14+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.053882s][吞吐率：18.56req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000367s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000442s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:16+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038287s][吞吐率：26.12req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000254s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:16+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039624s][吞吐率：25.24req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000386s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:16+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.051340s][吞吐率：19.48req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000299s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000428s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:33+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.076781s][吞吐率：13.02req/s] [内存消耗：4,474.54kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001145s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000598s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000413s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001090s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:33+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.101082s][吞吐率：9.89req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000503s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001109s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000195s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:33+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.104213s][吞吐率：9.60req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000334s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000551s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:34+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038300s][吞吐率：26.11req/s] [内存消耗：4,122.52kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000644s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000661s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 66 [ RunTime:0.002706s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 66 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 66 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:34+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=66&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=66&type=1&uid=249&version=1.0.5 [运行时间：0.037053s][吞吐率：26.99req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '66',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000372s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000965s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000681s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 66  AND `type` = 1 LIMIT 1 [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:34+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039696s][吞吐率：25.19req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000422s ]

---------------------------------------------------------------
[ 2019-04-02T15:08:45+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.040824s][吞吐率：24.50req/s] [内存消耗：4,170.28kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '66',
  'course_time' => '9993.400000',
  'time' => '6.800000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000701s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 66  AND `type` = 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 446 [ RunTime:0.003944s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 66 , 6.8 , 1 , 9993.4) [ RunTime:0.004580s ]

---------------------------------------------------------------
[ 2019-04-02T15:09:58+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.031404s][吞吐率：31.84req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000924s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000217s ]

---------------------------------------------------------------
[ 2019-04-02T15:09:58+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032602s][吞吐率：30.67req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => 'e99bd8948d2bbacee435dc9a5e5c00b8',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000322s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'e99bd8948d2bbacee435dc9a5e5c00b8' LIMIT 1 [ RunTime:0.000710s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000306s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000428s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:25+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.045707s][吞吐率：21.88req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000502s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001202s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000734s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000729s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000382s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:25+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.086419s][吞吐率：11.57req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000384s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000715s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001015s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000238s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:25+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.121691s][吞吐率：8.22req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000751s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000409s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000973s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000240s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:25+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016423s][吞吐率：60.89req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:11:27+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037588s][吞吐率：26.60req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000675s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:27+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.038560s][吞吐率：25.93req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001028s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000531s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000378s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:27+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.044983s][吞吐率：22.23req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5bb9c56o4lnsojb3r17iupk2v0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000342s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000735s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000426s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:37+08:00 ] 172.31.69.247 123.117.10.225 POST /common/login/login
[ log ] api.kzwchina.com/common/login/login [运行时间：0.159389s][吞吐率：6.27req/s] [内存消耗：4,218.20kb] [文件加载：75]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'login',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'login_type' => 'phone',
  'phone' => '18710045797',
  'password' => '.........',
  'code' => '',
)
[ info ] [ RUN ] app\api\common\controller\Login->login[ /www/wwwroot/kouzhiwen/application/api/common/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000895s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  (  username='18710045797' OR phone='18710045797' ) LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] UPDATE `tpn_user`  SET `logintoken`='393b367dd5ffe4e7c9f4fff35061ab3b',`deviceToken`=NULL  WHERE  `uid` = 248 [ RunTime:0.012877s ]
[ error ] [8]未定义数组索引: deviceToken[/www/wwwroot/kouzhiwen/application/common/model/User.php:116]

---------------------------------------------------------------
[ 2019-04-02T15:11:38+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.045165s][吞吐率：22.14req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000460s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001188s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000726s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000583s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000406s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:38+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043744s][吞吐率：22.86req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000893s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000303s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:39+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030721s][吞吐率：32.55req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000911s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000223s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:39+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032307s][吞吐率：30.95req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:51+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031429s][吞吐率：31.82req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000878s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000335s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:51+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031399s][吞吐率：31.85req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000398s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000776s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000406s ]

---------------------------------------------------------------
[ 2019-04-02T15:11:58+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032300s][吞吐率：30.96req/s] [内存消耗：3,869.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000298s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116625s][吞吐率：8.57req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000887s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003072s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:18+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050951s][吞吐率：19.63req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000379s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000733s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000502s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000808s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065439s][吞吐率：15.28req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:19+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037191s][吞吐率：26.89req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554189139 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000924s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554189139 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554189139 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000798s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554189139 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001056s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:12:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.063129s][吞吐率：15.84req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001970s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000704s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000700s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000412s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.069684s][吞吐率：14.35req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000363s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000910s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000517s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000399s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001194s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 165 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 72 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.095743s][吞吐率：10.44req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000361s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000777s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:22+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038329s][吞吐率：26.09req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.002885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000384s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:23+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.040229s][吞吐率：24.86req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000848s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000659s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000373s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:23+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.054162s][吞吐率：18.46req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000478s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:25+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.041664s][吞吐率：24.00req/s] [内存消耗：4,170.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '65',
  'course_time' => '8877.380000',
  'time' => '6.960000',
  'type' => '2',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 2 [ RunTime:0.000375s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 445 [ RunTime:0.004746s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 65 , 6.96 , 2 , 8877.38) [ RunTime:0.003543s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:26+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038852s][吞吐率：25.74req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000915s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000674s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.002654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000263s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:26+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.040277s][吞吐率：24.83req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000348s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:26+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052544s][吞吐率：19.03req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000315s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000491s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:32+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.041681s][吞吐率：23.99req/s] [内存消耗：4,170.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '65',
  'course_time' => '8877.380000',
  'time' => '10.660000',
  'type' => '2',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 2 [ RunTime:0.000364s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 450 [ RunTime:0.004230s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 65 , 10.66 , 2 , 8877.38) [ RunTime:0.004183s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.070006s][吞吐率：14.28req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000567s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001234s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000738s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000386s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001007s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000243s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.103482s][吞吐率：9.66req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000511s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001038s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000224s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.103605s][吞吐率：9.65req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000356s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000573s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:35+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016071s][吞吐率：62.22req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:12:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038513s][吞吐率：25.97req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039086s][吞吐率：25.58req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000839s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000366s ]

---------------------------------------------------------------
[ 2019-04-02T15:12:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.046656s][吞吐率：21.43req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000436s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:16+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.071523s][吞吐率：13.98req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000505s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001132s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000373s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000961s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:16+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.064742s][吞吐率：15.45req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:16+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.125121s][吞吐率：7.99req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000504s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000997s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.078942s][吞吐率：12.67req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001147s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000493s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000434s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001007s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 273 ORDER BY date desc [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 262 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000225s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.097761s][吞吐率：10.23req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000342s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000565s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000494s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000412s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000972s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.105148s][吞吐率：9.51req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000322s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000531s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000274s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:27+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.070036s][吞吐率：14.28req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000484s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001149s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000418s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000904s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.114333s][吞吐率：8.75req/s] [内存消耗：4,474.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000363s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000754s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000489s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000413s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000917s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.116859s][吞吐率：8.56req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000344s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.071941s][吞吐率：13.90req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000486s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001151s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000727s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001140s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.084543s][吞吐率：11.83req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000361s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.112921s][吞吐率：8.86req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000320s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000565s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000409s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000932s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000194s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.067794s][吞吐率：14.75req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000500s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001140s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000735s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000384s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001248s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.093343s][吞吐率：10.71req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000744s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000588s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000514s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000411s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001080s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000223s ]

---------------------------------------------------------------
[ 2019-04-02T15:14:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.101106s][吞吐率：9.89req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000320s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:34+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.116550s][吞吐率：8.58req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000946s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003153s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:36+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.042352s][吞吐率：23.61req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001141s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000726s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000570s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000409s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.041443s][吞吐率：24.13req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:37+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030025s][吞吐率：33.31req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:37+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032775s][吞吐率：30.51req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000361s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000780s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000446s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:39+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031085s][吞吐率：32.17req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000904s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000686s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000334s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:39+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030457s][吞吐率：32.83req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000356s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000296s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000407s ]

---------------------------------------------------------------
[ 2019-04-02T15:17:45+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032068s][吞吐率：31.18req/s] [内存消耗：3,869.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '4',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000862s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000630s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000292s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 4  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000416s ]

---------------------------------------------------------------
[ 2019-04-02T15:18:54+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031815s][吞吐率：31.43req/s] [内存消耗：3,873.55kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000894s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000293s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 2  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000387s ]

---------------------------------------------------------------
[ 2019-04-02T15:20:02+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032200s][吞吐率：31.06req/s] [内存消耗：3,874.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000938s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000285s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 10,10 [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-04-02T15:20:06+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031552s][吞吐率：31.69req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000496s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000650s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000335s ]

---------------------------------------------------------------
[ 2019-04-02T15:20:06+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030404s][吞吐率：32.89req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000736s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000300s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000399s ]

---------------------------------------------------------------
[ 2019-04-02T15:24:45+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/notice_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/notice_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.032011s][吞吐率：31.24req/s] [内存消耗：4,076.70kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->NoticeList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000900s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_notice` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_notice` WHERE  `class_id` = 130 ORDER BY created_at desc [ RunTime:0.000375s ]

---------------------------------------------------------------
[ 2019-04-02T15:24:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.075269s][吞吐率：13.29req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.010975s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001159s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000728s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000575s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001124s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000246s ]

---------------------------------------------------------------
[ 2019-04-02T15:24:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.095305s][吞吐率：10.49req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000708s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000574s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000505s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001060s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000222s ]

---------------------------------------------------------------
[ 2019-04-02T15:24:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.109783s][吞吐率：9.11req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000759s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T15:27:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5 [运行时间：0.050119s][吞吐率：19.95req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '303',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.004790s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001162s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000748s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000445s ]

---------------------------------------------------------------
[ 2019-04-02T15:27:03+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.077672s][吞吐率：12.87req/s] [内存消耗：4,106.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000868s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000542s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.002807s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000253s ]

---------------------------------------------------------------
[ 2019-04-02T15:27:03+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.089414s][吞吐率：11.18req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000446s ]

---------------------------------------------------------------
[ 2019-04-02T15:29:27+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_hot?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_hot?OS=iOS&id=130&version=1.0.5 [运行时间：0.032336s][吞吐率：30.93req/s] [内存消耗：4,052.16kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=8864bt9fshs9p5mmc5os00eko0',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassHot[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_teacher_article` WHERE  `class_id` = 130 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_teacher_article` WHERE  `class_id` = 130 ORDER BY add_time desc LIMIT 0,10 [ RunTime:0.000278s ]

---------------------------------------------------------------
[ 2019-04-02T15:31:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.045598s][吞吐率：21.93req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001001s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000657s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000349s ]

---------------------------------------------------------------
[ 2019-04-02T15:31:15+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.047777s][吞吐率：20.93req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000696s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000430s ]

---------------------------------------------------------------
[ 2019-04-02T15:31:15+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030939s][吞吐率：32.32req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000388s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000904s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000322s ]

---------------------------------------------------------------
[ 2019-04-02T15:31:15+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030885s][吞吐率：32.38req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '393b367dd5ffe4e7c9f4fff35061ab3b',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000394s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '393b367dd5ffe4e7c9f4fff35061ab3b' LIMIT 1 [ RunTime:0.000653s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000305s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000406s ]

---------------------------------------------------------------
[ 2019-04-02T15:31:37+08:00 ] 172.31.69.247 123.117.10.225 GET /root/login/login.html
[ log ] admin.kzwchina.com/root/login/login.html [运行时间：0.017882s][吞吐率：55.92req/s] [内存消耗：2,307.40kb] [文件加载：49]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'root',
    2 => 'login',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
)
[ info ] [ RUN ] app\admin\root\controller\Login->login[ /www/wwwroot/kouzhiwen/application/admin/root/controller/Login.php ]
[ info ] [ VIEW ] /www/wwwroot/kouzhiwen/public/../application/admin/root/view/login/login.html [ array (
) ]
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:31:37+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/css/min/reset.css
[ log ] admin.kzwchina.com/static/select/css/min/reset.css [运行时间：0.016986s][吞吐率：58.87req/s] [内存消耗：1,968.71kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/css,*/*;q=0.1',
  'referer' => 'http://admin.kzwchina.com/root/login/login.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'min' => 'reset.css',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:31:37+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/js/min/jquery-1.7.2.min.js
[ log ] admin.kzwchina.com/static/select/js/min/jquery-1.7.2.min.js [运行时间：0.017726s][吞吐率：56.41req/s] [内存消耗：1,968.70kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => '*/*',
  'referer' => 'http://admin.kzwchina.com/root/login/login.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'min' => 'jquery-1.7.2.min.js',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:31:37+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/css/min/reset.css
[ log ] admin.kzwchina.com/static/select/css/min/reset.css [运行时间：0.023921s][吞吐率：41.80req/s] [内存消耗：1,968.71kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/css,*/*;q=0.1',
  'referer' => 'http://admin.kzwchina.com/root/login/login.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'min' => 'reset.css',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:31:37+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/js/min/jquery-1.7.2.min.js
[ log ] admin.kzwchina.com/static/select/js/min/jquery-1.7.2.min.js [运行时间：0.023745s][吞吐率：42.11req/s] [内存消耗：1,968.70kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => '*/*',
  'referer' => 'http://admin.kzwchina.com/root/login/login.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
)
[ info ] [ PARAM ] array (
  'min' => 'jquery-1.7.2.min.js',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:32:41+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116312s][吞吐率：8.60req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003109s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:42+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.052431s][吞吐率：19.07req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000371s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000803s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000480s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000735s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000815s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:42+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.066406s][吞吐率：15.06req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:43+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037180s][吞吐率：26.90req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190363 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000916s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190363 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190363 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000800s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190363 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001316s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:32:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.069587s][吞吐率：14.37req/s] [内存消耗：4,474.54kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.001055s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001154s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000710s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000386s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000369s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.095734s][吞吐率：10.45req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000359s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000416s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001038s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.085224s][吞吐率：11.73req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000310s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:47+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037145s][吞吐率：26.92req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000852s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000667s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.002541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:48+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.041542s][吞吐率：24.07req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000481s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000854s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000678s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000388s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000499s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.056021s][吞吐率：17.85req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000347s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.070894s][吞吐率：14.11req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001127s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000722s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001086s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.080319s][吞吐率：12.45req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-04-02T15:32:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.127221s][吞吐率：7.86req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000294s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000522s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000403s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001109s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:05+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.075633s][吞吐率：13.22req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.014159s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.002750s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001270s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000232s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:05+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.081018s][吞吐率：12.34req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000716s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000992s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000455s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:05+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.097408s][吞吐率：10.27req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000356s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000268s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:05+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016653s][吞吐率：60.05req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:33:27+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.067892s][吞吐率：14.73req/s] [内存消耗：4,475.43kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001146s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000761s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 183 ORDER BY date desc [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000299s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:27+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.060782s][吞吐率：16.45req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:27+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.107130s][吞吐率：9.33req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000510s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000415s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001010s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000230s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.077073s][吞吐率：12.97req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.016233s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001144s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000730s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000974s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.092290s][吞吐率：10.84req/s] [内存消耗：4,474.54kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000342s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000412s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001016s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]

---------------------------------------------------------------
[ 2019-04-02T15:33:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.101267s][吞吐率：9.87req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-04-02T15:35:02+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.045177s][吞吐率：22.14req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001169s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000731s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000330s ]

---------------------------------------------------------------
[ 2019-04-02T15:35:02+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.091269s][吞吐率：10.96req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000324s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000694s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000997s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000224s ]

---------------------------------------------------------------
[ 2019-04-02T15:35:02+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.110565s][吞吐率：9.04req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000297s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000551s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000398s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001093s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000237s ]

---------------------------------------------------------------
[ 2019-04-02T15:37:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.076382s][吞吐率：13.09req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000531s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000413s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001063s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-04-02T15:37:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.116411s][吞吐率：8.59req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000419s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000398s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001040s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000223s ]

---------------------------------------------------------------
[ 2019-04-02T15:37:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.113182s][吞吐率：8.84req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000575s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-04-02T15:39:22+08:00 ] 172.31.69.247 123.117.10.225 POST /root/login/login.html
[ log ] admin.kzwchina.com/root/login/login.html [运行时间：0.030912s][吞吐率：32.35req/s] [内存消耗：3,838.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'root',
    2 => 'login',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://admin.kzwchina.com',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'referer' => 'http://admin.kzwchina.com/root/login/login.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '29',
)
[ info ] [ PARAM ] array (
  'username' => 'yunxi',
  'password' => 'yunxi',
)
[ info ] [ RUN ] app\admin\root\controller\Login->login[ /www/wwwroot/kouzhiwen/application/admin/root/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_admin` [ RunTime:0.000853s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_admin` WHERE  `username` = 'yunxi' LIMIT 1 [ RunTime:0.000412s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000729s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000368s ]

---------------------------------------------------------------
[ 2019-04-02T15:39:22+08:00 ] 172.31.69.247 123.117.10.225 POST /root/login/login.html
[ log ] admin.kzwchina.com/root/login/login.html [运行时间：0.029672s][吞吐率：33.70req/s] [内存消耗：3,839.17kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'root',
    2 => 'login',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'accept' => 'application/json, text/javascript, */*; q=0.01',
  'origin' => 'http://admin.kzwchina.com',
  'x-requested-with' => 'XMLHttpRequest',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'referer' => 'http://admin.kzwchina.com/root/login/login.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '29',
)
[ info ] [ PARAM ] array (
  'username' => 'yunxi',
  'password' => 'yunxi',
)
[ info ] [ RUN ] app\admin\root\controller\Login->login[ /www/wwwroot/kouzhiwen/application/admin/root/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_admin` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_admin` WHERE  `username` = 'yunxi' LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000712s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000360s ]

---------------------------------------------------------------
[ 2019-04-02T15:39:23+08:00 ] 172.31.69.247 123.117.10.225 GET /root/index/index.html
[ log ] admin.kzwchina.com/root/index/index.html [运行时间：0.033385s][吞吐率：29.95req/s] [内存消耗：3,792.00kb] [文件加载：59]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'root',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://admin.kzwchina.com/root/login/login.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\admin\root\controller\Index->index[ /www/wwwroot/kouzhiwen/application/admin/root/controller/Index.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ DB ] INIT mysql
[ info ] [ DB ] INIT mysql
[ info ] [ VIEW ] /www/wwwroot/kouzhiwen/public/../application/admin/root/view/index/index.html [ array (
  0 => 'user',
  1 => 'menu',
  2 => 'mc',
  3 => 'group',
  4 => 'gid',
  5 => 'access',
  6 => 'id',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000390s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_access_group` [ RunTime:0.000757s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_access_group` WHERE  `id` IN (23) [ RunTime:0.000351s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000298s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SELECT * FROM `tpn_access_group` WHERE  `id` = 23 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000272s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_menu` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_menu` WHERE  `module` IN ('admin/root','admin/root','admin/root','admin/root','admin/root','admin/root','admin/root','admin/root','admin/root','admin/course','admin/course','admin/course','admin/course','admin/course','admin/course','admin/course','admin/info','admin/info','admin/info','admin/info','admin/finance','admin/finance','admin/info')  AND `controller` IN ('AccessGroup','Admin','Banner','Classify','Protocol','Comment','Notice','Information','Log','Course','Coursetype','Paper','Study','Classtype','Classcourse','Questionnaire','Teacher','User','Teachertype','Enterprise','Userdetailed','Recharge','Headmaster') ORDER BY `mcid` ASC,`id` ASC [ RunTime:0.000876s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000279s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_menu_category` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_menu_category` ORDER BY `sort` ASC [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-04-02T15:39:23+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/css/min/reset.css
[ log ] admin.kzwchina.com/static/select/css/min/reset.css [运行时间：0.024456s][吞吐率：40.89req/s] [内存消耗：1,969.02kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/css,*/*;q=0.1',
  'referer' => 'http://admin.kzwchina.com/root/index/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'reset.css',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:39:23+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/js/min/jquery-1.7.2.min.js
[ log ] admin.kzwchina.com/static/select/js/min/jquery-1.7.2.min.js [运行时间：0.024375s][吞吐率：41.03req/s] [内存消耗：1,968.95kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => '*/*',
  'referer' => 'http://admin.kzwchina.com/root/index/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'jquery-1.7.2.min.js',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:39:23+08:00 ] 172.31.69.247 123.117.10.225 GET /root/index/welcome/id/23.html
[ log ] admin.kzwchina.com/root/index/welcome/id/23.html [运行时间：0.025222s][吞吐率：39.65req/s] [内存消耗：3,386.92kb] [文件加载：58]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'root',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://admin.kzwchina.com/root/index/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'id' => '23',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\admin\root\controller\Index->welcome[ /www/wwwroot/kouzhiwen/application/admin/root/controller/Index.php ]
[ info ] [ VIEW ] /www/wwwroot/kouzhiwen/public/../application/admin/root/view/index/welcome.html [ array (
  0 => 'id',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000368s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_access_group` [ RunTime:0.000741s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_access_group` WHERE  `id` IN (23) [ RunTime:0.000361s ]

---------------------------------------------------------------
[ 2019-04-02T15:39:23+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/css/min/reset.css
[ log ] admin.kzwchina.com/static/select/css/min/reset.css [运行时间：0.024250s][吞吐率：41.24req/s] [内存消耗：1,968.89kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/css,*/*;q=0.1',
  'referer' => 'http://admin.kzwchina.com/root/index/welcome/id/23.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'reset.css',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:39:23+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/js/min/jquery-1.7.2.min.js
[ log ] admin.kzwchina.com/static/select/js/min/jquery-1.7.2.min.js [运行时间：0.024175s][吞吐率：41.37req/s] [内存消耗：1,969.12kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => '*/*',
  'referer' => 'http://admin.kzwchina.com/root/index/welcome/id/23.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'jquery-1.7.2.min.js',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:39:52+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036330s][吞吐率：27.53req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000913s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000638s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190792 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190792 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190792 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190792 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001133s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:40:01+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037040s][吞吐率：27.00req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000894s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190801 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190801 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190801 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190801 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001084s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:40:03+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037075s][吞吐率：26.97req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000475s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000919s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000670s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190803 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000880s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190803 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190803 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190803 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001076s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:40:05+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035494s][吞吐率：28.17req/s] [内存消耗：4,125.72kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000656s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190805 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190805 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190805 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000783s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190805 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000407s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:40:07+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036849s][吞吐率：27.14req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000477s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000657s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190807 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000766s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190807 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190807 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554190807 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001291s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:40:11+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.075374s][吞吐率：13.27req/s] [内存消耗：4,474.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000998s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.007719s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.006770s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000401s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.002430s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000383s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]

---------------------------------------------------------------
[ 2019-04-02T15:40:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.085522s][吞吐率：11.69req/s] [内存消耗：4,475.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000370s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000743s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000575s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000412s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001141s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-04-02T15:40:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.099889s][吞吐率：10.01req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-04-02T15:40:28+08:00 ] 172.31.69.247 61.129.6.159 GET /root/index/index.html
[ log ] admin.kzwchina.com/root/index/index.html [运行时间：0.017899s][吞吐率：55.87req/s] [内存消耗：2,409.12kb] [文件加载：48]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'root',
    2 => 'index',
  ),
)
[ info ] [ HEADER ] array (
  'user-agent' => 'Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3; rv:11.0) like Gecko',
  'accept' => '*/*',
  'accept-language' => 'zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.4',
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:42:44+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/sign?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/sign?OS=iOS&id=43&version=1.0.5 [运行时间：0.034481s][吞吐率：29.00req/s] [内存消耗：3,971.88kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->sign[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000916s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000667s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] INSERT INTO `tpn_sign` (`class_id` , `uid` , `date` , `created_at`) VALUES (43 , 249 , '2019-04-02' , 1554190964) [ RunTime:0.002587s ]

---------------------------------------------------------------
[ 2019-04-02T15:42:44+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.070015s][吞吐率：14.28req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000395s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001036s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000696s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000585s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000958s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]

---------------------------------------------------------------
[ 2019-04-02T15:42:44+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.078214s][吞吐率：12.79req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000327s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-04-02T15:42:44+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.124678s][吞吐率：8.02req/s] [内存消耗：4,475.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=jfn93lavosd16h1deme1besod2',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000294s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000415s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001030s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]

---------------------------------------------------------------
[ 2019-04-02T15:43:49+08:00 ] 172.31.69.247 123.117.10.225 GET /course/classcourse/index.html
[ log ] admin.kzwchina.com/course/classcourse/index.html [运行时间：0.120674s][吞吐率：8.29req/s] [内存消耗：4,348.55kb] [文件加载：67]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'course',
    2 => 'classcourse',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'upgrade-insecure-requests' => '1',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
  'referer' => 'http://admin.kzwchina.com/root/index/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\admin\course\controller\Classcourse->index[ /www/wwwroot/kouzhiwen/application/admin/course/controller/Classcourse.php ]
[ info ] [ VIEW ] /www/wwwroot/kouzhiwen/public/../application/admin/course/view/classcourse/index.html [ array (
  0 => 'data',
  1 => 'page',
  2 => 'keywords',
  3 => 'checkVal',
) ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_access_group` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_access_group` WHERE  `id` IN (23) [ RunTime:0.000360s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `identity` = '1,3' [ RunTime:0.003728s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `enterprise_id` = 13 [ RunTime:0.000451s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `s`.`id`=`c`.`class_id` WHERE  `s`.`enterprise_id` = 13 LIMIT 1 [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`type`,`c`.`teacher_id`,`c`.`photo`,`c`.`url`,`c`.`reading`,`c`.`start`,`c`.`status`,`c`.`updated_at`,`s`.`name` FROM `tpn_class_course` `c` LEFT JOIN `tpn_class` `s` ON `s`.`id`=`c`.`class_id` WHERE  `s`.`enterprise_id` = 13 ORDER BY c.id desc LIMIT 0,10 [ RunTime:0.000880s ]

---------------------------------------------------------------
[ 2019-04-02T15:43:49+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/css/min/reset.css
[ log ] admin.kzwchina.com/static/select/css/min/reset.css [运行时间：0.023585s][吞吐率：42.40req/s] [内存消耗：1,968.89kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/css,*/*;q=0.1',
  'referer' => 'http://admin.kzwchina.com/course/classcourse/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'reset.css',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:43:49+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/js/min/jquery-1.7.2.min.js
[ log ] admin.kzwchina.com/static/select/js/min/jquery-1.7.2.min.js [运行时间：0.023534s][吞吐率：42.49req/s] [内存消耗：1,969.12kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => '*/*',
  'referer' => 'http://admin.kzwchina.com/course/classcourse/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'jquery-1.7.2.min.js',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:43:49+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/css/min/reset.css
[ log ] admin.kzwchina.com/static/select/css/min/reset.css [运行时间：0.024372s][吞吐率：41.03req/s] [内存消耗：1,968.89kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => 'text/css,*/*;q=0.1',
  'referer' => 'http://admin.kzwchina.com/course/classcourse/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'reset.css',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:43:49+08:00 ] 172.31.69.247 123.117.10.225 GET /static/select/js/min/jquery-1.7.2.min.js
[ log ] admin.kzwchina.com/static/select/js/min/jquery-1.7.2.min.js [运行时间：0.024427s][吞吐率：40.94req/s] [内存消耗：1,969.12kb] [文件加载：43]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'admin'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'admin',
    1 => 'static',
    2 => 'select',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'admin.kzwchina.com',
  'connection' => 'keep-alive',
  'user-agent' => 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.25 Safari/537.36 Core/1.70.3650.400 QQBrowser/10.4.3341.400',
  'accept' => '*/*',
  'referer' => 'http://admin.kzwchina.com/course/classcourse/index.html',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-CN,zh;q=0.9',
  'cookie' => 'PHPSESSID=pifc09q24cpnh2beq3fb45cig7',
)
[ info ] [ PARAM ] array (
  'min' => 'jquery-1.7.2.min.js',
)
[ info ] [ LOG ] INIT File

---------------------------------------------------------------
[ 2019-04-02T15:45:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115614s][吞吐率：8.65req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003098s ]

---------------------------------------------------------------
[ 2019-04-02T15:45:37+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051824s][吞吐率：19.30req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000409s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000796s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000702s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000825s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T15:45:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065500s][吞吐率：15.27req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000319s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000573s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-04-02T15:45:38+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036827s][吞吐率：27.15req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000855s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191138 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191138 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191138 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191138 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001268s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:45:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.061350s][吞吐率：16.30req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000947s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000710s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001306s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000265s ]

---------------------------------------------------------------
[ 2019-04-02T15:45:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.079960s][吞吐率：12.51req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000371s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000799s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000600s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000523s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000617s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001146s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-04-02T15:45:41+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.087648s][吞吐率：11.41req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000311s ]

---------------------------------------------------------------
[ 2019-04-02T15:50:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.045586s][吞吐率：21.94req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001168s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000741s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000702s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000363s ]

---------------------------------------------------------------
[ 2019-04-02T15:50:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.087182s][吞吐率：11.47req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000795s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000505s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001069s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000248s ]

---------------------------------------------------------------
[ 2019-04-02T15:50:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.116156s][吞吐率：8.61req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=av6r1ln0sffjvak07tu4p8eh23',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000506s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000402s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001048s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000223s ]

---------------------------------------------------------------
[ 2019-04-02T15:50:50+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115930s][吞吐率：8.63req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000476s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000932s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000651s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003090s ]

---------------------------------------------------------------
[ 2019-04-02T15:50:50+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.052601s][吞吐率：19.01req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000881s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000645s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000493s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000700s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000810s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000281s ]

---------------------------------------------------------------
[ 2019-04-02T15:50:50+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.067247s][吞吐率：14.87req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-04-02T15:50:56+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035875s][吞吐率：27.87req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000911s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191456 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191456 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191456 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191456 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001077s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:50:59+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.031137s][吞吐率：32.12req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000918s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.072638s][吞吐率：13.77req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000931s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000416s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.007532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.007148s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001314s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.001342s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.072889s][吞吐率：13.72req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000758s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000498s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000412s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001082s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000469s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000240s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.088383s][吞吐率：11.31req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000710s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000551s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000278s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:01+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.015988s][吞吐率：62.55req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:51:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.030572s][吞吐率：32.71req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000926s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000680s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000308s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:05+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035714s][吞吐率：28.00req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000482s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191465 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191465 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191465 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191465 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001077s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:51:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.078992s][吞吐率：12.66req/s] [内存消耗：4,475.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001185s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000642s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000425s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001218s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:08+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.100597s][吞吐率：9.94req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000372s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000414s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000939s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:08+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.116198s][吞吐率：8.61req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000310s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.060249s][吞吐率：16.60req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001119s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000724s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000386s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001226s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.040090s][吞吐率：24.94req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000422s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000745s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.095444s][吞吐率：10.48req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000398s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000754s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000523s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000409s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000482s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000893s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000230s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:14+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037177s][吞吐率：26.90req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000459s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000660s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000515s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039356s][吞吐率：25.41req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000383s ]

---------------------------------------------------------------
[ 2019-04-02T15:51:20+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.048565s][吞吐率：20.59req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000573s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000449s ]

---------------------------------------------------------------
[ 2019-04-02T15:52:40+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032318s][吞吐率：30.94req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000975s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000646s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000373s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000439s ]

---------------------------------------------------------------
[ 2019-04-02T15:52:54+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.041415s][吞吐率：24.15req/s] [内存消耗：4,106.96kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000888s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000658s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000683s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 311 [ RunTime:0.005900s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 311 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 311 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000267s ]

---------------------------------------------------------------
[ 2019-04-02T15:52:54+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=311&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=311&type=1&uid=249&version=1.0.5 [运行时间：0.039016s][吞吐率：25.63req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '311',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000343s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 311  AND `type` = 1 LIMIT 1 [ RunTime:0.000352s ]

---------------------------------------------------------------
[ 2019-04-02T15:52:54+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.048372s][吞吐率：20.67req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000707s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000536s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000423s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.073546s][吞吐率：13.60req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.006599s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001155s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000739s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001105s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000194s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.054541s][吞吐率：18.33req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000361s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000532s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.115275s][吞吐率：8.67req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000510s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001132s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:22+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.062779s][吞吐率：15.93req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001137s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000712s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.001120s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000624s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001256s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000326s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 282 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000274s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000274s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:22+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.083110s][吞吐率：12.03req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000372s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000496s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000406s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001115s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:22+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.084667s][吞吐率：11.81req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000540s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000304s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:29+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.078476s][吞吐率：12.74req/s] [内存消耗：4,475.49kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000424s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.009845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001072s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.009952s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000240s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:29+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.075334s][吞吐率：13.27req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000364s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000557s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000885s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000438s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:29+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.091006s][吞吐率：10.99req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000745s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:38+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.034755s][吞吐率：28.77req/s] [内存消耗：4,125.72kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000864s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191618 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000915s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191618 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191618 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000808s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554191618 ORDER BY id<>43,a.start desc LIMIT 10,10 [ RunTime:0.000451s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T15:53:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/study_details?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=47&version=1.0.5 [运行时间：0.036999s][吞吐率：27.03req/s] [内存消耗：4,151.86kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000652s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 47 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 249 LIMIT 1 [ RunTime:0.000511s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000384s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.067215s][吞吐率：14.88req/s] [内存消耗：4,474.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000458s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001137s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000740s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000384s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000367s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001052s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 187 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000246s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.062500s][吞吐率：16.00req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000318s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.104542s][吞吐率：9.57req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000298s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000546s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000509s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000418s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000881s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000239s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.079312s][吞吐率：12.61req/s] [内存消耗：4,474.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001129s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000741s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000431s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000997s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 169 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000195s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 187 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.100464s][吞吐率：9.95req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000511s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000414s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000872s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000234s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:48+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.109010s][吞吐率：9.17req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000305s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000564s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.077778s][吞吐率：12.86req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001169s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000738s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000492s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001054s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.066560s][吞吐率：15.02req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000274s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.114210s][吞吐率：8.76req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000765s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000523s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000630s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000425s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000983s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000257s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000240s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.077687s][吞吐率：12.87req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000415s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001147s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000745s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.019405s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000437s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000971s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000457s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 165 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 72 ORDER BY date desc [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.083222s][吞吐率：12.02req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000493s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000404s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001049s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000195s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000220s ]

---------------------------------------------------------------
[ 2019-04-02T15:53:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.105817s][吞吐率：9.45req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000314s ]

---------------------------------------------------------------
[ 2019-04-02T15:54:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.075303s][吞吐率：13.28req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000873s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.007865s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.007638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000585s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.002440s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000373s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001244s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000458s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000225s ]

---------------------------------------------------------------
[ 2019-04-02T15:54:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.060772s][吞吐率：16.45req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000642s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000311s ]

---------------------------------------------------------------
[ 2019-04-02T15:54:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.098803s][吞吐率：10.12req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000512s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000459s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000435s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000492s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000520s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000979s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000250s ]

---------------------------------------------------------------
[ 2019-04-02T15:54:00+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017079s][吞吐率：58.55req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T15:54:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.075803s][吞吐率：13.19req/s] [内存消耗：4,474.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000444s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001148s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.014492s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000694s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000408s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000810s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000444s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000195s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]

---------------------------------------------------------------
[ 2019-04-02T15:54:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.058246s][吞吐率：17.17req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000341s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000668s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000297s ]

---------------------------------------------------------------
[ 2019-04-02T15:54:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.109378s][吞吐率：9.14req/s] [内存消耗：4,475.49kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ua8074urhdetu3qh60hban7340',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000298s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000455s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000415s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000940s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000227s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.120154s][吞吐率：8.32req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000531s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000918s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003060s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:01+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051442s][吞吐率：19.44req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000457s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000883s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000701s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000765s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000503s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000664s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000367s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000792s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000324s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065933s][吞吐率：15.17req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000343s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:05+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.035723s][吞吐率：27.99req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000889s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000653s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192005 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192005 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192005 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192005 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001123s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T16:00:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.075330s][吞吐率：13.27req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000907s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.018014s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001086s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.001218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.051853s][吞吐率：19.29req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000311s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.091517s][吞吐率：10.93req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000541s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000494s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000421s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000972s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000449s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000246s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:08+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037771s][吞吐率：26.48req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000814s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000677s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000657s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002876s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000386s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000256s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:09+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039015s][吞吐率：25.63req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000350s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:09+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.054138s][吞吐率：18.47req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000427s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:17+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039606s][吞吐率：25.25req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000397s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000890s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000654s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.004522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000255s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:17+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.038656s][吞吐率：25.87req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000375s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:17+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.053308s][吞吐率：18.76req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000306s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000445s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:23+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038746s][吞吐率：25.81req/s] [内存消耗：4,107.14kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '313',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000395s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000830s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000656s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000671s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 313 [ RunTime:0.002234s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 313 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 313 LIMIT 1 [ RunTime:0.000377s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000776s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:23+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=313&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=313&type=1&uid=249&version=1.0.5 [运行时间：0.040158s][吞吐率：24.90req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '313',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000376s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000761s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 313  AND `type` = 1 LIMIT 1 [ RunTime:0.000353s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:23+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.051379s][吞吐率：19.46req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '313',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000309s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000536s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '313' ORDER BY id desc LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '313' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000429s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:49+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038808s][吞吐率：25.77req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000983s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000652s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.003483s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:49+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039287s][吞吐率：25.45req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000344s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000350s ]

---------------------------------------------------------------
[ 2019-04-02T16:00:49+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.050819s][吞吐率：19.68req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000554s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000424s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.066155s][吞吐率：15.12req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001153s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000725s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000407s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000394s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000279s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.064044s][吞吐率：15.61req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000583s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000315s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.086070s][吞吐率：11.62req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000304s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000568s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000525s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000470s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000443s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001023s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000209s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000197s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000204s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000223s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:19+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038778s][吞吐率：25.79req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000927s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000672s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000682s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.003436s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.039967s][吞吐率：25.02req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000371s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000758s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000338s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:19+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.049081s][吞吐率：20.37req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000465s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:25+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037946s][吞吐率：26.35req/s] [内存消耗：4,122.52kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000841s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000676s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 66 [ RunTime:0.002602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 66 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 66 LIMIT 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000265s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:25+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.038971s][吞吐率：25.66req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '66',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000736s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '66' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000451s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:25+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=66&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=66&type=1&uid=249&version=1.0.5 [运行时间：0.054063s][吞吐率：18.50req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '66',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 66  AND `type` = 1 LIMIT 1 [ RunTime:0.000343s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:29+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.054871s][吞吐率：18.22req/s] [内存消耗：4,122.50kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '67',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001182s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000752s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000744s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 67 [ RunTime:0.005358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 67 LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 67 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:29+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.067233s][吞吐率：14.87req/s] [内存消耗：3,941.79kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '67',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '67' ORDER BY id desc LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '67' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000503s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:29+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=67&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=67&type=1&uid=249&version=1.0.5 [运行时间：0.086202s][吞吐率：11.60req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '67',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000297s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000535s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 67  AND `type` = 1 LIMIT 1 [ RunTime:0.000339s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:29+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016145s][吞吐率：61.94req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T16:02:31+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037911s][吞吐率：26.38req/s] [内存消耗：4,122.55kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '57',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000447s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000964s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000664s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000682s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 57 [ RunTime:0.003149s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 57 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 57 LIMIT 1 [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=57&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=57&type=1&uid=249&version=1.0.5 [运行时间：0.038823s][吞吐率：25.76req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '57',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000391s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000742s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 57  AND `type` = 1 LIMIT 1 [ RunTime:0.000348s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:31+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.051292s][吞吐率：19.50req/s] [内存消耗：3,941.78kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '57',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000298s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '57' ORDER BY id desc LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '57' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000463s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:31+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017027s][吞吐率：58.73req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T16:02:38+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038317s][吞吐率：26.10req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000919s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000683s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.003049s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000377s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:38+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.040070s][吞吐率：24.96req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000751s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000339s ]

---------------------------------------------------------------
[ 2019-04-02T16:02:38+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.049949s][吞吐率：20.02req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000324s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000536s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000482s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:11+08:00 ] 172.31.69.247 123.117.10.225 POST /common/login/login
[ log ] api.kzwchina.com/common/login/login [运行时间：0.143708s][吞吐率：6.96req/s] [内存消耗：4,218.20kb] [文件加载：75]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'login',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'login_type' => 'phone',
  'phone' => '18710045797',
  'password' => '.........',
  'code' => '',
)
[ info ] [ RUN ] app\api\common\controller\Login->login[ /www/wwwroot/kouzhiwen/application/api/common/controller/Login.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000913s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  (  username='18710045797' OR phone='18710045797' ) LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] UPDATE `tpn_user`  SET `logintoken`='90b0e930f558f9a9cfbc637edf014173',`deviceToken`=NULL  WHERE  `uid` = 248 [ RunTime:0.004108s ]
[ error ] [8]未定义数组索引: deviceToken[/www/wwwroot/kouzhiwen/application/common/model/User.php:116]

---------------------------------------------------------------
[ 2019-04-02T16:03:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044496s][吞吐率：22.47req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000315s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000597s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000637s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000318s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:12+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.047707s][吞吐率：20.96req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000455s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001133s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000680s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000431s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.031060s][吞吐率：32.20req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000802s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000654s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000239s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032714s][吞吐率：30.57req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000736s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000282s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000419s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:51+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.076037s][吞吐率：13.15req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000480s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001153s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000755s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000666s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000689s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000424s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001153s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 275 ORDER BY date desc [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 266 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 282 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000236s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:51+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.074621s][吞吐率：13.40req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000374s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:51+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.113265s][吞吐率：8.83req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000291s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000517s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000463s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000415s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000967s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:51+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016896s][吞吐率：59.19req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T16:03:53+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038617s][吞吐率：25.90req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000896s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002757s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039583s][吞吐率：25.26req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000727s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000573s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000335s ]

---------------------------------------------------------------
[ 2019-04-02T16:03:53+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.049753s][吞吐率：20.10req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000343s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000724s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000436s ]

---------------------------------------------------------------
[ 2019-04-02T16:05:15+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038375s][吞吐率：26.06req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000695s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002752s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000386s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000256s ]

---------------------------------------------------------------
[ 2019-04-02T16:05:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.040080s][吞吐率：24.95req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000362s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000336s ]

---------------------------------------------------------------
[ 2019-04-02T16:05:15+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052207s][吞吐率：19.15req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=lvosd7c6i5o5d6kmh2muojpl54',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000341s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000423s ]

---------------------------------------------------------------
[ 2019-04-02T16:05:56+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030319s][吞吐率：32.98req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000874s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000322s ]

---------------------------------------------------------------
[ 2019-04-02T16:05:56+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031280s][吞吐率：31.97req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000775s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000335s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-04-02T16:06:39+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032010s][吞吐率：31.24req/s] [内存消耗：3,874.54kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '5',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000914s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000306s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 5  AND `status` = 1 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 5  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-04-02T16:08:10+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.114229s][吞吐率：8.75req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000439s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000881s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003150s ]

---------------------------------------------------------------
[ 2019-04-02T16:08:11+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.047069s][吞吐率：21.25req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001210s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000736s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000574s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000382s ]

---------------------------------------------------------------
[ 2019-04-02T16:08:11+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044417s][吞吐率：22.51req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000616s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-04-02T16:08:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030991s][吞吐率：32.27req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000828s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000671s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000214s ]

---------------------------------------------------------------
[ 2019-04-02T16:08:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032632s][吞吐率：30.64req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000296s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000418s ]

---------------------------------------------------------------
[ 2019-04-02T16:08:14+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031122s][吞吐率：32.13req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000934s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000336s ]

---------------------------------------------------------------
[ 2019-04-02T16:08:14+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030409s][吞吐率：32.89req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000364s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000702s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000600s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000289s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000397s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:26+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116871s][吞吐率：8.56req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000653s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003113s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:26+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051400s][吞吐率：19.46req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000387s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000483s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000795s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:26+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.066601s][吞吐率：15.01req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000688s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:29+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036926s][吞吐率：27.08req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000897s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000630s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192629 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192629 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192629 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192629 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001066s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T16:10:30+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.079000s][吞吐率：12.66req/s] [内存消耗：4,475.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000486s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001168s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000762s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000420s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001213s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:30+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.101719s][吞吐率：9.83req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000402s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000497s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000906s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000451s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:30+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.116611s][吞吐率：8.58req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.073296s][吞吐率：13.64req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.014803s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000623s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001239s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000237s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.079702s][吞吐率：12.55req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000363s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000558s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000410s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001112s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000456s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000233s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.095736s][吞吐率：10.45req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000723s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000581s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000622s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:33+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038335s][吞吐率：26.09req/s] [内存消耗：4,106.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000654s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 303 [ RunTime:0.002961s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 303 LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 303 LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000261s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:34+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040815s][吞吐率：24.50req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '303',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000855s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '303' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000444s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:34+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=303&type=1&uid=249&version=1.0.5 [运行时间：0.055603s][吞吐率：17.98req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '303',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000566s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 303  AND `type` = 1 LIMIT 1 [ RunTime:0.000347s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:45+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038712s][吞吐率：25.83req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001067s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000673s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002937s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000271s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039319s][吞吐率：25.43req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000374s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000990s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000697s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000406s ]

---------------------------------------------------------------
[ 2019-04-02T16:10:46+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040371s][吞吐率：24.77req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=5evsmaf3gbff9i3a88p8mpnnt1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000400s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000459s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116706s][吞吐率：8.57req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000483s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000915s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003108s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:31+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051925s][吞吐率：19.26req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000838s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000473s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000771s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000299s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.064330s][吞吐率：15.54req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000709s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:33+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037259s][吞吐率：26.84req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000507s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000958s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000680s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192993 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192993 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192993 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554192993 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001073s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T16:16:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.081270s][吞吐率：12.30req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000890s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.023151s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.003137s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000418s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001140s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000487s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000250s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.064371s][吞吐率：15.53req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:35+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.102843s][吞吐率：9.72req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000291s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000665s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000530s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000515s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000416s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000481s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001091s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 272 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 202 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000258s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000243s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:35+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017067s][吞吐率：58.59req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T16:16:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037880s][吞吐率：26.40req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000676s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002329s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000277s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:37+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040873s][吞吐率：24.47req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000469s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000431s ]

---------------------------------------------------------------
[ 2019-04-02T16:16:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.055626s][吞吐率：17.98req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=bf530jkf56l589d1iatsd3abh1',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000320s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000365s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115767s][吞吐率：8.64req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000434s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003055s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:12+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.052015s][吞吐率：19.23req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000396s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000800s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000725s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000631s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000474s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000810s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.067024s][吞吐率：14.92req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000318s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000302s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:14+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036325s][吞吐率：27.53req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000831s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000680s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000694s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193034 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000869s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193034 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193034 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193034 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001117s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T16:17:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.070762s][吞吐率：14.13req/s] [内存消耗：4,475.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001116s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000731s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000576s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000384s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000392s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001262s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000202s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.051045s][吞吐率：19.59req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000292s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.118078s][吞吐率：8.47req/s] [内存消耗：4,476.48kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000306s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000481s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000983s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000199s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:24+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038638s][吞吐率：25.88req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000474s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000924s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000672s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.003443s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:25+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.039321s][吞吐率：25.43req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000426s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000852s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000640s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000367s ]

---------------------------------------------------------------
[ 2019-04-02T16:17:25+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.051953s][吞吐率：19.25req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000307s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000483s ]

---------------------------------------------------------------
[ 2019-04-02T16:18:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.070544s][吞吐率：14.18req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000561s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001162s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000715s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.001491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000485s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000917s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000460s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000253s ]

---------------------------------------------------------------
[ 2019-04-02T16:18:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.084166s][吞吐率：11.88req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000334s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000541s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-04-02T16:18:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.106125s][吞吐率：9.42req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000485s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000471s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000413s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001021s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000242s ]

---------------------------------------------------------------
[ 2019-04-02T16:18:43+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038929s][吞吐率：25.69req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.003654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000254s ]

---------------------------------------------------------------
[ 2019-04-02T16:18:43+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039305s][吞吐率：25.44req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000395s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000998s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-04-02T16:18:43+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.043601s][吞吐率：22.94req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000678s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000444s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.054160s][吞吐率：18.46req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000559s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000641s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000496s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000433s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001151s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000243s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000223s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.064795s][吞吐率：15.43req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000379s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000773s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000533s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000416s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001118s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000473s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000255s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000248s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.073271s][吞吐率：13.65req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000334s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000633s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.081191s][吞吐率：12.32req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000545s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000426s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.002587s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.019872s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000272s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.041924s][吞吐率：23.85req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000381s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000789s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000287s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.093557s][吞吐率：10.69req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000735s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000426s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000500s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000417s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000263s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001195s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000196s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039066s][吞吐率：25.60req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000905s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000661s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.002970s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000259s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.036133s][吞吐率：27.68req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000946s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000688s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000417s ]

---------------------------------------------------------------
[ 2019-04-02T16:20:37+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.038075s][吞吐率：26.26req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000765s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000480s ]

---------------------------------------------------------------
[ 2019-04-02T16:22:16+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.043191s][吞吐率：23.15req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000430s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001084s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000311s ]

---------------------------------------------------------------
[ 2019-04-02T16:22:16+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.045957s][吞吐率：21.76req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001084s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000321s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000449s ]

---------------------------------------------------------------
[ 2019-04-02T16:24:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.074594s][吞吐率：13.41req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000866s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000773s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.017260s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000722s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000483s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001160s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000256s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T16:24:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.083526s][吞吐率：11.97req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000507s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000490s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000404s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000321s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000259s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000898s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-04-02T16:24:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.093850s][吞吐率：10.66req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000334s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-04-02T16:24:38+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037707s][吞吐率：26.52req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000907s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000687s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000680s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.002613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-04-02T16:24:38+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.039875s][吞吐率：25.08req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000359s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000488s ]

---------------------------------------------------------------
[ 2019-04-02T16:24:38+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052245s][吞吐率：19.14req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=o93vunmqos694a1ql6lakir533',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000315s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000421s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:05+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115706s][吞吐率：8.64req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000855s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000638s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000565s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003115s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:05+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.052587s][吞吐率：19.02req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000822s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000598s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000698s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000634s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000472s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000663s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000775s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:05+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065104s][吞吐率：15.36req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000331s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000610s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000313s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:11+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037026s][吞吐率：27.01req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000911s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193691 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193691 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193691 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554193691 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001062s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T16:28:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.077634s][吞吐率：12.88req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000504s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.009300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000650s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000734s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000407s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.006639s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000393s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000324s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.002420s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000377s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000453s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.060896s][吞吐率：16.42req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000376s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000325s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.101102s][吞吐率：9.89req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000366s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000516s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000464s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000409s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000507s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001152s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000442s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000194s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000195s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:18+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038625s][吞吐率：25.89req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000671s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.003181s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000265s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.040228s][吞吐率：24.86req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000389s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000835s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000644s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000371s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:19+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.049984s][吞吐率：20.01req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000772s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000593s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000461s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:27+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.032260s][吞吐率：31.00req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000921s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000302s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:27+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.031921s][吞吐率：31.33req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000717s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000659s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000510s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000367s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:27+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.029983s][吞吐率：33.35req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000369s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000752s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000305s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:27+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030391s][吞吐率：32.90req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000367s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000295s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000498s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000404s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:30+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032081s][吞吐率：31.17req/s] [内存消耗：3,874.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000413s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 10,10 [ RunTime:0.000427s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:32+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030427s][吞吐率：32.87req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000488s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000919s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000582s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000319s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:32+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030652s][吞吐率：32.62req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000727s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000279s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000552s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000381s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:34+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032315s][吞吐率：30.95req/s] [内存消耗：3,874.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000873s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000296s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 10,10 [ RunTime:0.000446s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031784s][吞吐率：31.46req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000324s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031009s][吞吐率：32.25req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000406s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000319s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:57+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.117857s][吞吐率：8.48req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000980s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000676s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003149s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:59+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.041042s][吞吐率：24.37req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000424s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001166s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000736s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000435s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:59+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.039642s][吞吐率：25.23req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000686s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000525s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000274s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:59+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030421s][吞吐率：32.87req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000414s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000225s ]

---------------------------------------------------------------
[ 2019-04-02T16:28:59+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.033310s][吞吐率：30.02req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000376s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000288s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000427s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:01+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031236s][吞吐率：32.01req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000467s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000328s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:01+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032693s][吞吐率：30.59req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000826s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000287s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000395s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:04+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032283s][吞吐率：30.98req/s] [内存消耗：3,874.06kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '2',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000464s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000943s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000655s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000333s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 10,10 [ RunTime:0.000404s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:09+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030992s][吞吐率：32.27req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000878s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000614s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000600s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000329s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:09+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030620s][吞吐率：32.66req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000719s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000308s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000408s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:14+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.069842s][吞吐率：14.32req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000544s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001156s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000743s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000595s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000919s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000247s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.101864s][吞吐率：9.82req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000513s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000269s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000626s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000429s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000480s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000524s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000987s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000462s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000243s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.122903s][吞吐率：8.14req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000352s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000660s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:15+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017167s][吞吐率：58.25req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T16:29:16+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040765s][吞吐率：24.53req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000872s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.005460s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000259s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:16+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040214s][吞吐率：24.87req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000407s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000620s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000326s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000415s ]

---------------------------------------------------------------
[ 2019-04-02T16:29:16+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.055347s][吞吐率：18.07req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000318s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000682s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000339s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:32+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.116962s][吞吐率：8.55req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000844s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003129s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:34+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.045259s][吞吐率：22.09req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000465s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001159s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000720s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000580s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000411s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:34+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.043478s][吞吐率：23.00req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000324s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000635s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000298s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:35+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.030675s][吞吐率：32.60req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000385s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000223s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:35+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031531s][吞吐率：31.71req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000706s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000320s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000427s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030855s][吞吐率：32.41req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000883s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000349s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030458s][吞吐率：32.83req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000354s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000558s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000274s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000382s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:45+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031586s][吞吐率：31.66req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000639s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000308s ]

---------------------------------------------------------------
[ 2019-04-02T16:30:45+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031914s][吞吐率：31.33req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000736s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000551s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000268s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000378s ]

---------------------------------------------------------------
[ 2019-04-02T16:32:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.117253s][吞吐率：8.53req/s] [内存消耗：5,161.15kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '2204dfc5265b8e5564f4b7f5bdde6b95',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, ja-JP;q=0.9, ru-RU;q=0.8',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000899s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '2204dfc5265b8e5564f4b7f5bdde6b95' LIMIT 1 [ RunTime:0.000565s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003106s ]

---------------------------------------------------------------
[ 2019-04-02T16:32:07+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.050280s][吞吐率：19.89req/s] [内存消耗：4,256.24kb] [文件加载：68]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1, ja-JP;q=0.9, ru-RU;q=0.8',
  'logintoken' => '2204dfc5265b8e5564f4b7f5bdde6b95',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=ic9h6clufhf7tom1kkpa999lt5',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '25',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000398s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000850s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '2204dfc5265b8e5564f4b7f5bdde6b95' LIMIT 1 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000710s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 25 LIMIT 1 [ RunTime:0.000319s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 25  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_information` WHERE  `id` = 36 LIMIT 1 [ RunTime:0.000258s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000674s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '25'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000393s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000735s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 25  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000811s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 25 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000295s ]

---------------------------------------------------------------
[ 2019-04-02T16:32:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065356s][吞吐率：15.30req/s] [内存消耗：3,983.63kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ic9h6clufhf7tom1kkpa999lt5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '2204dfc5265b8e5564f4b7f5bdde6b95',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, ja-JP;q=0.9, ru-RU;q=0.8',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000367s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '2204dfc5265b8e5564f4b7f5bdde6b95' LIMIT 1 [ RunTime:0.000497s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 161  AND `reading` = 0 LIMIT 1 [ RunTime:0.000300s ]

---------------------------------------------------------------
[ 2019-04-02T16:32:10+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/introduce/banner?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/banner?OS=iOS&version=1.0.5 [运行时间：0.038602s][吞吐率：25.91req/s] [内存消耗：3,895.23kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ic9h6clufhf7tom1kkpa999lt5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '2204dfc5265b8e5564f4b7f5bdde6b95',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, ja-JP;q=0.9, ru-RU;q=0.8',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000911s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '2204dfc5265b8e5564f4b7f5bdde6b95' LIMIT 1 [ RunTime:0.000529s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000598s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000322s ]

---------------------------------------------------------------
[ 2019-04-02T16:32:10+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/introduce/article_list?OS=iOS&page=1&version=1.0.5
[ log ] api.kzwchina.com/discover/introduce/article_list?OS=iOS&page=1&version=1.0.5 [运行时间：0.049563s][吞吐率：20.18req/s] [内存消耗：3,884.96kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=ic9h6clufhf7tom1kkpa999lt5',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => '2204dfc5265b8e5564f4b7f5bdde6b95',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 12.1.4; Scale/2.00)',
  'accept-language' => 'zh-Hans-CN;q=1, ja-JP;q=0.9, ru-RU;q=0.8',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'page' => '1',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000342s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000703s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '2204dfc5265b8e5564f4b7f5bdde6b95' LIMIT 1 [ RunTime:0.000495s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000264s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000392s ]

---------------------------------------------------------------
[ 2019-04-02T16:33:56+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info
[ log ] api.kzwchina.com/common/user/my_info [运行时间：0.116651s][吞吐率：8.57req/s] [内存消耗：5,159.46kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000935s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003125s ]

---------------------------------------------------------------
[ 2019-04-02T16:33:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count
[ log ] api.kzwchina.com/common/user/notice_count [运行时间：0.044434s][吞吐率：22.51req/s] [内存消耗：3,981.98kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000473s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001090s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000679s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 248  AND `reading` = 0 LIMIT 1 [ RunTime:0.000342s ]

---------------------------------------------------------------
[ 2019-04-02T16:33:58+08:00 ] 172.31.69.247 123.117.10.225 GET /discover/article/classify
[ log ] api.kzwchina.com/discover/article/classify [运行时间：0.045574s][吞吐率：21.94req/s] [内存消耗：3,969.45kb] [文件加载：63]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->classify[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000903s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify_user` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`name` FROM `tpn_classify_user` `u` INNER JOIN `tpn_classify` `c` ON `c`.`id`=`u`.`classify_id` WHERE  `u`.`uid` = 248 ORDER BY u.weight ASC [ RunTime:0.000551s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_classify` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_classify` WHERE  `enterprise_id` = 0  AND `id` NOT IN ('') [ RunTime:0.000414s ]

---------------------------------------------------------------
[ 2019-04-02T16:33:59+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/article/advertisements
[ log ] api.kzwchina.com/discover/article/advertisements [运行时间：0.031309s][吞吐率：31.94req/s] [内存消耗：3,915.01kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'article',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Article->advertisements[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Article.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000418s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000982s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000657s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_advertisements` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_advertisements` [ RunTime:0.000211s ]

---------------------------------------------------------------
[ 2019-04-02T16:33:59+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.032517s][吞吐率：30.75req/s] [内存消耗：3,942.30kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'type' => '1',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000388s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000802s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000290s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` = 1  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000456s ]

---------------------------------------------------------------
[ 2019-04-02T16:34:01+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030580s][吞吐率：32.70req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000448s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000942s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000633s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000327s ]

---------------------------------------------------------------
[ 2019-04-02T16:34:05+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031545s][吞吐率：31.70req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000903s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000327s ]

---------------------------------------------------------------
[ 2019-04-02T16:34:06+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030493s][吞吐率：32.79req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000390s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000758s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000604s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000278s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000385s ]

---------------------------------------------------------------
[ 2019-04-02T16:34:09+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030012s][吞吐率：33.32req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000861s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000340s ]

---------------------------------------------------------------
[ 2019-04-02T16:34:09+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.030640s][吞吐率：32.64req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000762s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000287s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000409s ]

---------------------------------------------------------------
[ 2019-04-02T16:34:11+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.030632s][吞吐率：32.65req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000421s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000893s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000329s ]

---------------------------------------------------------------
[ 2019-04-02T16:34:11+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031523s][吞吐率：31.72req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000696s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000293s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000407s ]

---------------------------------------------------------------
[ 2019-04-02T16:38:14+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.075030s][吞吐率：13.33req/s] [内存消耗：4,475.52kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000895s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.006870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.006817s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000570s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000353s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000400s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001361s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000280s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 258 ORDER BY date desc [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000246s ]

---------------------------------------------------------------
[ 2019-04-02T16:38:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.082463s][吞吐率：12.13req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000373s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000520s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000281s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000267s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000418s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001027s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000468s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-04-02T16:38:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.093107s][吞吐率：10.74req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000305s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000598s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000640s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000306s ]

---------------------------------------------------------------
[ 2019-04-02T16:38:23+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038322s][吞吐率：26.09req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000677s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.002734s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-04-02T16:38:23+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.040034s][吞吐率：24.98req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000389s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000788s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000582s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000343s ]

---------------------------------------------------------------
[ 2019-04-02T16:38:23+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.049553s][吞吐率：20.18req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000350s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000605s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000533s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.066560s][吞吐率：15.02req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000452s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001140s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000725s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000618s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000690s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000495s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000394s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000375s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000379s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001230s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000632s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000278s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000270s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000275s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000269s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.089706s][吞吐率：11.15req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000363s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000768s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000613s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000518s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000607s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000643s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000431s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000479s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000262s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000932s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000452s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000266s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000248s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.077211s][吞吐率：12.95req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000650s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000652s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000309s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.070830s][吞吐率：14.12req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001155s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000725s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000655s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000401s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000649s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000505s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000913s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000454s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000250s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000252s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.103557s][吞吐率：9.66req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000328s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000680s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000567s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000619s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000579s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000403s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001025s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 279 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000244s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000235s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.095116s][吞吐率：10.51req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000319s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000537s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:28+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.037792s][吞吐率：26.46req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000471s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001149s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000726s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000415s ]

---------------------------------------------------------------
[ 2019-04-02T16:39:28+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.039461s][吞吐率：25.34req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000408s ]

---------------------------------------------------------------
[ 2019-04-02T16:40:05+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039094s][吞吐率：25.58req/s] [内存消耗：4,106.96kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000928s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000678s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 311 [ RunTime:0.003206s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 311 LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 311 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000264s ]

---------------------------------------------------------------
[ 2019-04-02T16:40:05+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039701s][吞吐率：25.19req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '311',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000393s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000749s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000580s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '311' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000446s ]

---------------------------------------------------------------
[ 2019-04-02T16:40:05+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=311&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=311&type=1&uid=249&version=1.0.5 [运行时间：0.053511s][吞吐率：18.69req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=1gjq6cmq9cnj77hqoof8mjtij3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '311',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000319s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000693s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 311  AND `type` = 1 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:45+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.115860s][吞吐率：8.63req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000875s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003123s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:46+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.052968s][吞吐率：18.88req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000370s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000773s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000497s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000722s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000842s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000635s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:46+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.065408s][吞吐率：15.29req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000330s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000715s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000572s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:50+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.037558s][吞吐率：26.63req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000599s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000659s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194690 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000902s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194690 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194690 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000801s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194690 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001337s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T16:44:51+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.078595s][吞吐率：12.72req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.009708s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001118s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000750s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000354s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000343s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000376s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000511s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000276s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001177s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000467s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000207s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000238s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:51+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.069952s][吞吐率：14.30req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000348s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000719s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000638s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:51+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.109625s][吞吐率：9.12req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000338s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000712s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000513s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000274s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000402s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000476s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001015s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000447s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000219s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:52+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038856s][吞吐率：25.74req/s] [内存消耗：4,122.51kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000454s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000656s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 65 [ RunTime:0.003181s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 65 LIMIT 1 [ RunTime:0.000311s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 65 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000274s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:53+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039729s][吞吐率：25.17req/s] [内存消耗：3,941.85kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '65',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000857s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000691s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000625s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 1 [ RunTime:0.000396s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '65' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000499s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=65&type=1&uid=249&version=1.0.5 [运行时间：0.054407s][吞吐率：18.38req/s] [内存消耗：3,988.21kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '65',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 65  AND `type` = 1 LIMIT 1 [ RunTime:0.000356s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.076059s][吞吐率：13.15req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000681s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.011503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000705s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000346s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000657s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.007457s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000378s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001251s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000226s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000253s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.083544s][吞吐率：11.97req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000356s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000681s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000592s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000514s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000275s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000290s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000270s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000421s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000314s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000519s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000995s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000450s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000252s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 255 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 263 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 260 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 215 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 253 ORDER BY date desc [ RunTime:0.000249s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.096890s][吞吐率：10.32req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000326s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000685s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000551s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000653s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000291s ]

---------------------------------------------------------------
[ 2019-04-02T16:44:59+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.017075s][吞吐率：58.56req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T16:45:00+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.057343s][吞吐率：17.44req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000400s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000879s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000755s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000702s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.019984s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000587s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000439s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000327s ]

---------------------------------------------------------------
[ 2019-04-02T16:45:00+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=1&uid=249&version=1.0.5 [运行时间：0.045773s][吞吐率：21.85req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '1',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000334s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000667s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 1 LIMIT 1 [ RunTime:0.000341s ]

---------------------------------------------------------------
[ 2019-04-02T16:45:00+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.053803s][吞吐率：18.59req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=unghf2c7ju5peflp17fjc4mpo3',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000654s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000584s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000449s ]

---------------------------------------------------------------
[ 2019-04-02T16:46:19+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/banner
[ log ] api.kzwchina.com/discover/introduce/banner [运行时间：0.031098s][吞吐率：32.16req/s] [内存消耗：3,892.74kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded; charset=UTF-8',
  'content-length' => '0',
)
[ info ] [ PARAM ] array (
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->banner[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000412s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `status` = 1  AND `type` = 3  AND `enterprise_id` = 0 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000344s ]

---------------------------------------------------------------
[ 2019-04-02T16:46:19+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/introduce/article_list
[ log ] api.kzwchina.com/discover/introduce/article_list [运行时间：0.031652s][吞吐率：31.59req/s] [内存消耗：3,881.81kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'introduce',
  ),
)
[ info ] [ HEADER ] array (
  'connection' => 'keep-alive',
  'user-agent' => 'Android',
  'logintoken' => '90b0e930f558f9a9cfbc637edf014173',
  'host' => 'api.kzwchina.com',
  'accept-encoding' => 'gzip',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '6',
)
[ info ] [ PARAM ] array (
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Introduce->articleList[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Introduce.php ]
[ info ] [ DB ] INIT mysql
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000384s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000816s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = '90b0e930f558f9a9cfbc637edf014173' LIMIT 1 [ RunTime:0.000587s ]
[ sql ] [ DB ] CONNECT:[ UseTime:0.000285s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_introduce` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_introduce` WHERE  `type` IN (2,3,4,5)  AND `status` = 1 ORDER BY id desc LIMIT 0,10 [ RunTime:0.000385s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:17+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/my_info?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/my_info?OS=iOS&version=1.0.5 [运行时间：0.116170s][吞吐率：8.61req/s] [内存消耗：5,161.27kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->myInfo[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000568s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000927s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000625s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_regions` [ RunTime:0.000554s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_regions` [ RunTime:0.003070s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:18+08:00 ] 172.31.69.247 123.117.10.225 POST /common/home/index
[ log ] api.kzwchina.com/common/home/index [运行时间：0.051051s][吞吐率：19.59req/s] [内存消耗：4,382.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'home',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '16',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Home->index[ /www/wwwroot/kouzhiwen/application/api/common/controller/Home.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000416s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001069s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000629s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_enterprise` [ RunTime:0.000627s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_enterprise` WHERE  `id` = 13 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_banner` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT `pid`,`mold`,`type`,`img_url` FROM `tpn_banner` WHERE  `enterprise_id` = 13  AND `type` = 1  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000636s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `uid` = 249  AND `class_id` = 130 LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`look_num`,`t`.`name`,`c`.`price` FROM `tpn_course` `c` LEFT JOIN `tpn_teacher` `t` ON `c`.`teacher_id`=`t`.`id` WHERE  `c`.`enterprise_id` = '13'  AND `c`.`type` = 3  AND `c`.`scene` = 1 ORDER BY c.is_recommend desc,c.created_at desc LIMIT 0,4 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000720s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`title`,`photo` FROM `tpn_teacher` WHERE  `enterprise_id` = 13  AND `status` = 1  AND `is_xszd` = 0  AND `identity` LIKE '%3%' ORDER BY is_recommend desc,updated_at desc LIMIT 0,4 [ RunTime:0.000830s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_information` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT `id`,`cover_img`,`name`,`add_time`,`comment_num`,`pv` FROM `tpn_information` WHERE  `enterprise_id` = 13 ORDER BY `is_recommend`  desc,`add_time`  desc LIMIT 0,2 [ RunTime:0.000294s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/notice_count?OS=iOS&version=1.0.5
[ log ] api.kzwchina.com/common/user/notice_count?OS=iOS&version=1.0.5 [运行时间：0.055948s][吞吐率：17.87req/s] [内存消耗：3,983.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->NoticeCount[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000323s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_notice` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_user_notice` WHERE  `uid` = 249  AND `reading` = 0 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:20+08:00 ] 172.31.69.247 123.117.10.225 POST /common/study/datalist
[ log ] api.kzwchina.com/common/study/datalist [运行时间：0.036665s][吞吐率：27.27req/s] [内存消耗：4,128.91kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '23',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'page' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->datalist[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000482s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000885s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194840 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000870s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194840 ORDER BY id<>43,a.start desc LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT `a`.`id`,count(`u`.`uid`) as count FROM `tpn_class` `a` LEFT JOIN `tpn_class_user` `u` ON `a`.`id`=`u`.`class_id` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194840 GROUP BY u.class_id ORDER BY count desc LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`enterprise_id`,`a`.`name`,`a`.`photo`,`a`.`start`,`a`.`end`,`a`.`price`,(select count(*) from tpn_class_user where `class_id`=a.id) apply_num,(select if(count(*)>0,1,0) from tpn_class_user where `class_id`=a.id and `uid`=249) is_apply FROM `tpn_class` `a` WHERE  `a`.`enterprise_id` = '13'  AND `a`.`end` > 1554194840 ORDER BY id<>43,a.start desc LIMIT 0,10 [ RunTime:0.001076s ]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]
[ error ] [8]未定义数组索引: classify_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:30]
[ error ] [8]未定义数组索引: class_type_id[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:34]
[ error ] [8]未定义数组索引: power[/www/wwwroot/kouzhiwen/application/common/model/Studys.php:42]

---------------------------------------------------------------
[ 2019-04-02T16:47:21+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.070335s][吞吐率：14.22req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001147s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000707s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000377s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000671s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000350s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000541s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001078s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 185 ORDER BY date desc [ RunTime:0.000240s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 280 ORDER BY date desc [ RunTime:0.000227s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 264 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 201 ORDER BY date desc [ RunTime:0.000222s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 278 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000247s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 257 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 270 ORDER BY date desc [ RunTime:0.000239s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 274 ORDER BY date desc [ RunTime:0.000225s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:21+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=130&version=1.0.5 [运行时间：0.103165s][吞吐率：9.69req/s] [内存消耗：4,466.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000329s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000669s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 130  AND `uid` = 249 LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 130  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 130  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000279s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '130' ORDER BY `c`.`start` [ RunTime:0.000439s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 303  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 311  AND `uid` = 249 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 312  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 313  AND `uid` = 249 LIMIT 1 [ RunTime:0.000307s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 304  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 305  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 306  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 307  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 130  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000254s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '130' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000878s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 276 ORDER BY date desc [ RunTime:0.000261s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 261 ORDER BY date desc [ RunTime:0.000253s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 265 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 256 ORDER BY date desc [ RunTime:0.000242s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 251 ORDER BY date desc [ RunTime:0.000225s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 252 ORDER BY date desc [ RunTime:0.000236s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 284 ORDER BY date desc [ RunTime:0.000233s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 259 ORDER BY date desc [ RunTime:0.000235s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:21+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=130&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=130&version=1.0.5 [运行时间：0.093203s][吞吐率：10.73req/s] [内存消耗：3,989.15kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '130',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000336s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000763s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000585s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000270s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:23+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039677s][吞吐率：25.20req/s] [内存消耗：4,107.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '13',
)
[ info ] [ PARAM ] array (
  'course_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000882s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000675s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 312 [ RunTime:0.004530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 312 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000537s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 312 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 130 LIMIT 1 [ RunTime:0.000256s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:24+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=312&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=312&type=0&uid=249&version=1.0.5 [运行时间：0.040854s][吞吐率：24.48req/s] [内存消耗：3,986.78kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '312',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000498s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000944s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000700s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 312  AND `type` = 0 LIMIT 1 [ RunTime:0.000377s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:24+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052322s][吞吐率：19.11req/s] [内存消耗：3,940.17kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '18',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '312',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000316s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000692s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000562s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '312' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000441s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.078949s][吞吐率：12.67req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000484s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.002165s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000759s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000447s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000662s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000426s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000325s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001063s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000441s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000230s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=43&version=1.0.5 [运行时间：0.103948s][吞吐率：9.62req/s] [内存消耗：4,476.42kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000348s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000701s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 43  AND `uid` = 249 LIMIT 1 [ RunTime:0.000508s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000491s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 43  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 43  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '43' ORDER BY `c`.`start` [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000474s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 65  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 66  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 67  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 57  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 58  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 59  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 60  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 61  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 62  AND `uid` = 249 LIMIT 1 [ RunTime:0.000285s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 63  AND `uid` = 249 LIMIT 1 [ RunTime:0.000294s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 43  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '43' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.001054s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000440s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000223s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000213s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000208s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 286 ORDER BY date desc [ RunTime:0.000231s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:28+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=43&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=43&version=1.0.5 [运行时间：0.111977s][吞吐率：8.93req/s] [内存消耗：4,004.52kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '43',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000372s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000603s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000628s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:28+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039532s][吞吐率：25.30req/s] [内存消耗：4,122.50kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '67',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000877s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000675s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 67 [ RunTime:0.004119s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 67 LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 67 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 43 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:29+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=67&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=67&type=0&uid=249&version=1.0.5 [运行时间：0.038283s][吞吐率：26.12req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '67',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000384s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000942s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000685s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 67  AND `type` = 0 LIMIT 1 [ RunTime:0.000430s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:29+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.039980s][吞吐率：25.01req/s] [内存消耗：3,941.79kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '67',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000358s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000646s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000544s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '67' ORDER BY id desc LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '67' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000472s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:29+08:00 ] 172.31.69.247 123.117.10.225 GET /
[ log ] api.kzwchina.com/ [运行时间：0.016138s][吞吐率：61.97req/s] [内存消耗：1,985.50kb] [文件加载：45]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => NULL,
    2 => NULL,
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => 'image/*;q=0.8',
  'accept-language' => 'zh-cn',
  'connection' => 'keep-alive',
  'accept-encoding' => 'gzip, deflate',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
)
[ info ] [ PARAM ] array (
)
[ info ] [ LOG ] INIT File
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Route.php:1548]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:328]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]
[ error ] [8]未定义数组下标: 1[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:380]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:382]
[ error ] [8]未定义数组下标: 2[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:386]
[ error ] [8]未定义数组下标: 3[/www/wwwroot/kouzhiwen/thinkphp/library/think/App.php:387]
[ error ] [8]未定义数组索引: PATH_INFO[/www/wwwroot/kouzhiwen/thinkphp/library/think/Request.php:1408]

---------------------------------------------------------------
[ 2019-04-02T16:47:30+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=67&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=67&ctype=2&uid=249&version=1.0.5 [运行时间：0.036933s][吞吐率：27.08req/s] [内存消耗：3,980.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '67',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000868s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000530s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 67 LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 67 [ RunTime:0.005353s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:32+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.040102s][吞吐率：24.94req/s] [内存消耗：4,170.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '67',
  'course_time' => '8867.520000',
  'time' => '1.420000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000441s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000681s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 67  AND `type` = 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 448 [ RunTime:0.004124s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 67 , 1.42 , 1 , 8867.52) [ RunTime:0.003337s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/study_details?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/study_details?OS=iOS&id=47&version=1.0.5 [运行时间：0.036062s][吞吐率：27.73req/s] [内存消耗：4,151.86kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->StudyDetails[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000463s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000619s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000679s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000527s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 47 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 249 LIMIT 1 [ RunTime:0.000512s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher` [ RunTime:0.000717s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_teacher` WHERE  `id` = 585 LIMIT 1 [ RunTime:0.000375s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:39+08:00 ] 172.31.69.247 123.117.10.225 POST /common/order/order
[ log ] api.kzwchina.com/common/order/order [运行时间：0.148040s][吞吐率：6.75req/s] [内存消耗：4,262.05kb] [文件加载：71]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'order',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '29',
)
[ info ] [ PARAM ] array (
  'enterprise_id' => '13',
  'id' => '47',
  'type' => '1',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Order->Order[ /www/wwwroot/kouzhiwen/application/api/common/controller/Order.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000509s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 249 LIMIT 1 [ RunTime:0.000513s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_class_user` WHERE  `class_id` = 47 LIMIT 1 [ RunTime:0.000382s ]
[ sql ] [ SQL ] INSERT INTO `tpn_class_user` (`class_id` , `uid` , `status` , `created_at` , `updated_at`) VALUES (47 , 249 , 1 , 1554194859 , 1554194859) [ RunTime:0.004284s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=47&version=1.0.5 [运行时间：0.045422s][吞吐率：22.02req/s] [内存消耗：4,007.28kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000427s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001097s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000731s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000409s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=47&version=1.0.5 [运行时间：0.087883s][吞吐率：11.38req/s] [内存消耗：4,474.43kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000739s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 249 LIMIT 1 [ RunTime:0.000526s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000466s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 47  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 47  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000284s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '47' ORDER BY `c`.`start` [ RunTime:0.000424s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000504s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 80  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 81  AND `uid` = 249 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 82  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 83  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 85  AND `uid` = 249 LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 86  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 87  AND `uid` = 249 LIMIT 1 [ RunTime:0.000301s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 47  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '47' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000925s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000221s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=47&version=1.0.5 [运行时间：0.117272s][吞吐率：8.53req/s] [内存消耗：4,474.41kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000719s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000550s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000548s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 249 LIMIT 1 [ RunTime:0.000519s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 47  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000286s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 47  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000264s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '47' ORDER BY `c`.`start` [ RunTime:0.000396s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000475s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 80  AND `uid` = 249 LIMIT 1 [ RunTime:0.000312s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 81  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 82  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 83  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 85  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 86  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 87  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000535s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 47  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000251s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '47' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000840s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000438s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000193s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000237s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000228s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:42+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.041304s][吞吐率：24.21req/s] [内存消耗：4,127.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '80',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000909s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000760s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000664s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 80 [ RunTime:0.003326s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 80 LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000486s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 80 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 80 , 1554194862) [ RunTime:0.002885s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000288s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:42+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=80&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=80&type=0&uid=249&version=1.0.5 [运行时间：0.039280s][吞吐率：25.46req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '80',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000403s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000738s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 80  AND `type` = 0 LIMIT 1 [ RunTime:0.000353s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:42+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.051650s][吞吐率：19.36req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '80',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000313s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000762s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000548s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000594s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '80' ORDER BY id desc LIMIT 1 [ RunTime:0.000338s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '80' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000434s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:44+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=80&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=80&ctype=2&uid=249&version=1.0.5 [运行时间：0.041740s][吞吐率：23.96req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '80',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000917s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 80 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 80 , 2) [ RunTime:0.005263s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 80 [ RunTime:0.004641s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:50+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.036117s][吞吐率：27.69req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '80',
  'course_time' => '11953.162000',
  'time' => '5.355000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000436s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000901s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 80  AND `type` = 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 80 , 5.355 , 1 , 11953.162) [ RunTime:0.004539s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:50+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.042779s][吞吐率：23.38req/s] [内存消耗：4,126.95kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '83',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000487s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000903s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 83 [ RunTime:0.003787s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 83 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 83 LIMIT 1 [ RunTime:0.000389s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 83 , 1554194870) [ RunTime:0.003458s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000501s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000307s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:51+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=83&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=83&type=0&uid=249&version=1.0.5 [运行时间：0.040082s][吞吐率：24.95req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '83',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000376s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000821s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 83  AND `type` = 0 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:51+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.053386s][吞吐率：18.73req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '83',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000346s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000683s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000543s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '83' ORDER BY id desc LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '83' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000425s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:53+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=83&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=83&ctype=2&uid=249&version=1.0.5 [运行时间：0.042100s][吞吐率：23.75req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '83',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000405s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000847s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 83 LIMIT 1 [ RunTime:0.000398s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 83 , 2) [ RunTime:0.004672s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 83 [ RunTime:0.004903s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:55+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.037534s][吞吐率：26.64req/s] [内存消耗：4,060.30kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '83',
  'course_time' => '9024.560000',
  'time' => '1.580000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000860s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 83  AND `type` = 1 [ RunTime:0.000365s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 83 , 1.58 , 1 , 9024.56) [ RunTime:0.005652s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:56+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=47&version=1.0.5 [运行时间：0.073777s][吞吐率：13.55req/s] [内存消耗：4,475.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000489s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.009334s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000737s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.008947s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 249 LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000699s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000397s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000569s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 47  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 47  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000339s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000658s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '47' ORDER BY `c`.`start` [ RunTime:0.000484s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 80  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 81  AND `uid` = 249 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 82  AND `uid` = 249 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 83  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 85  AND `uid` = 249 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 86  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 87  AND `uid` = 249 LIMIT 1 [ RunTime:0.000344s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000615s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 47  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '47' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000882s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000241s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000249s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000211s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000218s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:56+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=47&version=1.0.5 [运行时间：0.083424s][吞吐率：11.99req/s] [内存消耗：4,475.02kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000379s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000648s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000590s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000544s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 47  AND `uid` = 249 LIMIT 1 [ RunTime:0.000501s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000605s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000277s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000461s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 47  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 47  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000268s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '47' ORDER BY `c`.`start` [ RunTime:0.000381s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000472s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 80  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 81  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 82  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 83  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 85  AND `uid` = 249 LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 86  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 87  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000540s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 47  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000260s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '47' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000838s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000231s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 281 ORDER BY date desc [ RunTime:0.000248s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000232s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 191 ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 268 ORDER BY date desc [ RunTime:0.000212s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 249 ORDER BY date desc [ RunTime:0.000235s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:56+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=47&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=47&version=1.0.5 [运行时间：0.098325s][吞吐率：10.17req/s] [内存消耗：4,007.28kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '47',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000552s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000301s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:57+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040535s][吞吐率：24.67req/s] [内存消耗：4,127.08kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '81',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000917s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000656s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000685s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 81 [ RunTime:0.002837s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 81 LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 81 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 81 , 1554194877) [ RunTime:0.002939s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000293s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=81&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=81&type=0&uid=249&version=1.0.5 [运行时间：0.039573s][吞吐率：25.27req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '81',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000363s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000750s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000549s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 81  AND `type` = 0 LIMIT 1 [ RunTime:0.000359s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:58+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.050471s][吞吐率：19.81req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '81',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000318s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000528s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '81' ORDER BY id desc LIMIT 1 [ RunTime:0.000327s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '81' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000442s ]

---------------------------------------------------------------
[ 2019-04-02T16:47:59+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=81&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=81&ctype=2&uid=249&version=1.0.5 [运行时间：0.042530s][吞吐率：23.51req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '81',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 81 LIMIT 1 [ RunTime:0.000362s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 81 , 2) [ RunTime:0.006572s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 81 [ RunTime:0.004362s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:01+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.036383s][吞吐率：27.49req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '81',
  'course_time' => '10086.280000',
  'time' => '1.260000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000397s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000890s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000643s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 81  AND `type` = 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 81 , 1.26 , 1 , 10086.28) [ RunTime:0.005234s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:01+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.042671s][吞吐率：23.44req/s] [内存消耗：4,125.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '80',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000880s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000607s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 80 [ RunTime:0.007371s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 80 LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 80 LIMIT 1 [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:01+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=80&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=80&type=0&uid=249&version=1.0.5 [运行时间：0.039294s][吞吐率：25.45req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '80',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000366s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000775s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 80  AND `type` = 0 LIMIT 1 [ RunTime:0.000356s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:01+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052217s][吞吐率：19.15req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '80',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000301s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000707s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000577s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '80' ORDER BY id desc LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '80' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000436s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:07+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.041359s][吞吐率：24.18req/s] [内存消耗：4,170.02kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '80',
  'course_time' => '11953.162000',
  'time' => '3.317000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000462s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000953s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000668s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000575s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 80  AND `type` = 1 [ RunTime:0.000349s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 453 [ RunTime:0.004475s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 80 , 3.317 , 1 , 11953.162) [ RunTime:0.003571s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:07+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038250s][吞吐率：26.14req/s] [内存消耗：4,125.15kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '83',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000723s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 83 [ RunTime:0.003415s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 83 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000503s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 83 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000601s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000269s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:08+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=83&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=83&type=0&uid=249&version=1.0.5 [运行时间：0.038545s][吞吐率：25.94req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '83',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000741s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000570s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000532s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 83  AND `type` = 0 LIMIT 1 [ RunTime:0.000346s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:08+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.050145s][吞吐率：19.94req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '83',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000303s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '83' ORDER BY id desc LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '83' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000439s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:12+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.040408s][吞吐率：24.75req/s] [内存消耗：4,170.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '59',
)
[ info ] [ PARAM ] array (
  'cid' => '83',
  'course_time' => '9024.560000',
  'time' => '1.820000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000461s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000894s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000694s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 83  AND `type` = 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 454 [ RunTime:0.003964s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 83 , 1.82 , 1 , 9024.56) [ RunTime:0.003129s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039711s][吞吐率：25.18req/s] [内存消耗：4,125.26kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '81',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000437s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000890s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000681s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 81 [ RunTime:0.004255s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 81 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000517s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 81 LIMIT 1 [ RunTime:0.000398s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=81&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=81&type=0&uid=249&version=1.0.5 [运行时间：0.038459s][吞吐率：26.00req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '81',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000360s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000818s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000577s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 81  AND `type` = 0 LIMIT 1 [ RunTime:0.000360s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.045177s][吞吐率：22.14req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '81',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000377s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '81' ORDER BY id desc LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '81' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000440s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:15+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=81&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=81&ctype=2&uid=249&version=1.0.5 [运行时间：0.035240s][吞吐率：28.38req/s] [内存消耗：3,980.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '81',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000878s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 81 LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 81 [ RunTime:0.004248s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:18+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.040809s][吞吐率：24.50req/s] [内存消耗：4,170.02kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '81',
  'course_time' => '10086.280000',
  'time' => '2.320000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000402s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000998s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000674s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000584s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 81  AND `type` = 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 455 [ RunTime:0.004368s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 81 , 2.32 , 1 , 10086.28) [ RunTime:0.003475s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:18+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.041054s][吞吐率：24.36req/s] [内存消耗：4,127.08kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '82',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000391s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000765s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000672s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 82 [ RunTime:0.004354s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 82 LIMIT 1 [ RunTime:0.000315s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000516s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 82 LIMIT 1 [ RunTime:0.000371s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 82 , 1554194898) [ RunTime:0.002193s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000279s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=82&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=82&type=0&uid=249&version=1.0.5 [运行时间：0.038369s][吞吐率：26.06req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '82',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000348s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000706s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000528s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 82  AND `type` = 0 LIMIT 1 [ RunTime:0.000335s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:18+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052125s][吞吐率：19.18req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '82',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000301s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '82' ORDER BY id desc LIMIT 1 [ RunTime:0.000333s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '82' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000436s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=82&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=82&ctype=2&uid=249&version=1.0.5 [运行时间：0.038652s][吞吐率：25.87req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '82',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000560s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 82 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 82 , 2) [ RunTime:0.003993s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 82 [ RunTime:0.003736s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:23+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.036145s][吞吐率：27.67req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '82',
  'course_time' => '10506.200000',
  'time' => '2.200000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000848s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000608s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000581s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 82  AND `type` = 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 82 , 2.2 , 1 , 10506.2) [ RunTime:0.004110s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:24+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.037527s][吞吐率：26.65req/s] [内存消耗：4,125.27kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '80',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000616s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000674s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 80 [ RunTime:0.002265s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 80 LIMIT 1 [ RunTime:0.000337s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000538s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 80 LIMIT 1 [ RunTime:0.000372s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000613s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000280s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:24+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=80&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=80&type=0&uid=249&version=1.0.5 [运行时间：0.039133s][吞吐率：25.55req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '80',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000368s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000579s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 80  AND `type` = 0 LIMIT 1 [ RunTime:0.000345s ]

---------------------------------------------------------------
[ 2019-04-02T16:48:24+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.044925s][吞吐率：22.26req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '80',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000319s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000645s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000575s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000564s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '80' ORDER BY id desc LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '80' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000443s ]

---------------------------------------------------------------
[ 2019-04-02T16:49:58+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.043266s][吞吐率：23.11req/s] [内存消耗：4,170.02kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '61',
)
[ info ] [ PARAM ] array (
  'cid' => '80',
  'course_time' => '11953.162000',
  'time' => '10.422000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000456s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000917s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000624s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000578s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 80  AND `type` = 1 [ RunTime:0.000379s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 456 [ RunTime:0.004500s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 80 , 10.422 , 1 , 11953.162) [ RunTime:0.004820s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:03+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.041607s][吞吐率：24.03req/s] [内存消耗：4,126.86kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '86',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000408s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000910s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000689s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000663s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 86 [ RunTime:0.002810s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 86 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000526s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 86 LIMIT 1 [ RunTime:0.000381s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 86 , 1554195003) [ RunTime:0.003084s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000614s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000285s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:03+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=86&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=86&type=0&uid=249&version=1.0.5 [运行时间：0.040326s][吞吐率：24.80req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '86',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000380s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000776s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000578s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 86  AND `type` = 0 LIMIT 1 [ RunTime:0.000342s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:03+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.054050s][吞吐率：18.50req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '86',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000311s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000672s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000573s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000599s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '86' ORDER BY id desc LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '86' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000434s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:04+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=86&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=86&ctype=2&uid=249&version=1.0.5 [运行时间：0.040294s][吞吐率：24.82req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '86',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000927s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000755s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 86 LIMIT 1 [ RunTime:0.000374s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 86 , 2) [ RunTime:0.004321s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 86 [ RunTime:0.003758s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:17+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.038543s][吞吐率：25.95req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '86',
  'course_time' => '10282.863000',
  'time' => '9.769000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000442s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000916s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000573s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 86  AND `type` = 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 86 , 9.769 , 1 , 10282.863) [ RunTime:0.006340s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:18+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039831s][吞吐率：25.11req/s] [内存消耗：4,126.97kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '85',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000446s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000851s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000679s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 85 [ RunTime:0.002224s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 85 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000533s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 85 LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 85 , 1554195018) [ RunTime:0.001913s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000283s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=85&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=85&type=0&uid=249&version=1.0.5 [运行时间：0.039703s][吞吐率：25.19req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '85',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000372s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000744s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 85  AND `type` = 0 LIMIT 1 [ RunTime:0.000348s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:18+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.049673s][吞吐率：20.13req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '85',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000312s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000553s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000586s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '85' ORDER BY id desc LIMIT 1 [ RunTime:0.000320s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '85' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000441s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:22+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=85&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=85&ctype=2&uid=249&version=1.0.5 [运行时间：0.040785s][吞吐率：24.52req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '85',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000934s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 85 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 85 , 2) [ RunTime:0.004161s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 85 [ RunTime:0.004751s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:35+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.032628s][吞吐率：30.65req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '85',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000445s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000908s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000634s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000629s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '85' ORDER BY id desc LIMIT 1 [ RunTime:0.000386s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '85' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000464s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:39+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.035924s][吞吐率：27.84req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '61',
)
[ info ] [ PARAM ] array (
  'cid' => '85',
  'course_time' => '10407.760000',
  'time' => '14.100000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000871s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000563s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 85  AND `type` = 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 85 , 14.1 , 1 , 10407.76) [ RunTime:0.004551s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:39+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040088s][吞吐率：24.95req/s] [内存消耗：4,125.09kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '86',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000845s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000636s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000675s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 86 [ RunTime:0.004899s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 86 LIMIT 1 [ RunTime:0.000305s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 86 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000546s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000267s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:39+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=86&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=86&type=0&uid=249&version=1.0.5 [运行时间：0.039237s][吞吐率：25.49req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '86',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000353s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000571s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 86  AND `type` = 0 LIMIT 1 [ RunTime:0.000351s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:39+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.050094s][吞吐率：19.96req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '86',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000306s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000569s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000518s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '86' ORDER BY id desc LIMIT 1 [ RunTime:0.000332s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '86' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000441s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=86&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=86&ctype=2&uid=249&version=1.0.5 [运行时间：0.036354s][吞吐率：27.51req/s] [内存消耗：3,980.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '86',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000846s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000551s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 86 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 86 [ RunTime:0.004736s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:53+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.040907s][吞吐率：24.45req/s] [内存消耗：4,170.02kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '61',
)
[ info ] [ PARAM ] array (
  'cid' => '86',
  'course_time' => '10282.863000',
  'time' => '11.755000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000886s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000628s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 86  AND `type` = 1 [ RunTime:0.000380s ]
[ sql ] [ SQL ] DELETE FROM `tpn_course_time`    WHERE  `id` = 461 [ RunTime:0.004426s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 86 , 11.755 , 1 , 10282.863) [ RunTime:0.003875s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:55+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.044754s][吞吐率：22.34req/s] [内存消耗：4,126.86kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '87',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000419s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000980s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000609s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000653s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 87 [ RunTime:0.004217s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 87 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 87 LIMIT 1 [ RunTime:0.000385s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 87 , 1554195055) [ RunTime:0.005002s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000610s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 47 LIMIT 1 [ RunTime:0.000290s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:55+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.040224s][吞吐率：24.86req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '87',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000438s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000771s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000627s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000604s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '87' ORDER BY id desc LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '87' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000437s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:55+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=87&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=87&type=0&uid=249&version=1.0.5 [运行时间：0.056085s][吞吐率：17.83req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '87',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000325s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000776s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000576s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 87  AND `type` = 0 LIMIT 1 [ RunTime:0.000346s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:56+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=87&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=87&ctype=2&uid=249&version=1.0.5 [运行时间：0.039726s][吞吐率：25.17req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '87',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000410s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000647s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 87 LIMIT 1 [ RunTime:0.000352s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 87 , 2) [ RunTime:0.004101s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 87 [ RunTime:0.004944s ]

---------------------------------------------------------------
[ 2019-04-02T16:50:59+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.036364s][吞吐率：27.50req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '87',
  'course_time' => '10057.530000',
  'time' => '3.082000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000449s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000641s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 87  AND `type` = 1 [ RunTime:0.000368s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 87 , 3.082 , 1 , 10057.53) [ RunTime:0.004063s ]

---------------------------------------------------------------
[ 2019-04-02T16:51:52+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.072419s][吞吐率：13.81req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000512s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001153s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000719s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000651s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000390s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000341s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000656s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000493s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000306s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000303s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000287s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000506s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000273s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000907s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000531s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000205s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000217s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000245s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000198s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000228s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000217s ]

---------------------------------------------------------------
[ 2019-04-02T16:51:52+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.111452s][吞吐率：8.97req/s] [内存消耗：4,474.55kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000345s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000812s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000598s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000574s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000503s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000609s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000282s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000488s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000283s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000266s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000576s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000439s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000477s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000308s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000304s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000295s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000296s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000289s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000288s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000265s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000885s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000448s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000234s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000194s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000219s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000200s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 187 ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000216s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 192 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]

---------------------------------------------------------------
[ 2019-04-02T16:51:52+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.123219s][吞吐率：8.12req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000339s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000639s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000297s ]

---------------------------------------------------------------
[ 2019-04-02T16:51:58+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.038414s][吞吐率：26.03req/s] [内存消耗：4,124.23kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '68',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000918s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000615s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000671s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 68 [ RunTime:0.002462s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 68 LIMIT 1 [ RunTime:0.000323s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 68 LIMIT 1 [ RunTime:0.000388s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000603s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000282s ]

---------------------------------------------------------------
[ 2019-04-02T16:51:58+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=68&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=68&type=0&uid=249&version=1.0.5 [运行时间：0.039806s][吞吐率：25.12req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '68',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000349s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000691s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000589s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000545s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 68  AND `type` = 0 LIMIT 1 [ RunTime:0.000352s ]

---------------------------------------------------------------
[ 2019-04-02T16:51:58+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.054311s][吞吐率：18.41req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '68',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000305s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000661s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000549s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000611s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '68' ORDER BY id desc LIMIT 1 [ RunTime:0.000334s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '68' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000437s ]

---------------------------------------------------------------
[ 2019-04-02T16:52:11+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/getnote?OS=iOS&cid=68&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/getnote?OS=iOS&cid=68&uid=249&version=1.0.5 [运行时间：0.031234s][吞吐率：32.02req/s] [内存消耗：3,980.08kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '68',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->getnote[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000443s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000898s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_note` [ RunTime:0.000595s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_note` WHERE  `uid` = 249  AND `cid` = 68 LIMIT 1 [ RunTime:0.000320s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:07+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.043927s][吞吐率：22.77req/s] [内存消耗：4,126.04kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '76',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000453s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000891s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000651s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 76 [ RunTime:0.003673s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 76 LIMIT 1 [ RunTime:0.000328s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000522s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 76 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 76 , 1554195187) [ RunTime:0.004637s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000523s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000272s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:07+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=76&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=76&type=0&uid=249&version=1.0.5 [运行时间：0.039351s][吞吐率：25.41req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '76',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000369s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000758s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000556s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 76  AND `type` = 0 LIMIT 1 [ RunTime:0.000370s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:07+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.048753s][吞吐率：20.51req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '76',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000318s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000675s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000560s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000588s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '76' ORDER BY id desc LIMIT 1 [ RunTime:0.000335s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '76' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000434s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:11+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.044696s][吞吐率：22.37req/s] [内存消耗：4,125.99kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '72',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000401s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000861s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000620s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000652s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 72 [ RunTime:0.005965s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 72 LIMIT 1 [ RunTime:0.000316s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000514s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 72 LIMIT 1 [ RunTime:0.000400s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 72 , 1554195191) [ RunTime:0.003280s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000562s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000289s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:12+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=72&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=72&type=0&uid=249&version=1.0.5 [运行时间：0.038972s][吞吐率：25.66req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '72',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000399s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000820s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000601s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 72  AND `type` = 0 LIMIT 1 [ RunTime:0.000362s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:12+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.048542s][吞吐率：20.60req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '72',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000351s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000687s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000556s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000612s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '72' ORDER BY id desc LIMIT 1 [ RunTime:0.000351s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '72' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000433s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:13+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=72&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=72&ctype=2&uid=249&version=1.0.5 [运行时间：0.040817s][吞吐率：24.50req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '72',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000466s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000933s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000623s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000539s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 72 LIMIT 1 [ RunTime:0.000358s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 72 , 2) [ RunTime:0.004907s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 72 [ RunTime:0.004146s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:16+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.038394s][吞吐率：26.05req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '72',
  'course_time' => '10187.800000',
  'time' => '2.160000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000921s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000618s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 72  AND `type` = 1 [ RunTime:0.000347s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 72 , 2.16 , 1 , 10187.8) [ RunTime:0.005479s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:18+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040812s][吞吐率：24.50req/s] [内存消耗：4,125.98kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '71',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000425s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000865s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000622s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000666s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 71 [ RunTime:0.002508s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 71 LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000534s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 71 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 71 , 1554195198) [ RunTime:0.002673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000592s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000286s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:18+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=71&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=71&type=0&uid=249&version=1.0.5 [运行时间：0.038057s][吞吐率：26.28req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '71',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000390s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000941s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000663s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000478s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 71  AND `type` = 0 LIMIT 1 [ RunTime:0.000331s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:18+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.042995s][吞吐率：23.26req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '71',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000347s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000726s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000555s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000606s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '71' ORDER BY id desc LIMIT 1 [ RunTime:0.000329s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '71' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000427s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:19+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=71&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=71&ctype=2&uid=249&version=1.0.5 [运行时间：0.039521s][吞吐率：25.30req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '71',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000451s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000884s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000669s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000561s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 71 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 71 , 2) [ RunTime:0.003971s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 71 [ RunTime:0.003525s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:20+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=71&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=71&ctype=2&uid=249&version=1.0.5 [运行时间：0.035836s][吞吐率：27.90req/s] [内存消耗：3,980.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '71',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000429s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000832s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000666s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000547s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 71 LIMIT 1 [ RunTime:0.000364s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 71 [ RunTime:0.004084s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:29+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.040554s][吞吐率：24.66req/s] [内存消耗：4,126.01kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '75',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000417s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000892s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000611s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000670s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 75 [ RunTime:0.002647s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 75 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 75 LIMIT 1 [ RunTime:0.000394s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 75 , 1554195209) [ RunTime:0.002185s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000597s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000301s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:29+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=75&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=75&type=0&uid=249&version=1.0.5 [运行时间：0.040276s][吞吐率：24.83req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '75',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000331s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000718s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000563s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000557s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 75  AND `type` = 0 LIMIT 1 [ RunTime:0.000359s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:29+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.052828s][吞吐率：18.93req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '75',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000306s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000684s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000547s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000589s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '75' ORDER BY id desc LIMIT 1 [ RunTime:0.000345s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '75' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000434s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:30+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=75&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=75&ctype=2&uid=249&version=1.0.5 [运行时间：0.046717s][吞吐率：21.41req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '75',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000420s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000849s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000621s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000559s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 75 LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 75 , 2) [ RunTime:0.007987s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 75 [ RunTime:0.007243s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:31+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=75&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=75&ctype=2&uid=249&version=1.0.5 [运行时间：0.039251s][吞吐率：25.48req/s] [内存消耗：3,980.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '75',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000428s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000817s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000591s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000529s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 75 LIMIT 1 [ RunTime:0.000336s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 75 [ RunTime:0.007187s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039376s][吞吐率：25.40req/s] [内存消耗：4,126.02kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '77',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000423s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000904s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000673s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 77 [ RunTime:0.002469s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 77 LIMIT 1 [ RunTime:0.000330s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000550s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 77 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 77 , 1554195216) [ RunTime:0.001881s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000555s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000276s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:36+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=77&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=77&type=0&uid=249&version=1.0.5 [运行时间：0.038572s][吞吐率：25.93req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '77',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000378s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000754s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000617s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 77  AND `type` = 0 LIMIT 1 [ RunTime:0.000371s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:36+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.046201s][吞吐率：21.64req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '77',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000299s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000704s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000538s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000591s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '77' ORDER BY id desc LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '77' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000447s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:37+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=77&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=77&ctype=2&uid=249&version=1.0.5 [运行时间：0.047184s][吞吐率：21.19req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '77',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000440s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000903s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000612s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 77 LIMIT 1 [ RunTime:0.000342s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 77 , 2) [ RunTime:0.010681s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 77 [ RunTime:0.004543s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:38+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=77&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=77&ctype=2&uid=249&version=1.0.5 [运行时间：0.035360s][吞吐率：28.28req/s] [内存消耗：3,980.11kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '77',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000392s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000972s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000675s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000553s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 77 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 77 [ RunTime:0.004373s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:40+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/course/class_course_info
[ log ] api.kzwchina.com/discover/course/class_course_info [运行时间：0.039816s][吞吐率：25.12req/s] [内存消耗：4,125.93kb] [文件加载：65]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'course',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '12',
)
[ info ] [ PARAM ] array (
  'course_id' => '79',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Course->classCourseInfo[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Course.php ]
[ info ] [ CACHE ] INIT File
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000432s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.001036s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000673s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000655s ]
[ sql ] [ SQL ] UPDATE `tpn_class_course`  SET `reading`=reading+1  WHERE  `id` = 79 [ RunTime:0.002366s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_course` WHERE  `id` = 79 LIMIT 1 [ RunTime:0.000310s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_record` [ RunTime:0.000512s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user_record` WHERE  `uid` = 249  AND `type` = 3  AND `type_id` = 79 LIMIT 1 [ RunTime:0.000387s ]
[ sql ] [ SQL ] INSERT INTO `tpn_user_record` (`uid` , `type` , `type_id` , `created_at`) VALUES (249 , 3 , 79 , 1554195220) [ RunTime:0.002299s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000542s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000284s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:40+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/aftertime?OS=iOS&cid=79&type=0&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/aftertime?OS=iOS&cid=79&type=0&uid=249&version=1.0.5 [运行时间：0.039169s][吞吐率：25.53req/s] [内存消耗：3,986.77kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '79',
  'type' => '0',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->aftertime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000382s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000695s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000632s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000543s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 79  AND `type` = 0 LIMIT 1 [ RunTime:0.000364s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:40+08:00 ] 172.31.69.247 123.117.10.225 POST /discover/comment/datalist
[ log ] api.kzwchina.com/discover/comment/datalist [运行时间：0.050261s][吞吐率：19.90req/s] [内存消耗：3,940.13kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'discover',
    2 => 'comment',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'accept' => '*/*',
  'version' => '1.0.5',
  'os' => 'iOS',
  'accept-encoding' => 'gzip, deflate',
  'accept-language' => 'zh-Hans-CN;q=1',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'connection' => 'keep-alive',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '17',
)
[ info ] [ PARAM ] array (
  'type' => '2',
  'type_id' => '79',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\discover\controller\Comment->datalist[ /www/wwwroot/kouzhiwen/application/api/discover/controller/Comment.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000304s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_comment` [ RunTime:0.000583s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '79' ORDER BY id desc LIMIT 1 [ RunTime:0.000322s ]
[ sql ] [ SQL ] SELECT `a`.`id`,`a`.`type`,`a`.`type_id`,`a`.`contents`,`a`.`add_time`,`a`.`like_num`,`a`.`comment_num`,`u`.`nickname`,`u`.`face`,(select if(count(*)>0,1,0) from `tpn_comment_like` where `comment_id`=a.id and `uid`='249') is_like FROM `tpn_comment` `a` INNER JOIN `tpn_user` `u` ON `u`.`uid`=`a`.`uid` WHERE  `a`.`pid` = 0  AND `a`.`status` = 1  AND `a`.`type` = '2'  AND `a`.`type_id` = '79' ORDER BY id desc LIMIT 0,10 [ RunTime:0.000451s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:42+08:00 ] 172.31.69.247 123.117.10.225 GET /common/user/addstues?OS=iOS&cid=79&ctype=2&uid=249&version=1.0.5
[ log ] api.kzwchina.com/common/user/addstues?OS=iOS&cid=79&ctype=2&uid=249&version=1.0.5 [运行时间：0.040689s][吞吐率：24.58req/s] [内存消耗：3,982.05kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'cid' => '79',
  'ctype' => '2',
  'uid' => '249',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->addstues[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000411s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000928s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000631s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000536s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `uid` = 249  AND `cid` = 79 LIMIT 1 [ RunTime:0.000340s ]
[ sql ] [ SQL ] INSERT INTO `tpn_ctype` (`uid` , `cid` , `ctype`) VALUES (249 , 79 , 2) [ RunTime:0.005165s ]
[ sql ] [ SQL ] UPDATE `tpn_ctype`  SET `ctype`=2  WHERE  `uid` = 249  AND `cid` = 79 [ RunTime:0.004341s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:46+08:00 ] 172.31.69.247 123.117.10.225 POST /common/user/againtime
[ log ] api.kzwchina.com/common/user/againtime [运行时间：0.036348s][吞吐率：27.51req/s] [内存消耗：4,060.20kb] [文件加载：62]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'user',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'accept-encoding' => 'gzip, deflate',
  'content-type' => 'application/x-www-form-urlencoded',
  'content-length' => '60',
)
[ info ] [ PARAM ] array (
  'cid' => '79',
  'course_time' => '10244.720000',
  'time' => '4.140000',
  'type' => '1',
  'uid' => '249',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\User->againtime[ /www/wwwroot/kouzhiwen/application/api/common/controller/User.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000435s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000921s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000626s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_course_time` [ RunTime:0.000566s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_course_time` WHERE  `user_id` = 249  AND `classcourse_id` = 79  AND `type` = 1 [ RunTime:0.000348s ]
[ sql ] [ SQL ] INSERT INTO `tpn_course_time` (`user_id` , `classcourse_id` , `time` , `type` , `course_time`) VALUES (249 , 79 , 4.14 , 1 , 10244.72) [ RunTime:0.004145s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:49+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.075316s][吞吐率：13.28req/s] [内存消耗：4,475.45kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000433s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.007422s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.006985s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000676s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000602s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000697s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000420s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000567s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000357s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000331s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000677s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.003169s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000572s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000360s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000397s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000356s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000359s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000370s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000363s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000361s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000376s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000369s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000355s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000366s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000621s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000340s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000746s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000499s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000215s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000210s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 69 ORDER BY date desc [ RunTime:0.000220s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000229s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 283 ORDER BY date desc [ RunTime:0.000238s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 70 ORDER BY date desc [ RunTime:0.000221s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 76 ORDER BY date desc [ RunTime:0.000229s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:49+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/getclasstime?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/getclasstime?OS=iOS&id=46&version=1.0.5 [运行时间：0.062602s][吞吐率：15.97req/s] [内存消耗：4,006.31kb] [文件加载：60]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->getclasstime[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000355s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000731s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000606s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000644s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000310s ]

---------------------------------------------------------------
[ 2019-04-02T16:53:49+08:00 ] 172.31.69.247 123.117.10.225 GET /common/study/class_course_list?OS=iOS&id=46&version=1.0.5
[ log ] api.kzwchina.com/common/study/class_course_list?OS=iOS&id=46&version=1.0.5 [运行时间：0.102745s][吞吐率：9.73req/s] [内存消耗：4,475.44kb] [文件加载：70]
[ info ] [ LANG ] /www/wwwroot/kouzhiwen/thinkphp/lang/zh-cn.php
[ info ] [ BIND ] 'api'
[ info ] [ ROUTE ] array (
  'type' => 'module',
  'module' => 
  array (
    0 => 'api',
    1 => 'common',
    2 => 'study',
  ),
)
[ info ] [ HEADER ] array (
  'host' => 'api.kzwchina.com',
  'os' => 'iOS',
  'cookie' => 'PHPSESSID=i3t41k0v1o311jur6ls3pqlt72',
  'connection' => 'keep-alive',
  'accept' => '*/*',
  'logintoken' => 'cc0befcbcca1f541a3b25561dcab0af0',
  'user-agent' => 'kouzhiwen/1.0.5 (iPhone; iOS 11.4.1; Scale/3.00)',
  'accept-language' => 'zh-Hans-CN;q=1',
  'version' => '1.0.5',
  'accept-encoding' => 'gzip, deflate',
)
[ info ] [ PARAM ] array (
  'OS' => 'iOS',
  'id' => '46',
  'version' => '1.0.5',
)
[ info ] [ SESSION ] INIT array (
  'id' => '',
  'var_session_id' => '',
  'prefix' => 'think',
  'type' => '',
  'auto_start' => true,
)
[ info ] [ DB ] INIT mysql
[ info ] [ RUN ] app\api\common\controller\Study->ClassCourseList[ /www/wwwroot/kouzhiwen/application/api/common/controller/Study.php ]
[ info ] [ LOG ] INIT File
[ sql ] [ DB ] CONNECT:[ UseTime:0.000324s ] mysql:dbname=kouzhiwen;host=127.0.0.1;port=3306;charset=utf8
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user` [ RunTime:0.000670s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_user` WHERE  `logintoken` = 'cc0befcbcca1f541a3b25561dcab0af0' LIMIT 1 [ RunTime:0.000561s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_user` [ RunTime:0.000571s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class_user` WHERE  `class_id` = 46  AND `uid` = 249 LIMIT 1 [ RunTime:0.000522s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class` [ RunTime:0.000596s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_class` WHERE  `id` = 46 LIMIT 1 [ RunTime:0.000278s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_sign` [ RunTime:0.000502s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_sign` WHERE  `class_id` = 46  AND `uid` = 249  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000292s ]
[ sql ] [ SQL ] SELECT COUNT(*) AS tp_count FROM `tpn_sign` WHERE  `class_id` = 46  AND `date` = '2019-04-02' LIMIT 1 [ RunTime:0.000272s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_class_course` [ RunTime:0.000590s ]
[ sql ] [ SQL ] SELECT `c`.`id`,`c`.`title`,`c`.`photo`,`c`.`reading`,`c`.`status` FROM `tpn_class_course` `c` WHERE  `c`.`class_id` = '46' ORDER BY `c`.`start` [ RunTime:0.000421s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_ctype` [ RunTime:0.000489s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 68  AND `uid` = 249 LIMIT 1 [ RunTime:0.000317s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 69  AND `uid` = 249 LIMIT 1 [ RunTime:0.000318s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 70  AND `uid` = 249 LIMIT 1 [ RunTime:0.000299s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 71  AND `uid` = 249 LIMIT 1 [ RunTime:0.000300s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 72  AND `uid` = 249 LIMIT 1 [ RunTime:0.000298s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 73  AND `uid` = 249 LIMIT 1 [ RunTime:0.000313s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 75  AND `uid` = 249 LIMIT 1 [ RunTime:0.000291s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 76  AND `uid` = 249 LIMIT 1 [ RunTime:0.000309s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 77  AND `uid` = 249 LIMIT 1 [ RunTime:0.000293s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 78  AND `uid` = 249 LIMIT 1 [ RunTime:0.000297s ]
[ sql ] [ SQL ] SELECT * FROM `tpn_ctype` WHERE  `cid` = 79  AND `uid` = 249 LIMIT 1 [ RunTime:0.000302s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_teacher_article` [ RunTime:0.000521s ]
[ sql ] [ SQL ] SELECT `id`,`name`,`cover_img` FROM `tpn_teacher_article` WHERE  `class_id` = 46  AND `status` = 1 ORDER BY add_time desc LIMIT 0,4 [ RunTime:0.000271s ]
[ sql ] [ SQL ] SELECT `u`.`uid`,`u`.`face`,(select SUM(blue+purple+green+orange+red) from `tpn_user_ranking` `r` where `date`='2019' and `r`.`uid`=`c`.`uid`) ranking_num FROM `tpn_class_user` `c` LEFT JOIN `tpn_user` `u` ON `u`.`uid`=`c`.`uid` WHERE  `c`.`class_id` = '46' ORDER BY ranking_num desc LIMIT 0,10 [ RunTime:0.000965s ]
[ sql ] [ SQL ] SHOW COLUMNS FROM `tpn_user_ranking` [ RunTime:0.000465s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000235s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000206s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000218s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 162 ORDER BY date desc [ RunTime:0.000230s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000201s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 146 ORDER BY date desc [ RunTime:0.000214s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 95 ORDER BY date desc [ RunTime:0.000246s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 271 ORDER BY date desc [ RunTime:0.000224s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` IS NULL ORDER BY date desc [ RunTime:0.000203s ]
[ sql ] [ SQL ] SELECT `blue`,`purple`,`green`,`orange`,`red` FROM `tpn_user_ranking` WHERE  `uid` = 245 ORDER BY date desc [ RunTime:0.000230s ]

---------------------------------------------------------------
